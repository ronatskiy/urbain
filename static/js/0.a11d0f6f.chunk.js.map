{"version":3,"sources":["core/Module.js","modules/SolarSystem/ModuleSolarSystem.js","modules/SolarSystem/Orientation/IAUModel.js","modules/SolarSystem/Trajectory/ELP2000.js","modules/SolarSystem/Trajectory/VSOP87.js"],"names":["Module","Object","D_Projects_github_com_urbain_ru_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_classes","alias","className","undefined","Error","ModuleSolarSystem","_addClass","TrajectoryVSOP87","TrajectoryELP2000","OrientationIAUModel","callback","_this","sim","loadStarSystem","starSystem","_onSystemLoaded","StarSystemLoader","loadObjectByUrl","loadTLE","time","initValues","useCurrentTime","noradId","path","Math","floor","SUN","MERCURY_BARYCENTER","VENUS_BARYCENTER","EARTH_BARYCENTER","MARS_BARYCENTER","JUPITER_BARYCENTER","SATURN_BARYCENTER","URANUS_BARYCENTER","NEPTUNE_BARYCENTER","PLUTO_BARYCENTER","MERCURY","VENUS","EARTH","MARS","JUPITER","SATURN","URANUS","NEPTUNE","PLUTO","MOON","IO","EUROPA","GANYMEDE","CALLISTO","MIMAS","ENCELADUS","TITAN","TRITON","CHARON","config","D_Projects_github_com_urbain_ru_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_Projects_github_com_urbain_ru_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","rightAscension","declination","rotation","ICRFQuaternion","Quaternion","deg2rad","epoch","centuries","days","mul","setFromEuler","OrientationAbstract","coefficients","ReferenceFrameFactory","buildId","ReferenceFrame","INERTIAL_ECLIPTIC","mu","getObject","physicalModel","_p","model","_calcAll","sinLon","sin","lon","sinLat","lat","cosLon","cos","cosLat","StateVector","Vector","r","dr","dlon","dlat","fileIdx","value","derivative","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","k","arg","D","l_","l","F","dArg","dD","dl_","dl","dF","err","return","t","z","W1","dz","dW1","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","T","Me","V","Ma","J","S","U","N","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","t2","_calc1_3","_calc4_9","res","_calc10_15","_calc16_21","_calc22_36","t3","t4","i","f1","_calcFile","f2","f3","TrajectoryKeplerianAbstract","body","referenceFrameOrId","KeplerianObject","createFromState","referenceFrame","transformStateVectorByEpoch","getStateInOwnFrameByEpoch","position","velocity","varNum","degree","posSum","diffSum","tPowDegree","pow","coeffs","mul_"],"mappings":"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","file":"static/js/0.a11d0f6f.chunk.js","sourcesContent":["export default class Module\r\n{\r\n    constructor() {\r\n        this._classes = {};\r\n    }\r\n\r\n    _addClass(alias, className) {\r\n        this._classes[alias] = className;\r\n    }\r\n\r\n    getClass(alias) {\r\n        if (this._classes[alias] === undefined) {\r\n            throw new Error('Unknown module class: ' + alias);\r\n        }\r\n        return this._classes[alias];\r\n    }\r\n\r\n    init() {}\r\n}\r\n","import Module from \"../../core/Module\";\r\nimport { sim } from \"../../core/Simulation\";\r\nimport StarSystemLoader from \"../../interface/StarSystemLoader\";\r\nimport TrajectoryELP2000 from \"./Trajectory/ELP2000\";\r\nimport TrajectoryVSOP87 from \"./Trajectory/VSOP87\";\r\nimport OrientationIAUModel from \"./Orientation/IAUModel\";\r\n\r\nexport default class ModuleSolarSystem extends Module\r\n{\r\n    init() {\r\n        this._addClass('TrajectoryVSOP87', TrajectoryVSOP87);\r\n        this._addClass('TrajectoryELP2000', TrajectoryELP2000);\r\n        this._addClass('OrientationIAUModel', OrientationIAUModel);\r\n    }\r\n\r\n    loadStarSystem(alias, callback) {\r\n        sim.loadStarSystem('solar_system.json', starSystem => { this._onSystemLoaded(starSystem); callback && callback(starSystem); });\r\n    }\r\n\r\n    _onSystemLoaded(starSystem) {\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/voyager1.json');\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/voyager2.json');\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/lro.json');\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/osiris-rex.json');\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/parker.json');\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/roadster.json');\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/hayabusa2.json');\r\n\r\n        this.loadTLE(starSystem, 25544); // ISS\r\n        this.loadTLE(starSystem, 20580); // Hubble\r\n\r\n        sim.time.initValues();\r\n        sim.time.useCurrentTime();\r\n    }\r\n\r\n    loadTLE(starSystem, noradId) {\r\n        const path = Math.floor(noradId / 1000);\r\n        StarSystemLoader.loadObjectByUrl(starSystem, './spacecraft/' + path + '/' + noradId + '.json.gz');\r\n    };\r\n\r\n    /*\r\n   *---------------  CONSTANTS  ---------------\r\n    */\r\n    static SUN = 10;\r\n    /*\r\n   *---------------  BARYCENTERS  ---------------\r\n    */\r\n    static MERCURY_BARYCENTER = 1;\r\n    static VENUS_BARYCENTER   = 2;\r\n    static EARTH_BARYCENTER   = 3;\r\n    static MARS_BARYCENTER    = 4;\r\n    static JUPITER_BARYCENTER = 5;\r\n    static SATURN_BARYCENTER  = 6;\r\n    static URANUS_BARYCENTER  = 7;\r\n    static NEPTUNE_BARYCENTER = 8;\r\n    static PLUTO_BARYCENTER   = 9;\r\n    /*\r\n   *---------------  PLANETS  ---------------\r\n    */\r\n    static MERCURY = 199;\r\n    static VENUS   = 299;\r\n    static EARTH   = 399;\r\n    static MARS    = 499;\r\n    static JUPITER = 599;\r\n    static SATURN  = 699;\r\n    static URANUS  = 799;\r\n    static NEPTUNE = 899;\r\n    static PLUTO   = 999;\r\n    /*\r\n   *---------------  SATELLITES  ---------------\r\n    */\r\n    static MOON      = 301;  // Earth\r\n    static IO        = 501;  // Jupiter\r\n    static EUROPA    = 502;\r\n    static GANYMEDE  = 503;\r\n    static CALLISTO  = 504;\r\n    static MIMAS     = 601;  // Saturn\r\n    static ENCELADUS = 602;\r\n    static TITAN     = 606;\r\n    static TRITON    = 801;  // Neptune\r\n    static CHARON    = 901;  // Pluto\r\n}\r\n","import OrientationAbstract from \"../../../core/Orientation/Abstract\";\r\nimport {deg2rad, Quaternion} from \"../../../core/algebra\";\r\n\r\nexport default class OrientationIAUModel extends OrientationAbstract\r\n{\r\n    constructor(config) {\r\n        super();\r\n        this.rightAscension = config[0];\r\n        this.declination = config[1];\r\n        this.rotation = config[2];\r\n\r\n        this.ICRFQuaternion = new Quaternion([-1, 0, 0], deg2rad(23.4)); // TODO needs refining\r\n    }\r\n\r\n    getQuaternionByEpoch(epoch) {\r\n        const centuries = epoch / 3155760000;\r\n        const days = epoch / 86400;\r\n\r\n        const rightAscension = 90 + this.rightAscension[0] +\r\n            centuries * this.rightAscension[1] +\r\n            centuries * centuries * this.rightAscension[2];\r\n        const declination = 90 - (this.declination[0] +\r\n            centuries * this.declination[1] +\r\n            centuries * centuries * this.declination[2]);\r\n        const rotation = this.rotation[0] +\r\n            days * this.rotation[1] +\r\n            days * days * this.rotation[2];\r\n\r\n        return this.ICRFQuaternion.mul(\r\n            (new Quaternion())\r\n                .setFromEuler(deg2rad(rightAscension), deg2rad(declination), deg2rad(rotation), 'ZXZ')\r\n        );\r\n    }\r\n}\r\n","import TrajectoryKeplerianAbstract from \"../../../core/Trajectory/KeplerianAbstract\";\r\nimport ReferenceFrameFactory from \"../../../core/ReferenceFrame/Factory\";\r\nimport {ReferenceFrame} from \"../../../core/ReferenceFrame/Factory\";\r\nimport {deg2rad, Vector} from \"../../../core/algebra\";\r\nimport StateVector from \"../../../core/StateVector\";\r\nimport ModuleSolarSystem from \"../ModuleSolarSystem\";\r\nimport { sim } from \"../../../core/Simulation\";\r\n\r\nexport default class TrajectoryELP2000 extends TrajectoryKeplerianAbstract\r\n{\r\n    constructor(coefficients) {\r\n        super(ReferenceFrameFactory.buildId(ModuleSolarSystem.EARTH, ReferenceFrame.INERTIAL_ECLIPTIC));\r\n        this.coefficients = coefficients;\r\n        this.mu = sim.starSystem.getObject(ModuleSolarSystem.EARTH).physicalModel.mu;\r\n        this._p = 5029.0966;\r\n    }\r\n\r\n    getStateInOwnFrameByEpoch(epoch) {\r\n        const model = this._calcAll(epoch / 86400 / 36525);\r\n        const sinLon = Math.sin(model.lon);\r\n        const sinLat = Math.sin(model.lat);\r\n        const cosLon = Math.cos(model.lon);\r\n        const cosLat = Math.cos(model.lat);\r\n\r\n        return new StateVector(\r\n            new Vector([\r\n                model.r * cosLon * cosLat,\r\n                model.r * sinLon * cosLat,\r\n                model.r * sinLat\r\n            ]),\r\n            new Vector([\r\n                (model.dr * cosLon * cosLat - model.r * sinLon * cosLat * model.dlon - model.r * cosLon * sinLat * model.dlat) / 36525 / 86400,\r\n                (model.dr * sinLon * cosLat + model.r * cosLon * cosLat * model.dlon - model.r * sinLon * sinLat * model.dlat) / 36525 / 86400,\r\n                (model.dr * sinLat + model.r * cosLat * model.dlat) / 36525 / 86400\r\n            ])\r\n        );\r\n    }\r\n\r\n    _calc1_3(fileIdx) {\r\n        let value = 0;\r\n        let derivative = 0;\r\n\r\n        for (let k of this.coefficients[fileIdx]) {\r\n            const arg = deg2rad((k[0] * this.D + k[1] * this.l_ + k[2] * this.l + k[3] * this.F) / 3600);\r\n            const dArg = k[0] * this.dD + k[1] * this.dl_ + k[2] * this.dl + k[3] * this.dF;\r\n            const sin = Math.sin(arg);\r\n            const cos = Math.cos(arg);\r\n            value += k[4] * (fileIdx == 2 ? cos : sin);\r\n            derivative += k[4] * (fileIdx == 2 ? -sin : cos) * deg2rad(dArg / 3600);\r\n        }\r\n\r\n        return [value, derivative];\r\n    }\r\n\r\n    _calc4_9(fileIdx, t) {\r\n        const z = this.W1 + this._p * t;\r\n        const dz = this.dW1 + this._p;\r\n\r\n        let value = 0;\r\n        let derivative = 0;\r\n\r\n        for (let k of this.coefficients[fileIdx]) {\r\n            const arg = (k[0] * z + k[1] * this.D + k[2] * this.l_ + k[3] * this.l + k[4] * this.F) / 3600 + k[5];\r\n            const dArg = k[0] * dz + k[1] * this.dD + k[2] * this.dl_ + k[3] * this.dl + k[4] * this.dF;\r\n            value += k[6] * Math.sin(deg2rad(arg));\r\n            derivative += k[6] * Math.cos(deg2rad(arg)) * deg2rad(dArg / 3600);\r\n        }\r\n\r\n        return [value, derivative];\r\n    }\r\n\r\n    _calc10_15(fileIdx, t) {\r\n        const T  = 100 * 3600 + 27 * 60 + 59.22059 +  129597742.2758 * t;\r\n        const dT =  129597742.2758;\r\n        const Me = 252 * 3600 + 15 * 60 +  3.25986 + 538101628.68898 * t;\r\n        const dMe= 538101628.68898;\r\n        const V  = 181 * 3600 + 58 * 60 + 47.28305 + 210664136.43355 * t;\r\n        const dV = 210664136.43355;\r\n        const Ma = 355 * 3600 + 25 * 60 + 59.78866 +  68905077.59284 * t;\r\n        const dMa=  68905077.59284;\r\n        const J  =  34 * 3600 + 21 * 60 +  5.34212 +  10925660.42861 * t;\r\n        const dJ =  10925660.42861;\r\n        const S  =  50 * 3600 +  4 * 60 + 38.89694 +   4399609.65932 * t;\r\n        const dS =   4399609.65932;\r\n        const U  = 314 * 3600 +  3 * 60 + 18.01841 +   1542481.19393 * t;\r\n        const dU =   1542481.19393;\r\n        const N  = 304 * 3600 + 20 + 60 + 55.19575 +    786550.32074 * t;\r\n        const dN =    786550.32074;\r\n\r\n        let value = 0;\r\n        let derivative = 0;\r\n\r\n        for (let k of this.coefficients[fileIdx]) {\r\n            const arg = (k[0] * Me + k[1] * V + k[2] * T + k[3] * Ma + k[4] * J + k[5] * S + k[6] * U + k[7] * N + k[8] * this.D + k[9] * this.l + k[10] * this.F) / 3600 + k[11];\r\n            const dArg = k[0] * dMe + k[1] * dV + k[2] * dT + k[3] * dMa + k[4] * dJ + k[5] * dS + k[6] * dU + k[7] * dN + k[8] * this.dD + k[9] * this.dl + k[10] * this.dF;\r\n            value += k[12] * Math.sin(deg2rad(arg));\r\n            derivative += k[12] * Math.cos(deg2rad(arg)) * deg2rad(dArg / 3600);\r\n        }\r\n\r\n        return [value, derivative];\r\n    }\r\n\r\n    _calc16_21(fileIdx, t) {\r\n        const T  = 100 * 3600 + 27 * 60 + 59.22059 +  129597742.2758 * t;\r\n        const dT =  129597742.2758;\r\n        const Me = 252 * 3600 + 15 * 60 +  3.25986 + 538101628.68898 * t;\r\n        const dMe= 538101628.68898;\r\n        const V  = 181 * 3600 + 58 * 60 + 47.28305 + 210664136.43355 * t;\r\n        const dV = 210664136.43355;\r\n        const Ma = 355 * 3600 + 25 * 60 + 59.78866 +  68905077.59284 * t;\r\n        const dMa=  68905077.59284;\r\n        const J  =  34 * 3600 + 21 * 60 +  5.34212 +  10925660.42861 * t;\r\n        const dJ =  10925660.42861;\r\n        const S  =  50 * 3600 +  4 * 60 + 38.89694 +   4399609.65932 * t;\r\n        const dS =   4399609.65932;\r\n        const U  = 314 * 3600 +  3 * 60 + 18.01841 +   1542481.19393 * t;\r\n        const dU =   1542481.19393;\r\n\r\n        let value = 0;\r\n        let derivative = 0;\r\n\r\n        for (let k of this.coefficients[fileIdx]) {\r\n            const arg = (k[0] * Me + k[1] * V + k[2] * T + k[3] * Ma + k[4] * J + k[5] * S + k[6] * U + k[7] * this.D + k[8] * this.l_ + k[9] * this.l + k[10] * this.F) / 3600 + k[11];\r\n            const dArg = k[0] * dMe + k[1] * dV + k[2] * dT + k[3] * dMa + k[4] * dJ + k[5] * dS + k[6] * dU + k[7] * this.dD + k[8] * this.dl_ + k[9] * this.dl + k[10] * this.dF;\r\n            value += k[12] * Math.sin(deg2rad(arg));\r\n            derivative += k[12] * Math.cos(deg2rad(arg)) * deg2rad(dArg / 3600);\r\n        }\r\n\r\n        return [value, derivative];\r\n    }\r\n\r\n    _calc22_36(fileIdx) {\r\n        let value = 0;\r\n        let derivative = 0;\r\n\r\n        for (let k of this.coefficients[fileIdx]) {\r\n            const arg = (k[1] * this.D + k[2] * this.l_ + k[3] * this.l + k[4] * this.F) / 3600 + k[5];\r\n            const dArg = k[1] * this.dD + k[2] * this.dl_ + k[3] * this.dl + k[4] * this.dF;\r\n            value += k[6] * Math.sin(deg2rad(arg));\r\n            derivative += k[6] * Math.cos(deg2rad(arg)) * deg2rad(dArg / 3600);\r\n        }\r\n\r\n        return [value, derivative];\r\n    }\r\n\r\n    _calcFile(fileIdx, t, t2) {\r\n        if (fileIdx < 3) {\r\n            return this._calc1_3(fileIdx);\r\n        } else if (fileIdx < 6) {\r\n            return this._calc4_9(fileIdx, t);\r\n        } else if (fileIdx < 9) {\r\n            const res = this._calc4_9(fileIdx, t);\r\n            return [res[0] * t, res[1] * t + res[0]];\r\n        } else if (fileIdx < 12) {\r\n            return this._calc10_15(fileIdx, t);\r\n        } else if (fileIdx < 15) {\r\n            const res = this._calc10_15(fileIdx, t);\r\n            return [res[0] * t, res[1] * t + res[0]];\r\n        } else if (fileIdx < 18) {\r\n            return this._calc16_21(fileIdx, t);\r\n        } else if (fileIdx < 21) {\r\n            const res = this._calc16_21(fileIdx, t);\r\n            return [res[0] * t, res[1] * t + res[0]];\r\n        } else if (fileIdx < 24) {\r\n            return this._calc22_36(fileIdx);\r\n        } else if (fileIdx < 27) {\r\n            const res = this._calc22_36(fileIdx);\r\n            return [res[0] * t, res[1] * t + res[0]];\r\n        } else if (fileIdx < 33) {\r\n            return this._calc22_36(fileIdx);\r\n        } else if (fileIdx < 36) {\r\n            const res = this._calc22_36(fileIdx, t);\r\n            return [res[0] * t2, res[1] * t2 + res[0] * 2 * t];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    _calcAll(t) {\r\n        let lon  = 0;\r\n        let dlon = 0;\r\n        let lat  = 0;\r\n        let dlat = 0;\r\n        let r    = 0;\r\n        let dr   = 0;\r\n        const t2 = t *t;\r\n        const t3 = t2*t;\r\n        const t4 = t3*t;\r\n\r\n        this.D  = 297 * 3600 + 51 * 60 +  0.73512 + 1602961601.4603 * t -  5.8681 * t2 + 0.006595 * t3 - 0.00003184 * t4;\r\n        this.dD = 1602961601.4603 - 5.8681 * 2 * t + 0.006595 * 3 * t2 - 0.00003184 * 4 * t3;\r\n        this.l_ = 357 * 3600 + 31 * 60 + 44.79306 +  129596581.0474 * t -  0.5529 * t2 + 0.000147 * t3;\r\n        this.dl_= 129596581.0474 - 0.5529 * 2 * t + 0.000147 * 3 * t2;\r\n        this.l  = 134 * 3600 + 57 * 60 + 48.28096 + 1717915923.4728 * t + 32.3893 * t2 + 0.051651 * t3 - 0.00024471 * t4;\r\n        this.dl = 1717915923.4728 + 32.3893 * 2 * t + 0.051651 * 3 * t2 - 0.00024471 * 4 * t3;\r\n        this.F  =  93 * 3600 + 16 * 60 + 19.55755 + 1739527263.0983 * t - 12.2505 * t2 - 0.001021 * t3 + 0.00000417 * t4;\r\n        this.dF = 1739527263.0983 - 12.2505 * 2 * t - 0.001021 * 3 * t2 + 0.00000417 * 4 * t3;\r\n\r\n        this.W1  = 218 * 3600 + 18 * 60 + 59.95571 + 1732559343.73604 * t - 5.8883 * t2 + 0.006604 * t3 - 0.00003169 * t4;\r\n        this.dW1 = 1732559343.73604 - 5.8883 * 2 * t + 0.006604 * 3 * t2 - 0.00003169 * 4 * t3;\r\n\r\n        for (let i = 0; i < 12; ++i) {\r\n            const f1 = this._calcFile(i * 3    , t, t2);\r\n            const f2 = this._calcFile(i * 3 + 1, t, t2);\r\n            const f3 = this._calcFile(i * 3 + 2, t, t2);\r\n            lon  += f1[0];\r\n            dlon += f1[1];\r\n            lat  += f2[0];\r\n            dlat += f2[1];\r\n            r    += f3[0];\r\n            dr   += f3[1];\r\n        }\r\n\r\n        return {\r\n            'lon':  deg2rad(( lon +  this.W1) / 3600),\r\n            'dlon': deg2rad((dlon + this.dW1) / 3600),\r\n            'lat':  deg2rad( lat / 3600),\r\n            'dlat': deg2rad(dlat / 3600),\r\n            'r':    r,\r\n            'dr':   dr\r\n        }\r\n\t}\r\n}\r\n","import {ReferenceFrame} from \"../../../core/ReferenceFrame/Factory\";\r\nimport ReferenceFrameFactory from \"../../../core/ReferenceFrame/Factory\";\r\nimport TrajectoryKeplerianAbstract from \"../../../core/Trajectory/KeplerianAbstract\";\r\nimport KeplerianObject from \"../../../core/KeplerianObject\";\r\nimport {Vector} from \"../../../core/algebra\";\r\nimport StateVector from \"../../../core/StateVector\";\r\nimport ModuleSolarSystem from \"../ModuleSolarSystem\";\r\nimport { sim } from \"../../../core/Simulation\";\r\n\r\nexport default class TrajectoryVSOP87 extends TrajectoryKeplerianAbstract\r\n{\r\n    constructor(config) {\r\n        super(ReferenceFrameFactory.buildId((config.body === ModuleSolarSystem.SUN) ? 0 : ModuleSolarSystem.SUN, ReferenceFrame.INERTIAL_ECLIPTIC));\r\n        this.coefficients = config.coefficients;\r\n        this.mu = (config.body === ModuleSolarSystem.SUN)\r\n            ? 319.77790837966666\r\n            : sim.starSystem.getObject(ModuleSolarSystem.SUN).physicalModel.mu;\r\n    }\r\n\r\n    getKeplerianObjectByEpoch(epoch, referenceFrameOrId) {\r\n        return KeplerianObject.createFromState(\r\n            this.referenceFrame.transformStateVectorByEpoch(\r\n                epoch,\r\n                this.getStateInOwnFrameByEpoch(epoch),\r\n                referenceFrameOrId === undefined\r\n                    ? this.referenceFrame\r\n                    : referenceFrameOrId\r\n            ),\r\n            this.mu,\r\n            epoch\r\n        );\r\n    }\r\n\r\n    getStateInOwnFrameByEpoch(epoch) {\r\n        const T = epoch / 86400 / 365250;\r\n        let position = new Vector(3);\r\n        let velocity = new Vector(3);\r\n\r\n        for (let varNum in this.coefficients) {\r\n            varNum = 0|varNum;\r\n            for (let degree in this.coefficients[varNum]) {\r\n                degree = 0|degree;\r\n                let posSum = 0;\r\n                let diffSum = 0;\r\n                const tPowDegree = Math.pow(T, degree);\r\n                for (let coeffs of this.coefficients[varNum][degree]) {\r\n                    posSum += coeffs[0] * Math.cos(coeffs[1] + coeffs[2] * T);\r\n                    diffSum += coeffs[0] * coeffs[2] * Math.sin(coeffs[1] + coeffs[2] * T)\r\n                }\r\n                position[varNum] += tPowDegree * posSum;\r\n                velocity[varNum] += (degree ? degree * Math.pow(T, degree - 1) * posSum : 0) - tPowDegree * diffSum;\r\n            }\r\n        }\r\n\r\n        return new StateVector(position.mul_(149597870.7), velocity.mul_(149597870.7 / 86400 / 365250));\r\n    }\r\n}\r\n"],"sourceRoot":""}