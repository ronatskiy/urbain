webpackJsonp([1],{190:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return n(e,[{key:"propagate",value:function(e,t,r){}}]),e}();t.a=i},55:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(190),c=r(26),s=r(3),u=r(19),l=r(11),p=r(27),f=r(2),h=r(1),y=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=function(e){function t(){o(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.soiSafetyCoefficient=1.5,e.maxStep=3600,e.minStepCount=100,e.maxPatchError=.001,e}return i(t,e),y(t,[{key:"propagate",value:function(e,t,r){if(!e instanceof c.a)throw new Error("Patched conics propagation requires TrajectoryComposite instance");if(!r.epoch)throw new Error("Patched conics propagation requires epoch in stop condition");e.clearAfterEpoch(t);var o=e.getComponentByEpoch(t),n=Math.max(t,o.epoch),i=void 0;o.maxEpoch=!1;do{(i=this._findNextTrajectory(o,n,r.epoch))&&(e.addComponent(i),n=i.epoch,o.maxEpoch=n,o=i)}while(i&&n<r.epoch)}},{key:"_findNextTrajectory",value:function(e,t,r){var o=h.a.starSystem.getObject(e.referenceFrame.originId),n=this._findOwnSoiCrossing(o,e,t),i=this._findChildSoiCrossing(o,e,t,r);if(!1===i&&!1===n)return!1;var a=!i||n&&n.epoch<i.epoch?n:i;return this._createExtensionTrajectory(e,a.newSoi,a.epoch)}},{key:"_findOwnSoiCrossing",value:function(e,t,r){var o=t.keplerianObject,n=o.getSphereCrossingTrueAnomaly(e.data.patchedConics.soiRadius);if(!n)return!1;for(var i=o.getEpochByTrueAnomaly(n[0]);i<r;)i+=o.period;return{epoch:i,newSoi:e.data.patchedConics.parentSoi}}},{key:"_findChildSoiCrossing",value:function(e,t,r,o){var n=t.keplerianObject,i=[],a=!0,c=!1,s=void 0;try{for(var u,l=e.data.patchedConics.childSois[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var p=u.value,h=p.trajectory.getKeplerianObjectByEpoch(r,t.referenceFrame),y=p.data.patchedConics.soiRadius,d=this._getPotentialApproachIntervals(h,n,r,o,y*this.soiSafetyCoefficient),v=this._getPotentialApproachIntervals(n,h,r,o,y*this.soiSafetyCoefficient),g=Object(f.i)(d,v);if(!1!==g){!0===g&&(g=[[r,o]]),g.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0});var b=!1,m=!0,E=!1,_=void 0;try{for(var w,S=g[Symbol.iterator]();!(m=(w=S.next()).done);m=!0){var C=w.value;if(!(C[1]<r)){C[0]<r&&(C[0]=r),C[1]>o&&(C[1]=o);for(var P=!0,T=Math.min(this.maxStep,(C[1]-C[0])/this.minStepCount),j=C[0],B=0;j<C[1];){var O=t.getPositionByEpoch(j).sub_(p.getPositionByEpoch(j)).mag-y;if(O<0){if(P){do{j+=T,j>C[1]&&(j=C[1]),O=t.getPositionByEpoch(j).sub_(p.getPositionByEpoch(j)).mag-y}while(O<0&&j<C[1]);if(O<0)break;continue}for(;Math.abs(O)>this.maxPatchError;)T*=O/(B-O),j+=T,B=O,O=t.getPositionByEpoch(j).sub_(p.getPositionByEpoch(j)).mag-y;i.push({epoch:j,newSoi:p}),b=!0;break}B=O,P=!1,j+=T}if(b)break}}}catch(e){E=!0,_=e}finally{try{!m&&S.return&&S.return()}finally{if(E)throw _}}}}}catch(e){c=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(c)throw s}}if(!i.length)return!1;var x=i[0],k=!0,A=!1,R=void 0;try{for(var I,F=i[Symbol.iterator]();!(k=(I=F.next()).done);k=!0){var M=I.value;M.epoch<x.epoch&&(x=M)}}catch(e){A=!0,R=e}finally{try{!k&&F.return&&F.return()}finally{if(A)throw R}}return x}},{key:"_getPotentialApproachIntervals",value:function(e,t,r,o,n){var i=this._getRadialTaBounds(e,t,n),a=this._getVerticalTaBounds(e,t,r,n),c=void 0;if(a)c=Object(f.h)(a,i);else{if(!0===i)return!0;c=i}if(!1===c)return!1;var s=t.period,u=void 0,l=void 0,p=t.isElliptic?Math.floor((r-t.epoch)/s)*s:0,h=0,y=[];do{var d=!0,v=!1,g=void 0;try{for(var b,m=c[Symbol.iterator]();!(d=(b=m.next()).done);d=!0){var E=b.value;u=t.getEpochByTrueAnomaly(E[0])+p,l=t.getEpochByTrueAnomaly(E[1])+p,l<u&&(u-=s),l>h&&(h=l),l<r||y.push([u,l])}}catch(e){v=!0,g=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw g}}p+=s}while(h<o&&t.isElliptic);return y}},{key:"_getVerticalTaBounds",value:function(e,t,r,o){return l.a.createFromState(t.getStateByEpoch(r).rotate_(e.getOrbitalFrameQuaternion().invert_()),t.mu,r).getPlaneCrossingTrueAnomaly(o)}},{key:"_getRadialTaBounds",value:function(e,t,r){var o=e.getPeriapsisRadius()-r,n=e.getApoapsisRadius()+r,i=t.getSphereCrossingTrueAnomaly(o),a=t.getSphereCrossingTrueAnomaly(n);return e.isHyperbolic?t.isHyperbolic?!i||[[-1/0,i[1]-f.b],[i[0],1/0]]:i?[i]:t.getApoapsisRadius()>=o:t.isHyperbolic?!!a&&(i?[[a[1]-f.b,i[1]-f.b],[i[0],a[0]]]:[[a[1]-f.b,a[0]]]):i?a?[[i[0],a[0]],[a[1],i[1]]]:[i]:a?[[a[1],a[0]]]:t.getPeriapsisRadius()<n&&t.getApoapsisRadius()>o}},{key:"_createExtensionTrajectory",value:function(e,t,r){var o=h.a.starSystem.getReferenceFrame(s.d.buildId(t.id,s.c.INERTIAL_ECLIPTIC)),n=o.stateVectorFromBaseReferenceFrameByEpoch(r,e.getStateByEpoch(r)),i=new u.a(o.id,l.a.createFromState(n,t.physicalModel.mu,r));return i.minEpoch=r,i.maxEpoch=!1,i.isEditable=!1,i.setVisualModel(new p.a(i,{color:e.visualModel.standardColor,minEpoch:null,maxEpoch:null})),i}}]),t}(a.a);t.default=d}});
//# sourceMappingURL=1.97c3009f.chunk.js.map