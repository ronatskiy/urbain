webpackJsonp([0,1],{190:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return n(e,[{key:"propagate",value:function(e,t,r){}}]),e}();t.a=i},191:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return n(e,[{key:"init",value:function(){}}]),e}();t.a=i},55:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(190),c=r(26),u=r(3),s=r(19),f=r(11),l=r(27),p=r(2),h=r(1),y=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=function(e){function t(){o(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.soiSafetyCoefficient=1.5,e.maxStep=3600,e.minStepCount=100,e.maxPatchError=.001,e}return i(t,e),y(t,[{key:"propagate",value:function(e,t,r){if(!e instanceof c.a)throw new Error("Patched conics propagation requires TrajectoryComposite instance");if(!r.epoch)throw new Error("Patched conics propagation requires epoch in stop condition");e.clearAfterEpoch(t);var o=e.getComponentByEpoch(t),n=Math.max(t,o.epoch),i=void 0;o.maxEpoch=!1;do{(i=this._findNextTrajectory(o,n,r.epoch))&&(e.addComponent(i),n=i.epoch,o.maxEpoch=n,o=i)}while(i&&n<r.epoch)}},{key:"_findNextTrajectory",value:function(e,t,r){var o=h.a.starSystem.getObject(e.referenceFrame.originId),n=this._findOwnSoiCrossing(o,e,t),i=this._findChildSoiCrossing(o,e,t,r);if(!1===i&&!1===n)return!1;var a=!i||n&&n.epoch<i.epoch?n:i;return this._createExtensionTrajectory(e,a.newSoi,a.epoch)}},{key:"_findOwnSoiCrossing",value:function(e,t,r){var o=t.keplerianObject,n=o.getSphereCrossingTrueAnomaly(e.data.patchedConics.soiRadius);if(!n)return!1;for(var i=o.getEpochByTrueAnomaly(n[0]);i<r;)i+=o.period;return{epoch:i,newSoi:e.data.patchedConics.parentSoi}}},{key:"_findChildSoiCrossing",value:function(e,t,r,o){var n=t.keplerianObject,i=[],a=!0,c=!1,u=void 0;try{for(var s,f=e.data.patchedConics.childSois[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var l=s.value,h=l.trajectory.getKeplerianObjectByEpoch(r,t.referenceFrame),y=l.data.patchedConics.soiRadius,d=this._getPotentialApproachIntervals(h,n,r,o,y*this.soiSafetyCoefficient),v=this._getPotentialApproachIntervals(n,h,r,o,y*this.soiSafetyCoefficient),b=Object(p.i)(d,v);if(!1!==b){!0===b&&(b=[[r,o]]),b.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0});var g=!1,m=!0,_=!1,E=void 0;try{for(var w,S=b[Symbol.iterator]();!(m=(w=S.next()).done);m=!0){var C=w.value;if(!(C[1]<r)){C[0]<r&&(C[0]=r),C[1]>o&&(C[1]=o);for(var O=!0,j=Math.min(this.maxStep,(C[1]-C[0])/this.minStepCount),P=C[0],T=0;P<C[1];){var k=t.getPositionByEpoch(P).sub_(l.getPositionByEpoch(P)).mag-y;if(k<0){if(O){do{P+=j,P>C[1]&&(P=C[1]),k=t.getPositionByEpoch(P).sub_(l.getPositionByEpoch(P)).mag-y}while(k<0&&P<C[1]);if(k<0)break;continue}for(;Math.abs(k)>this.maxPatchError;)j*=k/(T-k),P+=j,T=k,k=t.getPositionByEpoch(P).sub_(l.getPositionByEpoch(P)).mag-y;i.push({epoch:P,newSoi:l}),g=!0;break}T=k,O=!1,P+=j}if(g)break}}}catch(e){_=!0,E=e}finally{try{!m&&S.return&&S.return()}finally{if(_)throw E}}}}}catch(e){c=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(c)throw u}}if(!i.length)return!1;var B=i[0],x=!0,A=!1,R=void 0;try{for(var I,M=i[Symbol.iterator]();!(x=(I=M.next()).done);x=!0){var F=I.value;F.epoch<B.epoch&&(B=F)}}catch(e){A=!0,R=e}finally{try{!x&&M.return&&M.return()}finally{if(A)throw R}}return B}},{key:"_getPotentialApproachIntervals",value:function(e,t,r,o,n){var i=this._getRadialTaBounds(e,t,n),a=this._getVerticalTaBounds(e,t,r,n),c=void 0;if(a)c=Object(p.h)(a,i);else{if(!0===i)return!0;c=i}if(!1===c)return!1;var u=t.period,s=void 0,f=void 0,l=t.isElliptic?Math.floor((r-t.epoch)/u)*u:0,h=0,y=[];do{var d=!0,v=!1,b=void 0;try{for(var g,m=c[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var _=g.value;s=t.getEpochByTrueAnomaly(_[0])+l,f=t.getEpochByTrueAnomaly(_[1])+l,f<s&&(s-=u),f>h&&(h=f),f<r||y.push([s,f])}}catch(e){v=!0,b=e}finally{try{!d&&m.return&&m.return()}finally{if(v)throw b}}l+=u}while(h<o&&t.isElliptic);return y}},{key:"_getVerticalTaBounds",value:function(e,t,r,o){return f.a.createFromState(t.getStateByEpoch(r).rotate_(e.getOrbitalFrameQuaternion().invert_()),t.mu,r).getPlaneCrossingTrueAnomaly(o)}},{key:"_getRadialTaBounds",value:function(e,t,r){var o=e.getPeriapsisRadius()-r,n=e.getApoapsisRadius()+r,i=t.getSphereCrossingTrueAnomaly(o),a=t.getSphereCrossingTrueAnomaly(n);return e.isHyperbolic?t.isHyperbolic?!i||[[-1/0,i[1]-p.b],[i[0],1/0]]:i?[i]:t.getApoapsisRadius()>=o:t.isHyperbolic?!!a&&(i?[[a[1]-p.b,i[1]-p.b],[i[0],a[0]]]:[[a[1]-p.b,a[0]]]):i?a?[[i[0],a[0]],[a[1],i[1]]]:[i]:a?[[a[1],a[0]]]:t.getPeriapsisRadius()<n&&t.getApoapsisRadius()>o}},{key:"_createExtensionTrajectory",value:function(e,t,r){var o=h.a.starSystem.getReferenceFrame(u.d.buildId(t.id,u.c.INERTIAL_ECLIPTIC)),n=o.stateVectorFromBaseReferenceFrameByEpoch(r,e.getStateByEpoch(r)),i=new s.a(o.id,f.a.createFromState(n,t.physicalModel.mu,r));return i.minEpoch=r,i.maxEpoch=!1,i.isEditable=!1,i.setVisualModel(new l.a(i,{color:e.visualModel.standardColor,minEpoch:null,maxEpoch:null})),i}}]),t}(a.a);t.default=d},56:function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(191),c=r(7),u=r(20),s=r(55),f=r(1),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),p=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"init",value:function(){return f.a.addPropagator("patchedConics",s.default),c.a.addListener(c.a.LOADING_BODIES_DONE,this.fillSoiTree),this}},{key:"fillSoiTree",value:function(){var e=f.a.starSystem;for(var t in e.objects){var r=e.objects[t];if(r instanceof u.a){var o=e.getObject(r.data.patchedConics.parentSoiId);o instanceof u.a&&(r.data.patchedConics.parentSoi=o,o.data.patchedConics.childSois.push(r))}}}}]),t}(a.a);t.default=p}});
//# sourceMappingURL=0.da60f685.chunk.js.map