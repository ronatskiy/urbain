(window.webpackJsonp=window.webpackJsonp||[]).push([[8],[,,function(e,t,n){"use strict";n.d(t,"c",function(){return h}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return m}),n.d(t,"k",function(){return p}),n.d(t,"g",function(){return f}),n.d(t,"m",function(){return v}),n.d(t,"d",function(){return y}),n.d(t,"h",function(){return g}),n.d(t,"j",function(){return E}),n.d(t,"i",function(){return j}),n.d(t,"e",function(){return O}),n.d(t,"f",function(){return _}),n.d(t,"l",function(){return k});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=n(14),l=n(93),u=n(7),h=function(e){function t(e){var n;if(Object(a.a)(this,t),n=Object(r.a)(this,Object(s.a)(t).call(this)),void 0===e&&(e=3),e instanceof Array)for(var i=0;i<e.length;++i)n[i]=e[i];else for(var o=0;o<e;++o)n[o]=0;return Object.setPrototypeOf(Object(c.a)(Object(c.a)(n)),t.prototype),n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"copy",value:function(){return new t(this)}},{key:"set",value:function(e){var t=1===arguments.length?arguments[0]:arguments;null==t.length&&(t=[t]);for(var n=0;n<this.length;++n)this[n]=t[n];return this}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.length;++n)t+=this[n]*e[n];return t}},{key:"cross",value:function(e){return new t([this[1]*e[2]-this[2]*e[1],this[2]*e[0]-this[0]*e[2],this[0]*e[1]-this[1]*e[0]])}},{key:"angle",value:function(e){var t=this.dot(e)/this.mag/e.mag;return t<=-1?Math.PI:t>=1?0:Math.acos(t)}},{key:"add_",value:function(e){for(var t=0;t<this.length;++t)this[t]+=e[t];return this}},{key:"sub_",value:function(e){for(var t=0;t<this.length;++t)this[t]-=e[t];return this}},{key:"mul_",value:function(e){for(var t=0;t<this.length;++t)this[t]*=e;return this}},{key:"div_",value:function(e){for(var t=0;t<this.length;++t)this[t]/=e;return this}},{key:"rotate_",value:function(e,t){return new d(e,t).rotate_(this)}},{key:"unit_",value:function(){return this.div_(this.mag)}},{key:"projectOn_",value:function(e){var t=e.unit();return this.set(t.mul_(this.dot(t))),this}},{key:"add",value:function(e){return this.copy().add_(e)}},{key:"sub",value:function(e){return this.copy().sub_(e)}},{key:"mul",value:function(e){return this.copy().mul_(e)}},{key:"div",value:function(e){return this.copy().div_(e)}},{key:"unit",value:function(){return this.copy().unit_()}},{key:"projectOn",value:function(e){return this.copy().projectOn_(e)}},{key:"projectionOn",value:function(e){return this.dot(e.unit())}},{key:"rotate",value:function(e,t){return this.copy().rotate_(e,t)}},{key:"rotateX",value:function(e){var n=Math.sin(e),a=Math.cos(e);return new t([this[0],this[1]*a-this[2]*n,this[1]*n+this[2]*a])}},{key:"rotateY",value:function(e){var n=Math.sin(e),a=Math.cos(e);return new t([this[0]*a+this[2]*n,this[1],-this[0]*n+this[2]*a])}},{key:"rotateZ",value:function(e){var n=Math.sin(e),a=Math.cos(e);return new t([this[0]*a-this[1]*n,this[0]*n+this[1]*a,this[2]])}},{key:"x",get:function(){return this[0]},set:function(e){this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){this[2]=e}},{key:"quadrance",get:function(){for(var e=0,t=0;t<this.length;++t)e+=this[t]*this[t];return e}},{key:"mag",get:function(){return Math.sqrt(this.quadrance)}}]),t}(Object(l.a)(Array)),d=function(){function e(t,n){Object(a.a)(this,e),this.t=1,this.v=new h(3),t instanceof Array&&this.setAxisAngle(t||[1,0,0],n||0)}return Object(i.a)(e,[{key:"copy",value:function(){var t=new e;return t.t=this.t,t.v=this.v.copy(),t}},{key:"quadrance",value:function(){return this.t*this.t+this.v[0]*this.v[0]+this.v[1]*this.v[1]+this.v[2]*this.v[2]}},{key:"length",value:function(){return Math.sqrt(this.quadrance())}},{key:"invert_",value:function(){var e=this.quadrance();return this.t/=e,this.v.div_(-e),this}},{key:"invert",value:function(){return this.copy().invert_()}},{key:"normalize_",value:function(){var e=this.length();return this.t/=e,this.v.div_(e),this}},{key:"normalize",value:function(){return this.copy().normalize_()}},{key:"rotate_",value:function(e){var t=this.v.cross(e).mul_(2),n=this.v.cross(t);return e[0]+=this.t*t[0]+n[0],e[1]+=this.t*t[1]+n[1],e[2]+=this.t*t[2]+n[2],e}},{key:"rotate",value:function(e){return this.rotate_(e.copy())}},{key:"mul_",value:function(e){var t=this.t,n=this.v[0],a=this.v[1],i=this.v[2],r=e.t,s=e.v[0],o=e.v[1],c=e.v[2];return this.t=t*r-n*s-a*o-i*c,this.v[0]=t*s+n*r+a*c-i*o,this.v[1]=t*o-n*c+a*r+i*s,this.v[2]=t*c+n*o-a*s+i*r,this}},{key:"mul",value:function(e){return this.copy().mul_(e)}},{key:"setAxisAngle",value:function(e,t){return this.t=Math.cos(t/2),this.v.set(e),this.v.mul_(Math.sin(t/2)/this.v.mag),this}},{key:"setFromEuler",value:function(e,t,n,a){var i=Math.cos(e/2),r=Math.cos(t/2),s=Math.cos(n/2),o=Math.sin(e/2),c=Math.sin(t/2),l=Math.sin(n/2);return"XYZ"===(a=a||"ZYX")?(this.v.set([o*r*s+i*c*l,i*c*s-o*r*l,i*r*l+o*c*s]),this.t=i*r*s-o*c*l):"YXZ"===a?(this.v.set([o*r*s+i*c*l,i*c*s-o*r*l,i*r*l-o*c*s]),this.t=i*r*s+o*c*l):"ZXY"===a?(this.v.set([o*r*s-i*c*l,i*c*s+o*r*l,i*r*l+o*c*s]),this.t=i*r*s-o*c*l):"ZYX"===a?(this.v.set([o*r*s-i*c*l,i*c*s+o*r*l,i*r*l-o*c*s]),this.t=i*r*s+o*c*l):"YZX"===a?(this.v.set([o*r*s+i*c*l,i*c*s+o*r*l,i*r*l-o*c*s]),this.t=i*r*s-o*c*l):"XZY"===a?(this.v.set([o*r*s-i*c*l,i*c*s-o*r*l,i*r*l+o*c*s]),this.t=i*r*s+o*c*l):"ZXZ"===a&&(this.v.set([Math.cos((e-n)/2)*c,Math.sin((e-n)/2)*c,Math.sin((e+n)/2)*r]),this.t=Math.cos((e+n)/2)*r),this}},{key:"toThreejs",value:function(){return new u.w(this.v[0],this.v[1],this.v[2],this.t)}}],[{key:"copy",value:function(e){return e.copy()}},{key:"mul",value:function(e,t){return e.copy().mul_(t)}},{key:"transfer",value:function(t,n){var a=t.angle(n);return a?new e(t.cross(n),a):new e}},{key:"twoAxis",value:function(t,n,a){var i,r,s;return t&&n?(i=new h([0,0,1]),r=t.cross(n)):t&&a?(i=new h([0,1,0]),r=a.cross(t)):n&&a&&(i=new h([1,0,0]),r=n.cross(a)),s=e.transfer(i,r),t?e.transfer(s.rotate_(new h([1,0,0])),t).mul_(s):e.transfer(s.rotate_(new h([0,1,0])),n).mul_(s)}},{key:"slerp",value:function(e,t,n){if(0==n)return e.copy();if(1==n)return t.copy();var a=t.copy(),i=e.t*t.t+e.v[0]*t.v[0]+e.v[1]*t.v[1]+e.v[2]*t.v[2];if(i<0&&(a.t=-t.t,a.v[0]=-t.v[0],a.v[1]=-t.v[1],a.v[2]=-t.v[2],i=-i),i>=1)return e.copy();var r=Math.sqrt(1-i*i);if(r<.001)return a.t=(e.t+a.t)/2,a.v[0]=(e.v[0]+a.v[0])/2,a.v[1]=(e.v[1]+a.v[1])/2,a.v[2]=(e.v[2]+a.v[2])/2,a;var s=Math.atan2(r,i),o=Math.sin((1-n)*s)/r,c=Math.sin(n*s)/r;return a.t=e.t*o+a.t*c,a.v[0]=e.v[0]*o+a.v[0]*c,a.v[1]=e.v[1]*o+a.v[1]*c,a.v[2]=e.v[2]*o+a.v[2]*c,a}},{key:"invert",value:function(e){return e.invert()}}]),e}(),m=2*Math.PI;function p(e,t,n,a,i){var r,s=0,o=t;do{var c=e(o),l=e(o+n),u=(l-c)/n;if(null===c||null===l)return null;r=Math.abs(c),o-=c/u,s+=1}while(r>a&&s<i);return r>a?null:o}function f(e){return e/180*Math.PI}function v(e){return 180*e/Math.PI}function y(e,t){var n=Math.acos(e);return t>0?n:m-n}function b(e,t){return!(!e||!t)&&(e[0]<=t[0]&&t[1]<=e[1]?t:t[0]<=e[0]&&e[1]<=t[1]?e:e[0]<=t[0]&&t[0]<=e[1]?[t[0],e[1]]:e[0]<=t[1]&&t[1]<=e[1]&&[e[0],t[1]])}function g(e,t){var n=[];if(!1===e||!1===t)return!1;if(!0===e)return t;if(!0===t)return e;var a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value,l=[c[0],c[1]>c[0]?c[1]:m],u=!(c[1]>c[0])&&[0,c[1]],h=!0,d=!1,p=void 0;try{for(var f,v=t[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var y=f.value,g=[y[0],y[1]>y[0]?y[1]:m],E=!(y[1]>y[0])&&[0,y[1]],j=void 0;(j=b(l,g))&&n.push(j),(j=b(l,E))&&n.push(j),(j=b(u,g))&&n.push(j),(j=b(u,E))&&n.push(j)}}catch(O){d=!0,p=O}finally{try{h||null==v.return||v.return()}finally{if(d)throw p}}}}catch(O){i=!0,r=O}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return!!n.length&&n}function E(e,t){var n=(t[0]+m)%m,a=(t[1]+m)%m;return e=(e+m)%m,n<=a?n<=e&&e<=a:n<=e||e<=a}function j(e,t){var n=[];if(!1===e||!1===t)return!1;if(!0===e)return t;if(!0===t)return e;var a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value,l=c[0],u=c[1],h=!0,d=!1,m=void 0;try{for(var p,f=t[Symbol.iterator]();!(h=(p=f.next()).done);h=!0){var v=p.value,y=v[0],b=v[1];l<=y&&y<u?n.push([y,u<b?u:b]):l<b&&b<=u?n.push([l,b]):l<y&&b<u?n.push([y,b]):y<l&&u<b&&n.push([l,u])}}catch(g){d=!0,m=g}finally{try{h||null==f.return||f.return()}finally{if(d)throw m}}}}catch(g){i=!0,r=g}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return!!n.length&&n}function O(e,t,n){var a=(t=(t%m+m)%m)-(e=(e%m+m)%m);return Math.abs(a)>Math.PI&&(a=a>0?a-m:a+m),(e+a*n+m)%m}function _(e,t,n){return e+(t-e)*n}function k(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(3)+" G":Math.abs(e)>=1e6?(e/1e6).toFixed(3)+" M":Math.abs(e)>=1e3?(e/1e3).toFixed(3)+" K":Math.abs(e)<=1e-9?(e/1e-9).toFixed(3)+" n":Math.abs(e)<=1e-6?(e/1e-6).toFixed(3)+" \xb5":Math.abs(e)<=.001?(e/.001).toFixed(3)+" m":e.toPrecision(6)+" "}},,,,,,function(e,t,n){"use strict";var a,i=n(1),r=n(3),s=n(7),o=n(20),c=n.n(o),l=function(){function e(t){Object(i.a)(this,e),this.domElement=t,this.listeners={},this.handlers={}}return Object(r.a)(e,[{key:"addListener",value:function(e,t,n){var a=this;this.handlers[e]||(this.listeners[e]=[],this.handlers[e]=function(t){return a.handleEvent(e,t)},this.domElement.addEventListener(e,this.handlers[e])),this.listeners[e].push({handler:t,priority:n})}},{key:"removeListener",value:function(e,t){for(var n=this.listeners[e],a=0;a<n.length;a++)if(n[a].handler===t){n.splice(a,1);break}0===n.length&&(this.domElement.removeEventListener(e,this.handlers[e]),delete this.handlers[e],delete this.listeners[e])}},{key:"handleEvent",value:function(e,t){var n=this.listeners[e];if(n)for(var a=n.reduce(function(e,t){return Math.max(e,t.priority)},n[0].priority),i=!0,r=n.length;i&&r>0;){r=0;var s=!0,o=!1,c=void 0;try{for(var l,u=n[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var h=l.value;h.priority===a?!0!==h.handler(t)&&(i=!1):h.priority<a&&r++}}catch(d){o=!0,c=d}finally{try{s||null==u.return||u.return()}finally{if(o)throw c}}a--}}}]),e}(),u=n(2),h=n(10),d=n(9),m=function(){function e(t,n,a){var r=this;Object(i.a)(this,e),this.epoch=t,this.timeScale=n,this.isTimeRunning=a,this.mouseState={x:0,y:0,leftButton:!1,rightButton:!1},this.timeLineCanvasDomElement=document.getElementById("timeLineCanvas"),this.canvasContext=this.timeLineCanvasDomElement.getContext("2d"),this.canvasRect={},this.updateCanvasStyle(),this.initValues(),this.timeLineCanvasDomElement.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),this.timeLineCanvasDomElement.addEventListener("mousewheel",this.onMouseWheel.bind(this)),window.addEventListener("keypress",function(e){" "===e.key&&r.togglePause()}),window.addEventListener("resize",this.updateCanvasStyle.bind(this)),window.oncontextmenu=function(){return!1}}return Object(r.a)(e,[{key:"initValues",value:function(){this.scales={minute:60,fiveMinutes:300,tenMinutes:600,thirtyMinutes:1800,hour:3600,threeHours:10800,sixHours:21600,day:86400,week:604800,month:2592e3,threeMonths:7776e3,year:31557600,fiveYears:157788e3},this.span=86400*this.timeScale*5,this.markDistance=300,this.scaleType="month",this.leftEpoch=this.epoch-this.span/2,this.updateScaleType(),this.getDateByEpoch=e.getDateByEpoch,this.getEpochByDate=e.getEpochByDate,this.roundDateUp=e.roundDateUp,this.nextRenderingDate=e.nextRenderingDate,this.formatDate=e.formatDate,this.formatDateFull=e.formatDateFull}},{key:"setTimeScale",value:function(e){h.a.dispatch(h.a.TIME_SCALE_CHANGED,{old:this.timeScale,new:e}),this.timeScale=e}},{key:"togglePause",value:function(){this.isTimeRunning=!this.isTimeRunning,h.a.dispatch(this.isTimeRunning?h.a.TIME_UNPAUSED:h.a.TIME_PAUSED)}},{key:"tick",value:function(e){this.mouseState.leftButton?this.epoch=this.leftEpoch+(this.mouseState.x-this.canvasRect.left)*this.span/this.timeLineCanvasDomElement.width:this.isTimeRunning&&(this.leftEpoch<this.epoch&&this.epoch<this.leftEpoch+this.span&&(this.leftEpoch+=this.timeScale*e),this.epoch+=this.timeScale*e),h.a.dispatch(h.a.EPOCH_CHANGED,{epoch:this.epoch,date:this.getDateByEpoch(this.epoch)}),this.redraw()}},{key:"forceEpoch",value:function(e){this.leftEpoch+=e-this.epoch,this.epoch=e,this.tick(0)}},{key:"useCurrentTime",value:function(){this.forceEpoch(this.getEpochByDate(new Date))}},{key:"redraw",value:function(){this.canvasContext.fillStyle="#222",this.canvasContext.fillRect(0,0,this.timeLineCanvasDomElement.width,this.timeLineCanvasDomElement.height),this.canvasContext.fillStyle=this.isTimeRunning?"#2846ed":"#393b40",this.drawCurrentTimeMark(),this.canvasContext.strokeStyle="#fdfdfd",this.canvasContext.fillStyle="#fdfdfd",this.canvasContext.font="11px sans-serif";for(var e=this.roundDateUp(this.getDateByEpoch(this.leftEpoch),this.scaleType),t=this.getEpochByDate(e);t<this.leftEpoch+this.span;)this.drawMark(this.getCanvasPositionByEpoch(t),this.formatDate(e,this.scaleType)),e=this.nextRenderingDate(e,this.scaleType),t=this.getEpochByDate(e)}},{key:"getCanvasPositionByEpoch",value:function(e){return(e-this.leftEpoch)*this.timeLineCanvasDomElement.width/this.span}},{key:"updateCanvasStyle",value:function(){this.canvasRect=this.timeLineCanvasDomElement.getBoundingClientRect(),this.timeLineCanvasDomElement.width=this.canvasRect.right-this.canvasRect.left,this.timeLineCanvasDomElement.height=this.canvasRect.bottom-this.canvasRect.top}},{key:"updateScaleType",value:function(){var e=this.markDistance*this.span/this.timeLineCanvasDomElement.width,t=!1;for(var n in this.scales)t?Math.abs(this.scales[t]/e-1)>Math.abs(this.scales[n]/e-1)&&(t=n):t=n;this.scaleType=t}},{key:"drawMark",value:function(e,t){this.canvasContext.beginPath(),this.canvasContext.moveTo(e,0),this.canvasContext.lineTo(e,this.timeLineCanvasDomElement.height/2),this.canvasContext.stroke(),this.canvasContext.fillText(t,e-this.canvasContext.measureText(t).width/2,this.timeLineCanvasDomElement.height-2)}},{key:"drawCurrentTimeMark",value:function(){this.canvasContext.fillRect(0,0,this.getCanvasPositionByEpoch(this.epoch),this.timeLineCanvasDomElement.height)}},{key:"onMouseDown",value:function(e){return 0===e.button?this.mouseState.leftButton=!0:2===e.button&&(this.mouseState.rightButton=!0),!1}},{key:"onMouseUp",value:function(e){return 0===e.button?this.mouseState.leftButton=!1:2===e.button&&(this.mouseState.rightButton=!1),!1}},{key:"onMouseMove",value:function(e){return this.mouseState.rightButton&&(this.leftEpoch+=(this.mouseState.x-e.x)*this.span/this.timeLineCanvasDomElement.width),this.mouseState.x=e.x,this.mouseState.y=e.y,!1}},{key:"getMinScale",value:function(){var e=this;return Object.keys(this.scales).reduce(function(t,n){return e.scales[t]<e.scales[n]?t:n})}},{key:"getMaxScale",value:function(){var e=this;return Object.keys(this.scales).reduce(function(t,n){return e.scales[t]>e.scales[n]?t:n})}},{key:"onMouseWheel",value:function(e){var t=e.deltaY>0?1.3:1/1.3,n=Math.min(Math.max(this.span*t,(this.canvasRect.right-this.canvasRect.left)/this.markDistance*this.scales[this.getMinScale()]),(this.canvasRect.right-this.canvasRect.left)/this.markDistance*this.scales[this.getMaxScale()]);return this.leftEpoch+=(this.mouseState.x-this.canvasRect.left)*(this.span-n)/(this.canvasRect.right-this.canvasRect.left),this.span=n,this.updateScaleType(),!1}}],[{key:"getDateByEpoch",value:function(e){return new Date(1e3*(946728e3+e))}},{key:"getEpochByDate",value:function(e){return e/1e3-946728e3}},{key:"roundDateUp",value:function(e,t){var n=new Date(e);if("minute"===t)n.setSeconds(60,0);else if("fiveMinutes"===t)n.setMinutes(5+n.getMinutes()-n.getMinutes()%5,0,0);else if("tenMinutes"===t)n.setMinutes(10+n.getMinutes()-n.getMinutes()%10,0,0);else if("thirtyMinutes"===t)n.setMinutes(30+n.getMinutes()-n.getMinutes()%30,0,0);else if("hour"===t)n.setMinutes(60,0,0);else if("threeHours"===t)n.setHours(3+n.getHours()-n.getHours()%3,0,0,0);else if("sixHours"===t)n.setHours(6+n.getHours()-n.getHours()%6,0,0,0);else if("day"===t)n.setHours(24,0,0,0);else if("week"===t)n.setHours(0,0,0,0),n.setDate(7+n.getDate()-n.getDay());else if("month"===t)n.setHours(0,0,0,0),n.setDate(1),n.setMonth(n.getMonth()+1);else if("threeMonths"===t)n.setHours(0,0,0,0),n.setDate(1),n.setMonth(3+n.getMonth()-n.getMonth()%3);else if("year"===t)n.setHours(0,0,0,0),n.setMonth(0,1);else{if("fiveYears"!==t)return;n.setHours(0,0,0,0),n.setFullYear(5+n.getFullYear()-n.getFullYear()%5,0,1)}return n}},{key:"nextRenderingDate",value:function(e,t){var n=new Date(e);if("minute"===t)n.setMinutes(n.getMinutes()+1);else if("fiveMinutes"===t)n.setMinutes(n.getMinutes()+5);else if("tenMinutes"===t)n.setMinutes(n.getMinutes()+10);else if("thirtyMinutes"===t)n.setMinutes(n.getMinutes()+30);else if("hour"===t)n.setHours(n.getHours()+1);else if("threeHours"===t)n.setHours(n.getHours()+3);else if("sixHours"===t)n.setHours(n.getHours()+6);else if("day"===t)n.setDate(n.getDate()+1);else if("week"===t)n.setDate(n.getDate()+7);else if("month"===t)n.setMonth(n.getMonth()+1);else if("threeMonths"===t)n.setMonth(n.getMonth()+3);else if("year"===t)n.setFullYear(n.getFullYear()+1,n.getMonth(),n.getDate());else{if("fiveYears"!==t)return;n.setFullYear(n.getFullYear()+5,n.getMonth(),n.getDate())}return n}},{key:"formatDate",value:function(e,t){if("minute"===t||"fiveMinutes"===t||"tenMinutes"===t||"thirtyMinutes"===t||"hour"===t||"threeHours"===t||"sixHours"===t){var n=e.getYear()+1900;return n+="-"+(e.getMonth()+1+"").padStart(2,"0"),n+="-"+(e.getDate()+"").padStart(2,"0"),n+=" "+(e.getHours()+"").padStart(2,"0"),n+=":"+(e.getMinutes()+"").padStart(2,"0")}if("day"===t||"week"===t){var a=e.getYear()+1900;return a+="-"+(e.getMonth()+1+"").padStart(2,"0"),a+="-"+(e.getDate()+"").padStart(2,"0")}if("month"===t||"threeMonths"===t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+(e.getYear()+1900)}return"year"===t||"fiveYears"===t?e.getYear()+1900+"":e.toString()}},{key:"formatDateFull",value:function(e){var t=e.getYear()+1900;return t+="-"+(e.getMonth()+1+"").padStart(2,"0"),t+="-"+(e.getDate()+"").padStart(2,"0"),t+=" "+(e.getHours()+"").padStart(2,"0"),t+=":"+(e.getMinutes()+"").padStart(2,"0"),t+=":"+(e.getSeconds()+"").padStart(2,"0")}}]),e}(),p=n(84),f=function(){function e(t,n,a){Object(i.a)(this,e),this.raycaster=new s.y,this.mouse=new s.E,this.camera=n,this.domElement=t,this.setPixelPrecision(a),this.updatePixelAngleSize(),this.domElement.addEventListener("mousemove",this.onMouseMove.bind(this)),this.domElement.addEventListener("resize",this.updatePixelAngleSize.bind(this))}return Object(r.a)(e,[{key:"onMouseMove",value:function(e){this.mouse.x=e.clientX/this.domElement.width*2-1,this.mouse.y=-e.clientY/this.domElement.height*2+1}},{key:"setPixelPrecision",value:function(e){this.raycaster.pixelPrecision=e}},{key:"updatePixelAngleSize",value:function(){this.raycaster.pixelAngleSize=Object(u.g)(this.camera.fov)/this.domElement.height}},{key:"getPixelAngleSize",value:function(){return this.raycaster.pixelAngleSize}},{key:"intersectObjects",value:function(e){return this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObjects(e)}},{key:"getPixelDistance",value:function(e){this.raycaster.setFromCamera(this.mouse,this.camera);var t=(new s.F).subVectors(e,ae.camera.lastPosition);return Math.acos(this.raycaster.ray.direction.dot(t)/t.length())/this.raycaster.pixelAngleSize}}]),e}(),v=n(5),y=n(4),b=n(6),g=n(14),E=n(19),j=n(23),O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(v.a)(this,Object(y.a)(t).call(this))).selectableObjects=[],e.selectedObject=null,e.bestIntersection=null,e.selectionMouseButton=0,e.pointSize=5,e.setThreeObj(new s.n(new s.A(1,10,10),new s.o({color:16776960}))),j.c.addEventListener("mousedown",e.onMouseDown.bind(Object(g.a)(Object(g.a)(e))),1),e.mouseMoveListener=e.onMouseMove.bind(Object(g.a)(Object(g.a)(e))),e.mouseUpListener=e.onMouseUp.bind(Object(g.a)(Object(g.a)(e))),e}return Object(b.a)(t,e),Object(r.a)(t,[{key:"addSelectableObject",value:function(e){this.selectableObjects.push(e)}},{key:"removeSelectableObject",value:function(e){for(var t in this.selectableObjects)if(this.selectableObjects[t]===e){delete this.selectableObjects[t];break}this.selectableObjects=this.selectableObjects.filter(function(e){return e})}},{key:"render",value:function(){var e=j.c.raycaster.intersectObjects(this.selectableObjects);if(e.length>0){this.bestIntersection=e[0];for(var t=1;t<e.length;t++)e[t].distance<this.bestIntersection.distance&&(this.bestIntersection=e[t]);this.threeObj.visible=!0,this.threeObj.position.copy(this.bestIntersection.point);var n=this.pointSize*this.bestIntersection.point.length()*j.c.raycaster.getPixelAngleSize();this.threeObj.scale.x=n,this.threeObj.scale.y=n,this.threeObj.scale.z=n}else this.threeObj.visible=!1,this.bestIntersection=null}},{key:"onMouseDown",value:function(e){e.button===this.selectionMouseButton&&(document.addEventListener("mousemove",this.mouseMoveListener),document.addEventListener("mouseup",this.mouseUpListener),this.hasMouseMoved=!1,this.mouseClickStart=[e.clientX,e.clientY])}},{key:"onMouseMove",value:function(e){this.mouseClickStart[0]===e.clientX&&this.mouseClickStart[1]===e.clientY||(this.hasMouseMoved=!0)}},{key:"onMouseUp",value:function(e){var t=this.selectedObject;if(e.button===this.selectionMouseButton&&(document.removeEventListener("mousemove",this.mouseMoveListener),document.removeEventListener("mouseup",this.mouseUpListener),!this.hasMouseMoved))if(this.bestIntersection){var n=this.bestIntersection.object.userData.selectionObject;n instanceof Function&&(n=n()),n&&n!==t?(this.deselect(),this.select(n)):n&&this.bestIntersection.object.userData.onClick&&this.bestIntersection.object.userData.onClick(this.bestIntersection)}else this.deselect()}},{key:"forceSelection",value:function(e){this.deselect(),this.select(e)}},{key:"getSelectedObject",value:function(){return this.selectedObject}},{key:"select",value:function(e){this.selectedObject=e,this.selectedObject.select(),j.a.dispatch(j.a.SELECT,{object:this.selectedObject})}},{key:"deselect",value:function(){this.selectedObject&&(j.a.dispatch(j.a.DESELECT,{object:this.selectedObject}),this.selectedObject.deselect(),this.selectedObject=null)}}]),t}(E.a),_=function(){function e(t,n){var a=this;Object(i.a)(this,e),this.jqDom=c()(t),this.name=this.jqDom.data("panelName"),this.jqCollapseButton=this.jqDom.find(".collapseButton[data-panel-name='"+this.name+"']"),this.jqCollapseButton.click(function(){return a.toggleCollapse()}),this.isCollapsed=!!n,this.isCollapsed?this.collapse():this.expand()}return Object(r.a)(e,[{key:"show",value:function(){this.jqDom.show()}},{key:"hide",value:function(){this.jqDom.hide()}},{key:"toggleCollapse",value:function(){this.isCollapsed?this.expand():this.collapse()}},{key:"collapse",value:function(){this.jqCollapseButton.html("Show"),this.isCollapsed=!0,this.jqDom.find(".panelContent[data-panel-name='"+this.name+"']").hide()}},{key:"expand",value:function(){this.jqCollapseButton.html("Hide"),this.isCollapsed=!1,this.jqDom.find(".panelContent[data-panel-name='"+this.name+"']").show()}}]),e}(),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(v.a)(this,Object(y.a)(t).call(this,e))).maxTimeScale=15552e3,n.jqSlider=n.jqDom.find("#timeScaleSlider"),n.jqSlider.on("input change",function(){return ae.time.setTimeScale(n.getCurrentTimeScale())}),n.jqSlider.val(n.getNeededSliderValue(ae.time.timeScale)),n.jqScaleText=n.jqDom.find("#timeScaleValue"),n.jqScaleText.html(n.formatTimeScale(ae.time.timeScale)),document.addEventListener(h.a.TIME_SCALE_CHANGED,function(e){n.jqSlider.val(n.getNeededSliderValue(e.detail.new)),n.jqScaleText.html(n.formatTimeScale(e.detail.new))}),n.jqDateText=n.jqDom.find("#currentDateValue"),document.addEventListener(h.a.EPOCH_CHANGED,function(e){return n.updateTime(e.detail.date)}),n.jqDom.find("#setRealTimeScale").click(function(){return ae.time.setTimeScale(1)}),n.jqDom.find("#useCurrentTime").click(function(){return ae.time.useCurrentTime()}),n}return Object(b.a)(t,e),Object(r.a)(t,[{key:"updateTime",value:function(e){this.jqDateText.html(ae.time.formatDateFull(e))}},{key:"getCurrentTimeScale",value:function(){var e=this.jqSlider.val();return Math.sign(e)*e*e*e*e*this.maxTimeScale}},{key:"getNeededSliderValue",value:function(e){var t=Math.sqrt(Math.sqrt(Math.abs(e)/this.maxTimeScale));return Math.sign(e)*Math.min(1,t)}},{key:"formatTimeScale",value:function(e){var t=e<0?"-":"",n=Math.abs(e);return 0===n?"0":n<60?t+n.toPrecision(2)+" s/s":n<3600?t+(n/60).toPrecision(2)+" min/s":n<86400?t+(n/3600).toPrecision(2)+" h/s":n<2592e3?t+(n/86400).toPrecision(2)+" days/s":n<31557600?t+(n/2592e3).toPrecision(2)+" months/s":t+(n/31557600).toPrecision(2)+" years/s"}}]),t}(_),w=n(34),M=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).camera=n,a.jqTarget=a.jqDom.find("#targetSelect"),a.jqTarget.on("change",function(){return a.camera.changeOrigin(0|a.jqTarget.val())}),a.jqFrameType=a.jqDom.find("#rfTypeSelect"),a.jqFrameType.on("change",function(){return a.camera.changeReferenceFrameType(0|a.jqFrameType.val())}),h.a.addListener(h.a.STAR_SYSTEM_LOADED,function(e){a.starSystem=e.detail.starSystem,a.jqTarget.html(""),a.updateTargetList(),a.updateTarget(a.camera.orbitingPoint),a.updateFrameTypeList(),a.updateFrameType(a.camera.frameType)}),h.a.addListener(h.a.CAMERA_RF_CHANGED,function(e){a.updateTarget(e.detail.new.originId),a.updateFrameTypeList(),a.updateFrameType(e.detail.new.type)}),h.a.addListener(h.a.OBJECT_ADDED,function(){a.updateTargetList()}),a}return Object(b.a)(t,e),Object(r.a)(t,[{key:"updateTargetList",value:function(){var e=this;this.starSystem&&c.a.each(this.starSystem.getObjectNames(),function(t,n){0===e.jqTarget.find("option[value='"+t+"']").length&&e.jqTarget.append(c()("<option>",{value:t}).text(n))})}},{key:"updateFrameTypeList",value:function(){var e=this,n=0|this.jqFrameType.val();this.jqFrameType.html(""),c.a.each(this.camera.getAvailableFrameTypes(),function(a,i){e.jqFrameType.append(c()("<option>",{value:i,selected:i==n}).text(t.frameTypeNames[i]))})}},{key:"updateTarget",value:function(e){this.jqTarget.val(e)}},{key:"updateFrameType",value:function(e){this.jqFrameType.val(e)}}]),t}(_);M.frameTypeNames=(a={},Object(w.a)(a,d.c.INERTIAL_ECLIPTIC,"Ecliptic"),Object(w.a)(a,d.c.INERTIAL_BODY_EQUATORIAL,"Equatorial"),Object(w.a)(a,d.c.INERTIAL_BODY_FIXED,"Body fixed"),Object(w.a)(a,d.c.INERTIAL_PARENT_BODY_EQUATORIAL,"Parent equatorial"),a);var S=n(37),T=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e,!0))).vectorOfEpoch=n,a.jqMag=a.jqDom.find(".vec-magnitude"),a.jqX=a.jqDom.find(".vec-x"),a.jqY=a.jqDom.find(".vec-y"),a.jqZ=a.jqDom.find(".vec-z"),a}return Object(b.a)(t,e),Object(r.a)(t,[{key:"set",value:function(e,t){this.vectorOfEpoch=e,this.update(t)}},{key:"update",value:function(e){var t=this.vectorOfEpoch;(e||0===e)&&t instanceof S.a&&(t=t.evaluate(e)),!t instanceof u.c||(this.jqMag.html(Object(u.l)(t.mag)),this.jqX.html(Object(u.l)(t.x)),this.jqY.html(Object(u.l)(t.y)),this.jqZ.html(Object(u.l)(t.z)))}}]),t}(_),P=n(17),A=function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(v.a)(this,Object(y.a)(t).call(this,e))).selection=n,a.precision=5,a.renderListener=a.render.bind(Object(g.a)(Object(g.a)(a))),document.addEventListener(h.a.SELECT,a.handleSelect.bind(Object(g.a)(Object(g.a)(a)))),document.addEventListener(h.a.DESELECT,a.handleDeselect.bind(Object(g.a)(Object(g.a)(a)))),a.jqDom.find("#unloadObject").on("click",function(){var e=n.getSelectedObject();n.deselect(),ae.starSystem.deleteObject(e.id)}),a.jqDom.find("#showAnglesOfSelectedOrbit").on("change",function(){ae.settings.ui.showAnglesOfSelectedOrbit=this.checked,h.a.dispatch(h.a.SHOW_ORBIT_ANGLES_CHANGED,{value:this.checked})}),a.positionPanel=new T(a.jqDom.find(".js-metrics-panel-cartesian-position-vector"),null),a.velocityPanel=new T(a.jqDom.find(".js-metrics-panel-cartesian-velocity-vector"),null),a.hide(),a}return Object(b.a)(t,e),Object(r.a)(t,[{key:"render",value:function(e){var t=this.selection.getSelectedObject().trajectory,n=null;if(t)try{var a=t.getReferenceFrameByEpoch(e.detail.epoch);a&&(n=ae.starSystem.getObject(a.originId),this.jqDom.find("#relativeTo").html(n.name)),this.updateMain(t,e.detail.epoch,n),this.updateCartesian(t,e.detail.epoch),this.updateKeplerian(t,e.detail.epoch)}catch(i){}}},{key:"updateMain",value:function(e,t,n){var a=e.getKeplerianObjectByEpoch(t),i=a.sma,r=i*(1-a.ecc),s=i*(1+a.ecc),o=n.physicalModel?n.physicalModel.radius:0,c=e.getStateInOwnFrameByEpoch(t);this.jqDom.find("#elements-orbit-alt").html((r-o).toPrecision(this.precision)+" x "+(s-o).toPrecision(this.precision)),this.jqDom.find("#elements-orbit-avg").html(""+(i-o).toPrecision(this.precision)),this.jqDom.find("#elements-alt").html(""+(c.position.mag-o).toPrecision(this.precision)),this.jqDom.find("#elements-speed").html(""+(1e3*c.velocity.mag).toPrecision(this.precision)),n.physicalModel&&n.physicalModel.j2&&n.physicalModel.j2&&this.jqDom.find("#elements-precession").html(""+Object(u.m)(86400*a.getNodalPrecessionRate(n.physicalModel.eqRadius,n.physicalModel.j2)).toPrecision(this.precision))}},{key:"updateCartesian",value:function(e,t){var n=e.getStateInOwnFrameByEpoch(t);this.positionPanel.set(n.position),this.velocityPanel.set(n.velocity)}},{key:"updateKeplerian",value:function(e,t){var n=e.getKeplerianObjectByEpoch(t);this.jqDom.find("#elements-ecc").html(""+n.ecc.toPrecision(this.precision)),this.jqDom.find("#elements-sma").html(""+Object(u.l)(n.sma)),this.jqDom.find("#elements-inc").html(""+Object(u.m)(n.inc).toPrecision(this.precision)),this.jqDom.find("#elements-aop").html(""+Object(u.m)(n.aop).toPrecision(this.precision)),this.jqDom.find("#elements-raan").html(""+Object(u.m)(n.raan).toPrecision(this.precision)),this.jqDom.find("#elements-ta").html(""+Object(u.m)(n.getTrueAnomalyByEpoch(t)).toPrecision(this.precision)),this.jqDom.find("#elements-period").html(""+(n.period/86400).toPrecision(this.precision))}},{key:"handleSelect",value:function(){this.show();var e=this.selection.getSelectedObject();e?c()("#metricsOf").html(e.name):c()("#relativeTo,#metricsOf").html(""),e.type===P.a.TYPE_SPACECRAFT||e.type===P.a.TYPE_UNKNOWN?this.jqDom.find("#unloadObject").show():this.jqDom.find("#unloadObject").hide(),document.addEventListener(h.a.RENDER,this.renderListener)}},{key:"handleDeselect",value:function(){this.hide(),document.removeEventListener(h.a.RENDER,this.renderListener)}}]),t}(_),C=n(12),x=n(24),D=n(25),B=n(18),N=n(43),I=n(28),F=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"getPlotData",value:function(e,t,n,a,i,r,s){for(var o=(a-n)/(s-1),c=(r-i)/(s-1),l=[],u=n,h=0;u<=a;){var d=i,m=0;for(l[h]=[];d<=r;){var p=this.calcDeltaV(e.getStateByEpoch(u),t.getStateByEpoch(u+d),u,d,e.mu);l[h][m]=p,d+=c,m++}u+=o,h++}return l}},{key:"plot",value:function(e){var t=1e99,n=0,a=document.getElementById("lambertCanvas").getContext("2d");a.clearRect(0,0,300,300);var i=!0,r=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var l=o.value,u=!0,h=!1,d=void 0;try{for(var m,p=l[Symbol.iterator]();!(u=(m=p.next()).done);u=!0){var f=m.value;!1!==f&&(f<t&&(t=f),f>n&&(n=f))}}catch(E){h=!0,d=E}finally{try{u||null==p.return||p.return()}finally{if(h)throw d}}}}catch(E){r=!0,s=E}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}for(var v in e)for(var y in e[v]){var b=e[v][y];if(!1===b)a.fillStyle="rgba(255,0,0,1)";else{var g=Math.round(255*(1-(b-t)/(n-t)));a.fillStyle="rgba("+g+","+g+","+g+", 1)"}a.fillRect(0|v,0|y,1,1)}}},{key:"getDeltaV",value:function(e,t,n,a,i){return e.velocity.sub_(n.getStateByEpoch(a)._velocity).mag+t.velocity.sub_(n.getStateByEpoch(i)._velocity).mag}},{key:"calcDeltaV",value:function(e,t,n,a,i){var r=this.solve(e,t,n,a,i);return!!r&&this.getDeltaV(e,t,r,n,n+a)}},{key:"findBestTransfer",value:function(e,t,n,a,i,r,s){for(var o,c=this,l=1e-6*(s-r),h=(s-r)/49,d=1e100,m=r;m<=s;m+=h){var p=this.solveFullTransfer(e,t,n,a,i,m);if(null!==p){var f=p.totalDeltaV;f<d&&(o=m,d=f)}}return null===(o=Object(u.k)(function(o){if(o<r)return null;if(o>s)return null;var u=c.solveFullTransfer(e,t,n,a,i,o-l/2),h=c.solveFullTransfer(e,t,n,a,i,o+l/2);return null===u||null===h?null:(h.totalDeltaV-u.totalDeltaV)/l},o,.001*h,1e-6,10))?{totalDeltaV:null}:this.solveFullTransfer(e,t,n,a,i,o)}},{key:"solveFullTransfer",value:function(e,t,n,a,i,r){if(r<=0)return null;var s=ae.getModule("PatchedConics").getCommonParent(e.id,t.id);if(!(s instanceof D.a))return null;var o,c,l,h,m,p,f=d.d.buildId(s.id,s.type===P.a.TYPE_STAR?d.c.INERTIAL_ECLIPTIC:d.c.INERTIAL_BODY_EQUATORIAL),v=ae.starSystem.getReferenceFrame(f),y=s.physicalModel.mu,b=e instanceof D.a,g=t instanceof D.a;b&&(l=ae.starSystem.getReferenceFrame(d.d.buildId(e.id,d.c.INERTIAL_BODY_EQUATORIAL)),m=e.data.patchedConics.soiRadius),g&&(p=t.data.patchedConics.soiRadius,h=ae.starSystem.getReferenceFrame(d.d.buildId(t.id,d.c.INERTIAL_BODY_EQUATORIAL)));for(var E,j,O,_,k,w=0,M=0,S=new u.c(3),T=new u.c(3),A=0;;){if(_=i+w,k=i+r-M,o=e.trajectory.getStateByEpoch(_,v),b&&(o._position=l.transformPositionByEpoch(_,S,v)),c=t.trajectory.getStateByEpoch(k,v),g&&(c._position=h.transformPositionByEpoch(k,T,v)),null===(O=this.solve(o,c,_,k-_,y)))return null;A++;var C=[new u.c(3),0],F=[new u.c(3),0];if(b){E=O.getStateByEpoch(_)._velocity.sub_(o._velocity);var L=o._position.cross(E);w=(C=this.getSoiEdgePositionAndTime(v.rotateVectorByEpoch(_,E,l),v.rotateVectorByEpoch(_,L,l),n,m,e.physicalModel.mu,1))[1]}if(g){j=O.getStateByEpoch(k)._velocity.sub_(c._velocity);var R=c._position.cross(j);M=(F=this.getSoiEdgePositionAndTime(v.rotateVectorByEpoch(k,j,h),v.rotateVectorByEpoch(k,R,h),a,p,t.physicalModel.mu,-1))[1]}if(A>10||(!b||S.sub(C[0]).mag<10)&&(!g||T.sub(F[0]).mag<10)){S=C[0],T=F[0];break}S=C[0],T=F[0]}var q=0,V=0,U=new N.a,z=new I.a(f,O);if(z.minEpoch=i+w,z.maxEpoch=i+r-M,U.addComponent(z),b){var Y=x.a.createFromState(new B.a(S,v.rotateVectorByEpoch(_,E,l)),e.physicalModel.mu,i+w);q=Y.getPeriapsisSpeed()-Math.sqrt(e.physicalModel.mu/Y.getPeriapsisRadius());var H=new I.a(l.id,Y);H.minEpoch=i,H.maxEpoch=i+w,U.addComponent(H)}else q=o.velocity.sub(O.getStateByEpoch(i)._velocity).mag;if(g){var K=x.a.createFromState(new B.a(T,v.rotateVectorByEpoch(k,j,h)),t.physicalModel.mu,i+r-M);V=K.getPeriapsisSpeed()-Math.sqrt(t.physicalModel.mu/K.getPeriapsisRadius());var Q=new I.a(h.id,K);Q.minEpoch=i+r-M,Q.maxEpoch=i+r,U.addComponent(Q)}else V=c.velocity.sub(O.getStateByEpoch(i+r)._velocity).mag;return{trajectory:U,ejectionDeltaV:q,insertionDeltaV:V,totalDeltaV:q+V}}},{key:"getSoiEdgePositionAndTime",value:function(e,t,n,a,i,r){var s=1/(2/a-e.quadrance/i),o=1-n/s,c=r*Math.acos((s*(1-o*o)/a-1)/o),l=Math.atan(o*Math.sin(c)/(s*(1-o*o)/a)),h=new u.a(t,l-Math.PI/2).rotate_(e.unit().mul_(a)),d=this.getEccentricAnomalyByTrueAnomaly(c,o),m=o>1?(o*Math.sinh(d)-d)/Math.sqrt(i/s/s/Math.abs(s)):(d-o*Math.sin(d))/Math.sqrt(i/s/s/s);return[h,Math.abs(m)]}},{key:"solve",value:function(e,t,n,a,i){var r=this,s=e.position,o=t.position,c=s.cross(o),l=s.mag,h=o.mag,d=s.angle(o);c.angle(e._position.cross(e._velocity))>Math.PI/2&&(d=2*Math.PI-d,c.mul_(-1));var m,p,f,v=Math.sign(Math.sin(d)),y=c.angle(new u.c([0,0,1])),b=new u.c([0,0,1]).cross(c),g=b.angle(new u.c([1,0,0]));new u.c([1,0,0]).cross(b).angle(new u.c([0,0,1]))>Math.PI/2&&(g=2*Math.PI-g);var E=Math.sqrt(l*l+h*h-2*s.dot(o))/2,j=(Math.pow(l+h+2*E,1.5)-v*Math.pow(l+h-2*E,1.5))/(6*Math.sqrt(i));if(a>j){var O=(h-l)/2,_=E/O,k=Math.sqrt(E*E-O*O),w=Object(u.k)(function(e){return r.getTimeByY(e,O,k,_,l,h,E,d,i)-a},1e4,1,1,30);if(null===w)return null;var M=-(h+l)/2/_,S=k*Math.sqrt(M*M/O/O-1),T=O*Math.sqrt(1+w*w/k/k),P=Math.sqrt((M-T)*(M-T)+(S-w)*(S-w)),A=(M-T)/P,C=(S-w)/P;f=Object(u.d)(-((M+E)*A+S*C)/l,v*((M+E)*C-S*A)),m=P/2/(p=_*(T-M)/2)}else{if(null===(p=Object(u.k)(function(e){var t=Math.acosh(1+(l+h+2*E)/2/Math.abs(e)),n=Math.acosh(1+(l+h-2*E)/2/Math.abs(e));return Math.sqrt(Math.abs(Math.pow(e,3))/i)*(Math.sinh(t)-t-v*(Math.sinh(n)-n))-a},l,10,1,30)))return null;p>0&&(p=-p);var D=s.rotate(b,-y).mul_(-1),B=o.rotate(b,-y).add_(D),N=l-2*p,I=h-2*p,F=-Math.sign(B.y)*B.angle(new u.c([1,0,0]));D=D.rotateZ(F);var L=((B=B.rotateZ(F)).x*B.x-I*I+N*N)/2/B.x,R=Math.sqrt(N*N-L*L);(d>Math.PI?D.y<0:D.y>0)&&(R=-R);var q=p*(1-(m=-D.sub_(new u.c([L,R,0])).mag/2/p)*m);f=Math.acos((q/l-1)/m);var V=Math.acos((q/h-1)/m);(f>V||V-d<0)&&(f=-f)}var U=new u.a(c,-f).rotate(s),z=b.angle(U);return b.cross(U).angle(c)>Math.PI/2&&(z=2*Math.PI-z),new x.a(m,p,z,y,g,f,n,i,!0)}},{key:"getTimeByY",value:function(e,t,n,a,i,r,s,o,c){var l=(r+i)/2,h=-l/a,d=n*Math.sqrt(h*h/t/t-1),m=t*Math.sqrt(1+e*e/n/n),p=(l+a*m)/2,f=Math.sqrt((h-m)*(h-m)+(d-e)*(d-e)),v=f/2/p,y=(h-m)/f,b=(d-e)/f,g=-((h+s)*y+d*b)/i,E=Math.sign(Math.sin(o))*((h+s)*b-d*y),j=Object(u.d)(g,E),O=Math.sqrt(c/p/p/p),_=this.getEccentricAnomalyByTrueAnomaly(j,v),k=this.getEccentricAnomalyByTrueAnomaly(j+o,v);return j+o>2*Math.PI&&(k+=2*Math.PI),(k-_-v*(Math.sin(k)-Math.sin(_)))/O}},{key:"getEccentricAnomalyByTrueAnomaly",value:function(e,t){if(t<1){var n=Math.cos(e);return Object(u.d)((t+n)/(1+t*n),Math.sin(e))}return 2*Math.atanh(Math.tan(e/2)/Math.sqrt((t+1)/(t-1)))}}]),e}(),L=n(30),R=function(e){function t(e,n){var a;return Object(i.a)(this,t),a=Object(v.a)(this,Object(y.a)(t).call(this)),void 0===n&&(n=d.a),a.referenceFrame=ae.starSystem.getReferenceFrame(n),a.quaternion=u.a.transfer(new u.c([0,1,0]),e),a.setThreeObj(new s.b((new s.F).fromArray([1,0,0]),new s.F,e.mag)),a}return Object(b.a)(t,e),Object(r.a)(t,[{key:"render",value:function(e){this.threeObj.quaternion.copy(this.quaternion.mul(this.referenceFrame.getQuaternionByEpoch(e)).toThreejs()),this.setPosition(this.referenceFrame.getOriginPositionByEpoch(e))}}]),t}(E.a),q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(v.a)(this,Object(y.a)(t).call(this,e,!0))).maxTransferTime=1262304e3,n.jqSlider=n.jqDom.find("#transferTimeSlider"),n.jqSlider.on("input change",function(){return n.changeTransferTime(n.getCurrentTransferTime())}),n.transferTime=n.getCurrentTransferTime(),n.jqTransferTimeText=n.jqDom.find("#transferTimeValue"),n.jqTransferTimeText.html(n.formatTransferTime(n.transferTime)),n.jqDateText=n.jqDom.find("#departureDateValue"),n.jqDom.find("#useCurrentTime").click(function(){return n.useCurrentTime()}),n.jqOrigin=n.jqDom.find("#originSelect"),n.jqOrigin.on("change",function(){return n.changeOrigin(0|n.jqOrigin.val())}),n.jqTarget=n.jqDom.find("#targetSelect"),n.jqTarget.on("change",function(){return n.changeTarget(0|n.jqTarget.val())}),n.useCurrentTime(),n.origin=399,n.jqOrigin.val(n.origin),h.a.addListener(h.a.STAR_SYSTEM_LOADED,function(){n.jqOrigin.html(""),n.jqTarget.html("");var e=n.buildListData();e&&(n.updateList(n.jqTarget,e),n.updateList(n.jqOrigin,e))}),n}return Object(b.a)(t,e),Object(r.a)(t,[{key:"solve",value:function(){if(this.origin&&this.target&&this.origin!==this.target){var e=ae.getModule("PatchedConics").getCommonParent(this.origin,this.target);if(null!==e&&e.id!=this.origin&&e.id!=this.target){var t=d.d.buildId(e.id,d.c.INERTIAL_ECLIPTIC),n=ae.starSystem.getObject(this.origin),a=ae.starSystem.getObject(this.target),i=n.trajectory.getStateByEpoch(this.departureTime,t),r=a.trajectory.getStateByEpoch(this.departureTime+this.transferTime,t),s=F.solveFullTransfer(n,a,n.physicalModel?n.physicalModel.radius+200:0,a.physicalModel?a.physicalModel.radius+200:0,this.departureTime,this.transferTime);if(s){var o=s.trajectory;o.setObject(new P.a(-1,P.a.TYPE_UNKNOWN,n.name+"->"+a.name+" transfer")),this.visualModel&&(this.visualModel.drop(),this.visualModel2&&this.visualModel2.drop(),this.visualModel3&&this.visualModel3.drop(),this.vector1.drop(),this.vector2.drop()),this.visualModel=new L.a(o.components[0],"yellow"),o.components[1]&&(this.visualModel2=new L.a(o.components[1],"red")),o.components[2]&&(this.visualModel3=new L.a(o.components[2],"red")),this.vector1=new R(i.position,t),this.vector2=new R(r.position,t),this.jqDom.find("#deltaVEjection").html(s.ejectionDeltaV.toPrecision(4)),this.jqDom.find("#deltaVInsertion").html(s.insertionDeltaV.toPrecision(4)),this.jqDom.find("#deltaVTotal").html((s.ejectionDeltaV+s.insertionDeltaV).toPrecision(4))}}}}},{key:"collapse",value:function(){this.visualModel&&(this.visualModel.drop(),this.visualModel2.drop(),this.visualModel3.drop(),this.vector1.drop(),this.vector2.drop(),this.visualModel=null),Object(C.a)(Object(y.a)(t.prototype),"collapse",this).call(this)}},{key:"useCurrentTime",value:function(){this.departureTime=ae.currentEpoch,this.updateTime(ae.currentDate),this.solve()}},{key:"changeOrigin",value:function(e){this.origin=e,this.updateSliderScale(),this.solve()}},{key:"changeTarget",value:function(e){this.target=e,this.updateSliderScale(),this.solve()}},{key:"updateSliderScale",value:function(){if(this.origin&&this.target&&this.origin!==this.target){var e=ae.getModule("PatchedConics").getRelativePeriod(this.origin,this.target,this.departureTime);null!==e&&(this.maxTransferTime=Math.max(e.period1,e.period2),this.jqSlider.val(this.getNeededSliderValue((e.period1+e.period2)/4)),this.changeTransferTime(this.getCurrentTransferTime()))}}},{key:"changeTransferTime",value:function(e){this.transferTime=e,this.jqTransferTimeText.html(this.formatTransferTime(this.transferTime)),this.solve()}},{key:"getCurrentTransferTime",value:function(){var e=this.jqSlider.val();return e*e*e*e*this.maxTransferTime}},{key:"getNeededSliderValue",value:function(e){var t=Math.sqrt(Math.sqrt(e/this.maxTransferTime));return Math.max(0,Math.min(1,t))}},{key:"buildListData",value:function(){var e=ae.getModule("PatchedConics").getRootSoi();return e?this.buildSoiTreeData(e,0):null}},{key:"buildSoiTreeData",value:function(e,t){var n=[{id:e.id,level:t,name:e.name}],a=!0,i=!1,r=void 0;try{for(var s,o=e.data.patchedConics.childSois[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value;n=n.concat(this.buildSoiTreeData(c,t+1))}}catch(l){i=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return n}},{key:"updateList",value:function(e,t){var n=!0,a=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;e.append(c()("<option>",{value:o.id}).html("&nbsp;&nbsp;&nbsp;".repeat(o.level)+o.name))}}catch(l){a=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}},{key:"updateTime",value:function(e){this.jqDateText.html(ae.time.formatDateFull(e))}},{key:"formatTransferTime",value:function(e){var t=e<0?"-":"",n=Math.abs(e);return 0===n?"0":n<60?t+n.toPrecision(3)+" s":n<3600?t+(n/60).toPrecision(3)+" min":n<86400?t+(n/3600).toPrecision(3)+" h":n<2592e3?t+(n/86400).toPrecision(3)+" days":n<31557600?t+(n/2592e3).toPrecision(3)+" months":t+(n/31557600).toPrecision(3)+" years"}}]),t}(_),V=n(39),U=function(e){function t(){return Object(i.a)(this,t),Object(v.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(b.a)(t,e),t}(n(47).a);U.NO_THREE_OBJ=!0;var z=n(41),Y=n(42),H=n(36),K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(v.a)(this,Object(y.a)(t).call(this,e))).jqCreate=n.jqDom.find("#createOrbit"),n.jqCreate.click(function(){var e=ae.camera.orbitingPoint,t=ae.starSystem.getObject(e);if(t.physicalModel){var n=2*t.physicalModel.radius,a=-11e6-ae.starSystem.created;ae.starSystem.created+=1;var i=new I.a(d.d.buildId(e,d.c.INERTIAL_BODY_EQUATORIAL),new x.a(.2,n,Math.PI/6,Math.PI/3,Math.PI/6,0,ae.currentEpoch,t.physicalModel.mu));i.setVisualModel(new L.a(i,{color:"yellow"})),i.minEpoch=!1,i.maxEpoch=!1;var r=ae.getPropagator("patchedConics"),s=new V.a(new r);s.setVisualModel(new U(s,{color:"yellow"})),s.addComponent(i);var o=new P.a(a,P.a.TYPE_UNKNOWN,"Created #"+ae.starSystem.created);o.setTrajectory(s),ae.starSystem.addObject(a,o),ae.selection.forceSelection(o),s.propagate(i.epoch)}}),n.jqImport=n.jqDom.find("#importOrbit"),n.jqImport.click(function(){var e=JSON.parse(n.jqDom.find("#dump").val());if(e)if(e.components&&e.visualModel){var t=ae.getPropagator("patchedConics"),a=new V.a(new t);a.setVisualModel(new U(a,e.visualModel));var i=!1,r=!0,s=!1,o=void 0;try{for(var c,l=e.components[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var h=c.value,d=new I.a(h.referenceFrame,new x.a(h.keplerianObject.ecc,h.keplerianObject.sma,h.keplerianObject.aop,h.keplerianObject.inc,h.keplerianObject.loan,h.keplerianObject.m0,h.keplerianObject.epoch,h.keplerianObject.mu,!1));if(d.setVisualModel(new L.a(d,h.visualModel)),d.minEpoch=h.minEpoch,d.maxEpoch=h.maxEpoch,i&&i.referenceFrame.id!==d.referenceFrame.id){var m=ae.starSystem.getObject(i.referenceFrame.originId),p=ae.starSystem.getObject(d.referenceFrame.originId);i.addFlightEvent(new z.default(d.minEpoch,m,p)),d.addFlightEvent(new Y.default(d.minEpoch,m,p))}a.addComponent(d),i=d}}catch(_){s=!0,o=_}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}var f=!0,v=!1,y=void 0;try{for(var b,g=e.events[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){var E=b.value;a.addFlightEvent(new H.a(E.epoch,new u.c([E.x,E.y,E.z])).onUpdate(function(e,t){a.sortFlightEvents(),a.propagate(Math.min(t.epoch,e.epoch))}))}}catch(_){v=!0,y=_}finally{try{f||null==g.return||g.return()}finally{if(v)throw y}}var j=-11e6-ae.starSystem.created;ae.starSystem.created++;var O=new P.a(j,P.a.TYPE_UNKNOWN,"Created #"+ae.starSystem.created);O.setTrajectory(a),ae.starSystem.addObject(j,O),ae.selection.forceSelection(O)}else console.log("No components or visualModel found");else console.log("Bad json")}),n}return Object(b.a)(t,e),t}(_),Q=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(v.a)(this,Object(y.a)(t).call(this,e))).increment=1,document.addEventListener(h.a.SELECT,n.handleSelect.bind(Object(g.a)(Object(g.a)(n)))),document.addEventListener(h.a.DESELECT,n.handleDeselect.bind(Object(g.a)(Object(g.a)(n)))),n.updateHandler=n.handleTrajectoryUpdate.bind(Object(g.a)(Object(g.a)(n))),n.jqDom.find("#incr001").on("click",function(){n.increment=.01}),n.jqDom.find("#incr01").on("click",function(){n.increment=.1}),n.jqDom.find("#incr1").on("click",function(){n.increment=1}),n.jqDom.find("#incr10").on("click",function(){n.increment=10}),n.jqDom.find("#incr100").on("click",function(){n.increment=100}),n.jqDom.find("#incr1000").on("click",function(){n.increment=1e3}),n.jqDom.find("#prev-burn").on("click",function(){return n.setBurnIdx(n.burnIdx-1)}),n.jqDom.find("#next-burn").on("click",function(){return n.setBurnIdx(n.burnIdx+1)}),n.jqDom.find("#period-minus").on("click",function(){n.burn.epoch-=n.getOrbitPeriod(),n.update()}),n.jqDom.find("#period-plus").on("click",function(){n.burn.epoch+=n.getOrbitPeriod(),n.update()}),n.jqDom.find("#epoch-minus").on("click",function(){n.burn.epoch-=n.increment,n.update()}),n.jqDom.find("#epoch-plus").on("click",function(){n.burn.epoch+=n.increment,n.update()});for(var a=["prograde","normal","radial"],r=function(){var e=a[s];n.jqDom.find("#"+e+"-minus").on("click",function(){n.burn[e]-=n.increment/1e3,n.update()}),n.jqDom.find("#"+e+"-plus").on("click",function(){n.burn[e]+=n.increment/1e3,n.update()}),n.jqDom.find("#"+e+"-zero").on("click",function(){n.burn[e]=0,n.update()})},s=0;s<a.length;s++)r();return n.jqDom.find("#remove-burn").on("click",function(){var e=n.trajectory;n.trajectory.removeFlightEvent(n.burn),n.handleDeselect(),n.init(e)}),n.hide(),n}return Object(b.a)(t,e),Object(r.a)(t,[{key:"handleTrajectoryUpdate",value:function(){this.updateBurns(),this.burns.length>0&&this.show();var e=this.burns.indexOf(this.burn);this.setBurnIdx(-1===e?0:e)}},{key:"handleSelect",value:function(e){e.detail.object.trajectory instanceof V.a&&this.init(e.detail.object.trajectory)}},{key:"init",value:function(e){this.trajectory=e,this.trajectory.onUpdate(this.updateHandler),this.updateBurns(),0!==this.burns.length?(this.show(),this.setBurnIdx(0)):this.hide()}},{key:"getOrbitPeriod",value:function(){var e=this.trajectory.getComponentByEpoch(this.burn.epoch,!0);return e?e.getKeplerianObjectByEpoch(this.burn.epoch).period:0}},{key:"updateBurns",value:function(){this.burns=this.trajectory.flightEvents.filter(function(e){return e instanceof H.a})}},{key:"setBurnIdx",value:function(e){e<0||e>=this.burns.length||(this.burn&&this.burn.visualModel.setScale(1),this.burnIdx=e,this.burn=this.burns[this.burnIdx],this.burn.visualModel.setScale(2),this.update(),this.jqDom.find("#burn-name").html("Burn #"+(this.burnIdx+1)))}},{key:"handleDeselect",value:function(){this.trajectory&&(this.trajectory.removeListener(this.updateHandler),delete this.trajectory,delete this.burn,this.hide())}},{key:"update",value:function(){this.jqDom.find("#burn-date").html(ae.time.formatDateFull(ae.time.getDateByEpoch(this.burn.epoch))),this.jqDom.find("#burn-epoch").html(this.burn.epoch.toFixed(2)),this.jqDom.find("#burn-prograde").html((1e3*this.burn.prograde).toFixed(2)),this.jqDom.find("#burn-normal").html((1e3*this.burn.normal).toFixed(2)),this.jqDom.find("#burn-radial").html((1e3*this.burn.radial).toFixed(2)),this.jqDom.find("#burn-total").html((1e3*this.burn.deltaV).toFixed(2))}},{key:"increment",get:function(){return this._increment},set:function(e){this._increment=e,this.jqDom.find("#increment").html(e)}}]),t}(_),W=function(e){function t(e){var n;return Object(i.a)(this,t),n=Object(v.a)(this,Object(y.a)(t).call(this,e)),document.addEventListener(h.a.SELECT,n.handleSelect.bind(Object(g.a)(Object(g.a)(n)))),document.addEventListener(h.a.DESELECT,n.handleDeselect.bind(Object(g.a)(Object(g.a)(n)))),n.jqDump=n.jqDom.find("#dump"),n.jqDump.click(function(){var e=JSON.stringify(n.trajectory.dump());prompt("Copy this text:",e),console.log(e)}),n.hide(),n}return Object(b.a)(t,e),Object(r.a)(t,[{key:"handleSelect",value:function(e){var t=e.detail.object;t.trajectory instanceof V.a&&(this.trajectory=t.trajectory,this.show())}},{key:"handleDeselect",value:function(){delete this.trajectory,this.hide()}}]),t}(_),G=function e(){Object(i.a)(this,e),this.timePanel=new k(c()("#timePanel")),this.cameraPanel=new M(c()("#cameraPanel"),ae.camera),this.metricsPanel=new A(c()("#metricsPanel"),ae.selection),this.creationPanel=new K(c()("#creationPanel")),this.lambertPanel=new q(c()("#lambertPanel")),this.maneuverPanel=new Q(c()("#maneuverPanel")),this.dynamicTrajectoryPanel=new W(c()("#dynamicTrajectoryPanel"))},X=n(53),Z=function(){function e(t){Object(i.a)(this,e),this.settings={fov:60,animationDuration:200,pixelsToObjectUnderMouse:20},this.domElement=t,this.threeCamera=new s.r(this.settings.fov,t.width/t.height,1,1e15),this.threeCamera.position.fromArray([0,0,0]),this.listenersAdded=!1}return Object(r.a)(e,[{key:"init",value:function(e,t){this.position=t,this.referenceFrame=ae.starSystem.getReferenceFrame(e),this.orbitingPoint=this.referenceFrame.originId,this.frameType=this.referenceFrame.type,this.quaternion=this._getQuaternionByPosition(this.position),this.lastPosition=this.referenceFrame.transformPositionByEpoch(ae.currentEpoch,this.position,d.a),this.currentMousePos=new u.c([0,0]),this.accountedMousePos=new u.c([0,0]),this.isMouseDown=!1,this.isShiftDown=!1,this.rightButtonDown=!1,this.isLookingAside=!1,this.zoomingAside=0,this.isAnimnating=!1,this.listenersAdded||(ae.addEventListener("mousedown",this.onMouseDown.bind(this),1),ae.addEventListener("mousemove",this.onMouseMove.bind(this),1),ae.addEventListener("mouseup",this.onMouseUp.bind(this),1),ae.addEventListener("wheel",this.onMouseWheel.bind(this),1),this.listenersAdded=!0)}},{key:"_getQuaternionByPosition",value:function(e,t){var n=new u.c([0,0,1]),a=new u.c([0,1,0]),i=(new u.a).setAxisAngle(n.cross(e),Math.acos(e.dot(n)/e.mag)),r=i.rotate(a),s=(new u.a).setAxisAngle(e.cross(t||new u.c([0,0,1])),Math.PI/2).rotate(e);return(new u.a).setAxisAngle(r.cross(s),Math.acos(r.dot(s)/s.mag)).mul_(i)}},{key:"getAvailableFrameTypes",value:function(e){if(void 0===e&&(e=this.orbitingPoint),0==e)return[d.c.INERTIAL_ECLIPTIC];var t=ae.starSystem.isBody(e);return null===t?[]:t?[d.c.INERTIAL_ECLIPTIC,d.c.INERTIAL_BODY_EQUATORIAL,d.c.INERTIAL_BODY_FIXED]:[d.c.INERTIAL_ECLIPTIC,d.c.INERTIAL_PARENT_BODY_EQUATORIAL]}},{key:"changeReferenceFrameType",value:function(e){this.changeReferenceFrame(d.d.buildId(this.orbitingPoint,e),!0)}},{key:"changeOrigin",value:function(e){var t=-1!==this.getAvailableFrameTypes(e).indexOf(this.frameType)?this.frameType:d.c.INERTIAL_ECLIPTIC;this.changeReferenceFrame(d.d.buildId(e,t),!0)}},{key:"changeReferenceFrame",value:function(e,t){var n=ae.starSystem.getReferenceFrame(e);this.position=this.referenceFrame.transformPositionByEpoch(ae.currentEpoch,this.position,n),this.isLookingAside=!1,this.zoomingAside=0,this.orbitingPoint=n.originId,this.frameType=n.type,t?this.startAnimation(n):this.quaternion=this._getQuaternionByPosition(this.position),h.a.dispatch(h.a.CAMERA_RF_CHANGED,{old:this.referenceFrame,new:n}),this.referenceFrame=n}},{key:"startAnimation",value:function(e){if(e){var t=this.referenceFrame.getQuaternionByEpoch(ae.currentEpoch).invert_().mul_(e.getQuaternionByEpoch(ae.currentEpoch));this.quaternion=t.invert_().mul_(this.quaternion)}this.animationStartingTime=(new Date).getTime(),this.animationDuration=this.settings.animationDuration,this.animationStartingQuaternion=this.quaternion.copy(),this.isAnimnating=!0}},{key:"animate",value:function(){var e=((new Date).getTime()-this.animationStartingTime)/this.animationDuration,t=this._getQuaternionByPosition(this.position);if(e>=1)return this.quaternion=t,this.isAnimnating=!1,void(this.isLookingAside=!1);this.quaternion=u.a.slerp(this.animationStartingQuaternion,t,e)}},{key:"findObjectUnderMouse",value:function(){var e=0,t=!1,n=!0,a=!1,i=void 0;try{for(var r,s=ae.starSystem.getBodies()[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;if(ae.raycaster.getPixelDistance(o.getPositionByEpoch(ae.currentEpoch,d.a))<this.settings.pixelsToObjectUnderMouse){!1===t&&(t=o.id);var c=o.physicalModel.radius;c&&c>e&&(e=c,t=o.id)}}}catch(l){a=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}},{key:"onMouseWheel",value:function(e){if(e.deltaY){var t=e.shiftKey?1+(ae.settings.ui.camera.zoomFactor-1)/10:ae.settings.ui.camera.zoomFactor,n=e.deltaY<0?1/t:t,a=this.findObjectUnderMouse(),i=this.orbitingPoint;if(a===this.orbitingPoint&&(a=!1),!1!==a?(this.position=this.referenceFrame.transformPositionByEpoch(ae.currentEpoch,this.position,1e5*a+1e3),i=a):this.zoomingAside=0,ae.starSystem.getObject(i).physicalModel&&ae.starSystem.getObject(i).physicalModel.radius){var r=this.position.mag;this.position.mul_((ae.starSystem.getObject(i).physicalModel.radius+(r-ae.starSystem.getObject(i).physicalModel.radius)*n)/r)}else this.position.mul_(n);!1!==a?(this.position=ae.starSystem.getReferenceFrame(1e5*a+1e3).transformPositionByEpoch(ae.currentEpoch,this.position,this.referenceFrame),this.isLookingAside=!0,this.zoomingAside++):this.isLookingAside&&this.startAnimation(),3===this.zoomingAside&&this.changeOrigin(a,!0)}}},{key:"onMouseDown",value:function(e){switch(this.accountedMousePos=new u.c([e.clientX,e.clientY]),this.currentMousePos=this.accountedMousePos.copy(),this.isMouseDown=!0,e.button){case 0:case 1:break;case 2:this.rightButtonDown=!0}}},{key:"onMouseMove",value:function(e){this.isMouseDown&&(this.isShiftDown=!!e.shiftKey,this.currentMousePos.set(e.clientX,e.clientY))}},{key:"onMouseUp",value:function(e){this.isMouseDown=!1,this.rightButtonDown=!1}},{key:"onResize",value:function(){this.threeCamera.aspect=this.domElement.width/this.domElement.height,this.threeCamera.updateProjectionMatrix()}},{key:"getTopDirection",value:function(e){return this.referenceFrame.getQuaternionByEpoch(e).mul_(this.quaternion).rotate_(new u.c([0,1,0]))}},{key:"update",value:function(e){var t=this.referenceFrame.getQuaternionByEpoch(e),n=this.currentMousePos.sub(this.accountedMousePos);if(this.isAnimnating&&this.animate(),n[0]||n[1]){var a=(this.isShiftDown?.1:1)*ae.settings.ui.camera.mouseSensitivity,i=new u.c([0,0,1]),r=this.position.angle(i),s=this.rightButtonDown?this.quaternion.rotate(new u.c([0,0,1])).cross(i):this.position.cross(i),o=new u.a(s,Math.min(Math.max(n[1]*a,r-Math.PI+1e-5),r-1e-5)),c=new u.a(i,-n[0]*a).mul_(o);this.rightButtonDown||c.rotate_(this.position),this.quaternion=c.mul_(this.quaternion),this.accountedMousePos=this.currentMousePos.copy()}this.threeCamera.quaternion.copy(t.mul_(this.quaternion).toThreejs()),this.lastPosition=this.referenceFrame.transformPositionByEpoch(e,this.position,d.a)}}]),e}(),J=function(){function e(t,n,a,r){Object(i.a)(this,e),this.idx=t,this.alias=n,this.label=a,this.moduleName=r}return Object(r.a)(e,[{key:"load",value:function(e){var t=this;ae.isModuleLoaded(this.moduleName)?ae.getModule(this.moduleName).loadStarSystem(this.alias,e):ae.loadModule(this.moduleName,function(n){return n.loadStarSystem(t.alias,e)})}},{key:"value",get:function(){return this.alias}}]),e}(),$=function(){function e(){Object(i.a)(this,e),this._starSystems=[],this._loadedIdx=null,this.add("solar_system","SolarSystem","Solar System"),this.add("ksp","KSP","KSP System")}return Object(r.a)(e,[{key:"add",value:function(e,t,n){var a=this._starSystems.length;this._starSystems.push(new J(a,e,n,t))}},{key:"loadDefault",value:function(e){this.loadByIdx(this.defaultStarSystemIdx,e)}},{key:"loadByIdx",value:function(e,t){if(e!==this._loadedIdx){var n=this._findStarSystemByIdx(e);n&&(n.load(t),this._loadedIdx=e)}}},{key:"getCurrentStarSystem",value:function(){if(null!==this._loadedIdx)return this._starSystems[this._loadedIdx]}},{key:"_findStarSystemByIdx",value:function(e){return this._starSystems[e]}},{key:"starSystems",get:function(){return this._starSystems}},{key:"defaultStarSystemIdx",get:function(){return 0}},{key:"defaultStarSystem",get:function(){return this._starSystems[this.defaultStarSystemIdx]}}]),e}(),ee=n(67),te=n(66),ne=n(64);n.d(t,"a",function(){return ae});var ae=new(function(){function e(){Object(i.a)(this,e),this.modules={},this.propagators={},this.renderLoopActive=!1,this.starSystemManager=new $,this._initSettings()}return Object(r.a)(e,[{key:"init",value:function(e,t){this.renderLoopFunction=t,this.scene=new s.z,this.scene.add(new s.a(16773077,.15)),this.textureLoader=new s.D,this.renderer=new s.H({antialias:!0,logarithmicDepthBuffer:!0}),this.domElement=e,this._setRenderSize(),this.domElement.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize.bind(this)),this.rendererEvents=new l(this.renderer.domElement),this.selection=new O,this.time=new m(0,1,!0),this.camera=new Z(this.renderer.domElement),this.raycaster=new f(this.renderer.domElement,this.camera.threeCamera,7),this.ui=new G,this.starSystemManager.loadDefault(function(){return requestAnimationFrame(t)}),ee.a.preloadTexture(),ne.a.preloadTexture(),te.a.preloadTexture(),h.a.dispatch(h.a.INIT_DONE)}},{key:"loadStarSystem",value:function(e,t){var n=this;return Promise.resolve(c.a.getJSON("./star_systems/"+e,function(e){n.selection.deselect(),n.starSystem&&n.starSystem.unload(),n.starSystem=new X.b(e.id),p.a.loadFromConfig(n.starSystem,e),n.camera.init(d.d.buildId(n.starSystem.mainObject,d.c.INERTIAL_BODY_EQUATORIAL),new u.c([3e4,3e4,2e4])),t&&t(n.starSystem),h.a.dispatch(h.a.STAR_SYSTEM_LOADED,{starSystem:n.starSystem}),n.startRendering()}))}},{key:"startRendering",value:function(){this.renderLoopActive=!0}},{key:"stopRendering",value:function(){this.renderLoopActive=!1}},{key:"forceEpoch",value:function(e){return this.time.forceEpoch(e)}},{key:"_initSettings",value:function(){this.settings={ui:{showBodyLabels:!0,showAnglesOfSelectedOrbit:!0,camera:{mouseSensitivity:.007,zoomFactor:1.5}}}}},{key:"addEventListener",value:function(e,t,n){this.rendererEvents.addListener(e,t,n)}},{key:"removeEventListener",value:function(e,t){this.rendererEvents.removeListener(e,t)}},{key:"onWindowResize",value:function(){this._setRenderSize(),this.camera.onResize()}},{key:"tick",value:function(e){this.time.tick(e),this.camera.update(this.time.epoch),h.a.dispatch(h.a.RENDER,{epoch:this.time.epoch}),this.renderLoopActive&&this.renderer.render(this.scene,this.camera.threeCamera)}},{key:"getVisualCoords",value:function(e){return(new s.F).fromArray(e.sub(this.camera.lastPosition))}},{key:"getSimCoords",value:function(e){return new u.c(e.toArray()).add_(this.camera.lastPosition)}},{key:"loadModule",value:function(e,t){var a=this,i="Module"+e;return n(104)("./"+e+"/"+i).then(function(n){a.modules[e]=new n.default,a.modules[e].init(),t&&t(a.modules[e])})}},{key:"getModule",value:function(e){if(void 0===this.modules[e])throw new Error("Unknown module: "+e);return this.modules[e]}},{key:"isModuleLoaded",value:function(e){return void 0!==this.modules[e]}},{key:"getClass",value:function(e){var t=e.indexOf(".");if(-1===t)throw new Error("Incorrect class alias! Period expected in "+e);return this.getModule(e.substr(0,t)).getClass(e.substr(t+1))}},{key:"addPropagator",value:function(e,t){this.propagators[e]=t}},{key:"getPropagator",value:function(e){return this.propagators[e]}},{key:"_setRenderSize",value:function(){this._footerDomElement||(this._footerDomElement=document.getElementById("app-footer"));var e=this._footerDomElement?this._footerDomElement.clientHeight:0,t=window.innerHeight-e;this.renderer.setSize(this.domElement.clientWidth,t)}},{key:"currentEpoch",get:function(){return this.time.epoch}},{key:"currentDate",get:function(){return this.time.getDateByEpoch(this.time.epoch)}}]),e}())},function(e,t,n){"use strict";var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=n(37),l=n(8),u=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this))).objectId=e,i.referenceFrame=n,i}return Object(o.a)(t,e),Object(i.a)(t,[{key:"evaluate",value:function(e){return l.a.starSystem.getObject(this.objectId).trajectory.getStateByEpoch(e,this.referenceFrame)}}]),t}(c.a),h=n(2),d=n(21),m=n(33),p=n(18),f=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this))).origin=e,i.isInertial=n,i.body=l.a.starSystem.getObject(i.origin),i}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getQuaternionByEpoch",value:function(e){return this.body.orientation.getQuaternionByEpoch(e)}},{key:"getOriginStateByEpoch",value:function(e){return l.a.starSystem.getObject(this.origin).trajectory.getStateByEpoch(e,O)}},{key:"getOriginPositionByEpoch",value:function(e){return this.getOriginStateByEpoch(e).position}},{key:"getRotationVelocityByEpoch",value:function(e){return new h.c([0,0,this.body.orientation.angularVel])}},{key:"stateVectorFromBaseReferenceFrameByEpoch",value:function(e,t){var n=this.getOriginStateByEpoch(e),a=this.getQuaternionByEpoch(e).invert_(),i=a.rotate(t.position.sub_(n.position)),r=a.rotate(t.velocity.sub_(n.velocity));if(!this.isInertial){var s=i.cross(this.getRotationVelocityByEpoch(e));r.add_(s)}return new p.a(i,r)}},{key:"stateVectorToBaseReferenceFrameByEpoch",value:function(e,t){var n,a=this.getOriginStateByEpoch(e),i=this.getQuaternionByEpoch(e),r=i.rotate(t.position).add_(a.position);if(this.isInertial)n=i.rotate(t.velocity).add_(a.velocity);else{var s=t.position.cross(this.getRotationVelocityByEpoch(e));n=i.rotate(t.velocity.sub_(s)).add_(a.velocity)}return new p.a(r,n)}}]),t}(m.a),v=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).setId(O),e}return Object(o.a)(t,e),t}(m.a),y=n(59),b=n(49),g=n(25),E=function(e){function t(e,n,i,o,c){var l;return Object(a.a)(this,t),(l=Object(r.a)(this,Object(s.a)(t).call(this,e,c))).bodyFixedQuaternion=(new h.a).setFromEuler(0,-n,i,"ZYX"),l.bodyFixedPosition=new h.c([l.body.physicalModel.radius+o,0,0]).rotateY(-n).rotateZ(i),l}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getQuaternionByEpoch",value:function(e){return this.body.orientation.getQuaternionByEpoch(e).mul_(this.bodyFixedQuaternion)}},{key:"getRotationVelocityByEpoch",value:function(e){return this.bodyFixedQuaternion.invert().rotate(new h.c([0,0,this.body.orientation.angularVel]))}},{key:"getOriginStateByEpoch",value:function(e){var t=l.a.starSystem.getObject(this.origin).trajectory.getStateByEpoch(e,O),n=this.body.orientation.getQuaternionByEpoch(e),a=this.bodyFixedPosition.cross(new h.c([0,0,this.body.orientation.angularVel])),i=n.rotate(this.bodyFixedPosition).add_(t.position),r=n.rotate_(a.mul_(-1)).add_(t.velocity);return new p.a(i,r)}}]),t}(f);n.d(t,"d",function(){return j}),n.d(t,"a",function(){return O}),n.d(t,"b",function(){return _}),n.d(t,"c",function(){return k});var j=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"create",value:function(e,t,n){var a=null;return t==k.INERTIAL_ECLIPTIC?a=new y.a(new u(n.origin,O),new h.a):t==k.INERTIAL_BODY_EQUATORIAL?a=l.a.starSystem.getObject(n.origin)instanceof g.a?new b.a(new u(n.origin,O),new d.a(function(e){var t=l.a.starSystem.getObject(n.origin).orientation.getQuaternionByEpoch(e).rotate_(new h.c([0,0,1])),a=t.cross(new h.c([0,0,1]));return 0===a.mag?new h.a:h.a.transfer(new h.c([0,0,1]),t).mul_(h.a.transfer(new h.c([1,0,0]),a))})):null:t==k.INERTIAL_PARENT_BODY_EQUATORIAL?a=new b.a(new u(n.origin,O),new d.a(function(e){var t=l.a.starSystem.getObject(n.origin).getParentObjectIdByEpoch(e),a=l.a.starSystem.getObject(t);if(a instanceof g.a){var i=a.orientation.getQuaternionByEpoch(e).rotate_(new h.c([0,0,1])),r=i.cross(new h.c([0,0,1]));return h.a.transfer(new h.c([0,0,1]),i).mul_(h.a.transfer(new h.c([1,0,0]),r))}return new h.a})):t==k.INERTIAL_BODY_FIXED?a=l.a.starSystem.getObject(n.origin)instanceof g.a?new f(n.origin,!0):null:t==k.INERTIAL_TOPOCENTRIC?a=l.a.starSystem.getObject(n.origin)instanceof g.a?new E(n.origin,n.lat,n.lon,n.height,!0):null:t==k.BODY_FIXED?a=l.a.starSystem.getObject(n.origin)instanceof g.a?new f(n.origin,!1):null:t==k.TOPOCENTRIC?a=l.a.starSystem.getObject(n.origin)instanceof g.a?new E(n.origin,n.lat,n.lon,void 0,!1):null:t==k.BASE&&(a=new v),a?a.setId(e):null}},{key:"getOriginIdByReferenceFrameId",value:function(e){return Math.sign(e)*Math.floor(Math.abs(e)/1e5)}},{key:"getTypeByReferenceFrameId",value:function(e){return Math.floor(Math.abs(e)%1e5/1e3)}},{key:"createById",value:function(e){var t=this.getTypeByReferenceFrameId(e);return t===k.INERTIAL_ECLIPTIC||t===k.INERTIAL_BODY_EQUATORIAL||t===k.INERTIAL_BODY_FIXED||t===k.BODY_FIXED||t===k.INERTIAL_PARENT_BODY_EQUATORIAL?this.create(e,t,{origin:this.getOriginIdByReferenceFrameId(e)}):null}},{key:"buildId",value:function(e,t){return t===k.INERTIAL_ECLIPTIC||t===k.INERTIAL_BODY_EQUATORIAL||t===k.INERTIAL_BODY_FIXED||t===k.BODY_FIXED||t===k.INERTIAL_PARENT_BODY_EQUATORIAL?(e?Math.sign(e):1)*(1e5*Math.abs(e)+1e3*t):null}}]),e}(),O=1e3,_=new v,k={BASE:0,INERTIAL_ECLIPTIC:1,INERTIAL_BODY_EQUATORIAL:2,INERTIAL_BODY_FIXED:3,INERTIAL_TOPOCENTRIC:4,BODY_FIXED:6,TOPOCENTRIC:7,INERTIAL_PARENT_BODY_EQUATORIAL:8}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),i=n(3),r=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"dispatch",value:function(e,t){var n;n=t?new CustomEvent(e,{detail:t}):new CustomEvent(e),document.dispatchEvent(n)}},{key:"addListener",value:function(e,t){return document.addEventListener(e,t)}},{key:"removeListener",value:function(e,t){return document.removeEventListener(e,t)}}]),e}();r.LOADING_BODIES_DONE="urb_load_bodies_done",r.LOADING_FRAMES_DONE="urb_load_frames_done",r.LOADING_TRAJECTORIES_DONE="urb_load_traj_done",r.RENDER="urb_render",r.INIT_DONE="urb_init_done",r.STAR_SYSTEM_LOADED="urb_star_system_loading_done",r.SELECT="urb_select",r.DESELECT="urb_deselect",r.SHOW_ORBIT_ANGLES_CHANGED="urb_show_orbit_angles_change",r.CAMERA_RF_CHANGED="urb_camera_rf_change",r.OBJECT_ADDED="urb_object_added",r.TIME_SCALE_CHANGED="urb_time_scale_change",r.TIME_PAUSED="urb_time_paused",r.TIME_UNPAUSED="urb_time_unpaused",r.EPOCH_CHANGED="urb_epoch_change"},,,,,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(11),s=n.n(r);n(154);t.a=function(e){var t=e.id,n=e.className,a=e.children,r=e.small,o=void 0!==r&&r,c=e.disabled,l=void 0!==c&&c,u=e.onClick,h=void 0===u?function(){}:u;return i.a.createElement("button",{id:t,type:"button",className:s()("button",{"button--disabled":l,"button--small":o},n),onClick:h,disabled:l},a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(1),i=n(3),r=n(9),s=function(){function e(t,n,i,r){Object(a.a)(this,e),this.id=t,this.type=n,this.name=i,this.data=r||{}}return Object(i.a)(e,[{key:"setTrajectory",value:function(e){this.trajectory=e,this.trajectory.setObject(this)}},{key:"getParentObjectIdByEpoch",value:function(e){if(!this.trajectory)return null;var t=this.trajectory.getReferenceFrameByEpoch(e);return t?t.originId:null}},{key:"getStateByEpoch",value:function(e,t){return this.trajectory.getStateByEpoch(e,t||r.a)}},{key:"getPositionByEpoch",value:function(e,t){return this.trajectory.getPositionByEpoch(e,t||r.a)}},{key:"select",value:function(){this.trajectory&&this.trajectory.select()}},{key:"deselect",value:function(){this.trajectory&&this.trajectory.deselect()}},{key:"drop",value:function(){this.trajectory&&(this.trajectory.drop(),delete this.trajectory)}}]),e}();s.TYPE_UNKNOWN=0,s.TYPE_STAR=1,s.TYPE_PLANET=2,s.TYPE_PLANETOID=3,s.TYPE_SATELLITE=4,s.TYPE_ASTEROID=5,s.TYPE_COMET=6,s.TYPE_SPACECRAFT=7,s.TYPE_POINT=8},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(1),i=n(3),r=n(2),s=function(){function e(t,n){Object(a.a)(this,e),this._position=t?t.copy():new r.c,this._velocity=n?n.copy():new r.c}return Object(i.a)(e,[{key:"copy",value:function(){return new e(this._position,this._velocity)}},{key:"rotate_",value:function(e){return e.rotate_(this._position),e.rotate_(this._velocity),this}},{key:"rotate",value:function(e){return this.copy().rotate_(e)}},{key:"position",get:function(){return this._position.copy()}},{key:"velocity",get:function(){return this._velocity.copy()}}],[{key:"create",value:function(e,t,n,a,i,s){return new this(new r.c([e||0,t||0,n||0]),new r.c([a||0,i||0,s||0]))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),i=n(3),r=n(10),s=n(8),o=function(){function e(){Object(a.a)(this,e),this.threeObj=null,this.scene=s.a.scene,this._isHidden=!1}return Object(i.a)(e,[{key:"setThreeObj",value:function(e){this.threeObj=e,this.scene.add(this.threeObj),this.renderListener=this._onRender.bind(this),this._isHidden?this.threeObj.visible=!1:document.addEventListener(r.a.RENDER,this.renderListener)}},{key:"setPosition",value:function(e){e?(this.threeObj.visible=!0,this.threeObj.position.copy(s.a.getVisualCoords(e))):this.threeObj.visible=!1}},{key:"_onRender",value:function(e){try{this.render(e.detail.epoch)}catch(t){this.threeObj.visible=!1}}},{key:"hide",value:function(){this._isHidden=!0,this.renderListener&&document.removeEventListener(r.a.RENDER,this.renderListener),this.threeObj&&(this.threeObj.visible=!1)}},{key:"show",value:function(){this._isHidden=!1,this.renderListener&&document.addEventListener(r.a.RENDER,this.renderListener),this.threeObj&&(this.threeObj.visible=!0)}},{key:"render",value:function(e){}},{key:"drop",value:function(){this.threeObj&&(this.scene.remove(this.threeObj),this.threeObj.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}),delete this.threeObj),this.renderListener&&document.removeEventListener(r.a.RENDER,this.renderListener)}},{key:"pixelAngleSize",get:function(){return s.a.raycaster.getPixelAngleSize()}}]),e}();o.texturePath="texture/"},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this))).func=e,n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"evaluate",value:function(e){return this.func(e)}}]),t}(n(37).a)},function(e,t,n){"use strict";var a={SIMULATION:"Simulation",EDIT:"Edit",VIEW:"View",SETTINGS:"Settings",HELP:"Help"},i="https://github.com/tossha/urbain/wiki/%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-Urbain",r=n(0),s=n.n(r),o=n(35),c=n(5),l=n(4),u=n(6),h=n(1),d=n(3),m=n(50);var p={NONE:0,LINK:1,DROPDOWN:2},f=function(){function e(t){var n=t.label,a=t.type,i=void 0===a?p.NONE:a;t.onClick;Object(h.a)(this,e),this.label=n,this.type=i}return Object(d.a)(e,[{key:"isClickable",get:function(){return!0}}]),e}(),v=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.href,r=void 0===i?"":i,s=a.target,o=void 0===s?"_self":s;return Object(h.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,{label:e,type:p.LINK}))).href=r,n.target=o,n}return Object(u.a)(t,e),Object(d.a)(t,[{key:"isClickable",get:function(){return Boolean(this.href)}}]),t}(f),y=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(h.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,{label:e,type:p.DROPDOWN}))).onSelect=function(e){n.options=n.options.map(function(t){var n=Object(o.a)({},t,{selected:e===t.label?!t.selected:t.selected});return e===t.label&&t.onUpdate&&t.onUpdate(n),n})},n.options=a,n}return Object(u.a)(t,e),t}(f),b=function(){function e(t,n){var r=this;Object(h.a)(this,e),this.viewSettings={showStatistics:!1,showBodyLabels:!0,showOrbitCreationPanel:!1,showTransferCalculationPanel:!1,satelliteSearchPanel:{isVisible:!1,toggle:function(){this.isVisible=!this.isVisible}}},this.topMenu=[new y(a.SIMULATION,[{label:"Orbit creation panel",selected:this.viewSettings.showOrbitCreationPanel,onUpdate:function(e){var t=e.selected;r.viewSettings.showOrbitCreationPanel=t}},{label:"Transfer calculation panel",selected:this.viewSettings.showTransferCalculationPanel,onUpdate:function(e){var t=e.selected;r.viewSettings.showTransferCalculationPanel=t}}]),new v(a.EDIT),new y(a.VIEW,[{label:"Body Labels",selected:this.viewSettings.showBodyLabels,onUpdate:function(e){var t=e.selected;r._simulation.settings.ui.showBodyLabels=t,r.viewSettings.showBodyLabels=t}},{label:"Statistics badge",selected:!1,onUpdate:function(e){var t=e.selected;r.viewSettings.showStatistics=t}},{label:"Satellite search panel",selected:this.viewSettings.satelliteSearchPanel.isVisible,onUpdate:function(){r.viewSettings.satelliteSearchPanel.toggle()}}]),new y(a.HELP,[new f({label:"Urbain Wiki",onClick:function(){var e;(e=i)&&window.open(e,"_blank")}}),new f({label:"Show tutorial",onClick:function(){Object(m.a)({wizardId:m.b.GETTING_STARTED_WIZARD,ignoreWatchStatusCheck:!0})}})])],this.loadSatellite=function(e){return r._loadTLE(e)},this.unloadSatellite=function(e){return r._simulation.starSystem.deleteObject(-(1e5+(0|e)))},this._simulation=t,this._loadTLE=n}return Object(d.a)(e,[{key:"starSystemSelectorSettings",get:function(){var e=this._simulation.starSystemManager;return{options:e.starSystems,defaultValue:e.defaultStarSystem,onSelect:function(t){return e.loadByIdx(t.idx)}}}}]),e}(),g=s.a.createContext({stats:{},store:new b,updateStore:function(){},webApiServices:{satelliteFinder:{}}});n.d(t,"b",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"a",function(){return p})},function(e,t,n){"use strict";n.d(t,"b",function(){return r});var a=n(8);n.d(t,"c",function(){return a.a});var i=n(10);function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewport-id";function i(n){a.a.renderLoopActive&&(a.a.tick((n-t)/1e3),t=n,e.update(),requestAnimationFrame(i))}a.a.init(document.getElementById(n),function(e){t=e,requestAnimationFrame(i)}),a.a.loadModule("PatchedConics")}n.d(t,"a",function(){return i.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),i=n(3),r=n(2),s=n(18),o=function(){function e(t,n,i,r,s,o,c,l,u){Object(a.a)(this,e),this._mu=l,this._sma=n,this._ecc=t,this._inc=r,this._raan=s,this._aop=i,this._epoch=c,void 0===u||!0===u?this.ta=o:this.m0=o,this.updateMeanMotion()}return Object(i.a)(e,[{key:"setUpdateCallback",value:function(e){this._updateCallback=e}},{key:"copy",value:function(){return new e(this._ecc,this._sma,this._aop,this._inc,this._raan,this.m0,this._epoch,this._mu,!1)}},{key:"dump",value:function(){return{ecc:this._ecc,sma:this._sma,aop:this._aop,inc:this._inc,loan:this._raan,m0:this.m0,epoch:this._epoch,mu:this._mu}}},{key:"updateMeanMotion",value:function(){this.meanMotion=Math.sqrt(this._mu/Math.abs(this._sma))/Math.abs(this._sma)}},{key:"getNodalPrecessionRate",value:function(e,t){return-1.5*e*e*t*Math.cos(this._inc)*this.meanMotion/Math.pow(this._sma*(1-this._ecc*this._ecc),2)}},{key:"getNodalPrecessionByEpoch",value:function(e,t,n){return(n-this._epoch)*this.getNodalPrecessionRate(e,t)}},{key:"addPrecession",value:function(e,t,n){return this.m0=this.getMeanAnomalyByEpoch(n),this._raan+=this.getNodalPrecessionByEpoch(e,t,n),this._epoch=n,this}},{key:"getMeanAnomalyByEpoch",value:function(e){return this.m0+this.meanMotion*(e-this._epoch)}},{key:"getEccentricAnomalyByEpoch",value:function(e){return this.getEccentricAnomalyByMeanAnomaly(this.getMeanAnomalyByEpoch(e))}},{key:"getTrueAnomalyByEpoch",value:function(e){return this.getTrueAnomalyByMeanAnomaly(this.getMeanAnomalyByEpoch(e))}},{key:"getMeanAnomalyByEccentricAnomaly",value:function(e){return this.isElliptic?e-this._ecc*Math.sin(e):this._ecc*Math.sinh(e)-e}},{key:"getMeanAnomalyByTrueAnomaly",value:function(e){return this.getMeanAnomalyByEccentricAnomaly(this.getEccentricAnomalyByTrueAnomaly(e))}},{key:"getEccentricAnomalyByMeanAnomaly",value:function(e){var t,n,a=e,i=0;if(this.isElliptic)for(a/=2*Math.PI,a=2*Math.PI*(a-Math.floor(a)),n=(t=this._ecc<.8?a:Math.PI)-this._ecc*Math.sin(t)-a;Math.abs(n)>1e-8&&i<30;)n=(t-=n/(1-this._ecc*Math.cos(t)))-this._ecc*Math.sin(t)-a,i+=1;else for(t=(Math.log(2*(Math.abs(a)+1/3))+1)/this._ecc+(1-1/this._ecc)*Math.asinh(Math.abs(a)/this._ecc),t*=Math.sign(a),n=this._ecc*Math.sinh(t)-t-a;Math.abs(n)>1e-8&&i<30;)t-=n/(this._ecc*Math.cosh(t)-1),n=this._ecc*Math.sinh(t)-t-a,i+=1;return t}},{key:"getEccentricAnomalyByTrueAnomaly",value:function(e){if(this.isElliptic){var t=Math.cos(e),n=(this._ecc+t)/(1+this._ecc*t);return(e+r.b)%r.b<=Math.PI?Math.acos(n):r.b-Math.acos(n)}return 2*Math.atanh(Math.tan(e/2)/Math.sqrt((this._ecc+1)/(this._ecc-1)))}},{key:"getTrueAnomalyByMeanAnomaly",value:function(e){return this.getTrueAnomalyByEccentricAnomaly(this.getEccentricAnomalyByMeanAnomaly(e))}},{key:"getTrueAnomalyByEccentricAnomaly",value:function(e){if(this.isElliptic){var t=Math.atan2(Math.sqrt(1-this._ecc*this._ecc)*Math.sin(e),Math.cos(e)-this._ecc);return t>=0?t:t+2*Math.PI}return 2*Math.atan(Math.sqrt((this._ecc+1)/(this._ecc-1))*Math.tanh(e/2))}},{key:"getOwnCoordsByTrueAnomaly",value:function(e){var t=this._sma*(1-this._ecc*this._ecc)/(1+this._ecc*Math.cos(e));return new r.c([t*Math.cos(e),t*Math.sin(e),0])}},{key:"getAsymptoteTa",value:function(){return!this.isElliptic&&Math.acos(-1/this._ecc)}},{key:"getPeriapsisRadius",value:function(){return this._sma*(1-this._ecc)}},{key:"getApoapsisRadius",value:function(){return this._sma*(1+this._ecc)}},{key:"getPeriapsisSpeed",value:function(){return Math.sqrt(this._mu*(2/this.getPeriapsisRadius()-1/this._sma))}},{key:"getApoapsisSpeed",value:function(){return Math.sqrt(this._mu*(2/this.getApoapsisRadius()-1/this._sma))}},{key:"getEpochByTrueAnomaly",value:function(e){if(null===e)return null;var t=this.getMeanAnomalyByTrueAnomaly(e)-this.m0;return t<0&&this.isElliptic&&(t+=r.b),this._epoch+t/this.meanMotion}},{key:"getSphereCrossingTrueAnomaly",value:function(e){var t=this.getApoapsisRadius();if(t>0&&e>t||e<this.getPeriapsisRadius())return!1;var n=Math.acos((this._sma*(1-this._ecc*this._ecc)/e-1)/this._ecc);return[n,r.b-n]}},{key:"getPlaneCrossingTrueAnomaly",value:function(e){var t=this._sma*(1-this._ecc*this._ecc)*Math.sin(this._inc)/e,n=this._ecc,a=Math.cos(this._aop),i=Math.sin(this._aop),s=this._planeCrossingHelper(t*a,t*i-n),o=this._planeCrossingHelper(-t*a,-t*i-n),c=null,l=null;return(!1!==s||!1!==o)&&(this.isHyperbolic?s instanceof Array?!o instanceof Array?[s]:[[Math.min(s[0],o[0]),Math.max(s[0],o[0])],[Math.min(s[1],o[1]),Math.max(s[1],o[1])]]:o instanceof Array?[o]:!1!==s&&!1!==o?[[Math.min(o,s),Math.max(o,s)]]:(console.log("Error! getPlaneCrossingTrueAnomaly() not implemented!"),!1):(!1!==s&&(c=(this._aop+s[0])%r.b<(this._aop+s[1])%r.b?[s[1],s[0]]:[s[0],s[1]]),!1!==o?(l=(this._aop+o[0])%r.b<(this._aop+o[1])%r.b?[o[1],o[0]]:[o[0],o[1]],c?[[c[0],l[1]],[l[0],c[1]]]:[l]):[c]))}},{key:"_planeCrossingHelper",value:function(e,t){var n=e*e+t*t,a=Math.sqrt(e*e*(n-1)),i=Math.atan2(((t*a-t*t)/n+1)/e,(t-a)/n);if(isNaN(i))return!1;var s=Math.atan2(((-t*a-t*t)/n+1)/e,(t+a)/n);if(this.isElliptic)return[i<0?i+r.b:i,s<0?s+r.b:s];var o=this.getAsymptoteTa();return i=this._validateHyperbolicTa(o,i),s=this._validateHyperbolicTa(o,s),!1!==i&&!1!==s&&i!==s?[Math.min(i,s),Math.max(i,s)]:!1!==i?i:!1!==s&&s}},{key:"_validateHyperbolicTa",value:function(e,t){return t>Math.PI&&(t-=r.b),!(t>e||t<-e)&&(!(Math.abs(t-Math.sign(t)*e)<1e-14)&&t)}},{key:"getStateByEpoch",value:function(e){if(this.isElliptic){var t=this.getEccentricAnomalyByEpoch(e),n=Math.cos(t),a=Math.sin(t),i=Math.sqrt(this._mu/this._sma)/(1-this._ecc*n),o=new r.c([this._sma*(n-this._ecc),this._sma*Math.sqrt(1-this._ecc*this._ecc)*a,0]),c=new r.c([-i*a,i*Math.sqrt(1-this._ecc*this._ecc)*n,0]);return new s.a(o.rotateZ(this._aop).rotateX(this._inc).rotateZ(this._raan),c.rotateZ(this._aop).rotateX(this._inc).rotateZ(this._raan))}var l=this.getTrueAnomalyByEpoch(e),u=this.getOrbitalFrameQuaternion(),h=this.getOwnCoordsByTrueAnomaly(l),d=Math.atan(this._ecc*Math.sin(l)/(1+this._ecc*Math.cos(l))),m=new r.c([Math.sqrt(this._mu*(2/h.mag-1/this._sma)),0,0]);return new s.a(u.rotate_(h),u.rotate_(m.rotateZ(l+Math.PI/2-d)))}},{key:"getNormalVector",value:function(){var e=new r.a(new r.c([0,0,1]),this._raan);return new r.a(e.rotate_(new r.c([1,0,0])),this._inc).rotate_(new r.c([0,0,1]))}},{key:"getPeriapsisVector",value:function(){return this.getOrbitalFrameQuaternion().rotate_(new r.c([1,0,0]))}},{key:"getOrbitalFrameQuaternion",value:function(){return new r.a(new r.c([0,0,1]),this._raan).mul_(new r.a(new r.c([1,0,0]),this._inc)).mul_(new r.a(new r.c([0,0,1]),this._aop))}},{key:"isHyperbolic",get:function(){return this._ecc>1}},{key:"isElliptic",get:function(){return this._ecc<1}},{key:"mu",get:function(){return this._mu},set:function(e){this._mu=e,this.updateMeanMotion(),this._updateCallback&&this._updateCallback()}},{key:"sma",get:function(){return this._sma},set:function(e){this._sma=e,this.updateMeanMotion(),this._updateCallback&&this._updateCallback()}},{key:"ecc",get:function(){return this._ecc},set:function(e){this._ecc=e,this._updateCallback&&this._updateCallback()}},{key:"inc",get:function(){return this._inc},set:function(e){this._inc=e,this._updateCallback&&this._updateCallback()}},{key:"raan",get:function(){return this._raan},set:function(e){this._raan=e,this._updateCallback&&this._updateCallback()}},{key:"aop",get:function(){return this._aop},set:function(e){this._aop=e,this._updateCallback&&this._updateCallback()}},{key:"ta",get:function(){return this.getTrueAnomalyByEpoch(this._epoch)},set:function(e){this.m0=this.getMeanAnomalyByTrueAnomaly(e),this._updateCallback&&this._updateCallback()}},{key:"epoch",get:function(){return this._epoch},set:function(e){this._epoch=e,this._updateCallback&&this._updateCallback()}},{key:"period",get:function(){return this.isElliptic?r.b*Math.sqrt(this._sma*this._sma*this._sma/this._mu):0}}],[{key:"createFromState",value:function(t,n,a){if(a=a||0,!t)return null;var i=t.position,r=t.velocity,s=i.cross(r),o=Math.atan2(s.x,-s.y),c=Math.atan2(Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2)),s.z),l=n*i.mag/(2*n-i.mag*Math.pow(r.mag,2)),u=Math.sqrt(1-Math.min(1,Math.pow(s.mag,2)/(n*l))),h=i.rotateZ(-o).rotateX(-c),d=Math.atan2(h.y,h.x),m=i.dot(r),p=Math.acos(Math.min(1,Math.max(-1,(l*(1-u*u)/i.mag-1)/u)))*Math.sign(m);return new e(u,l,d-p>0?d-p:2*Math.PI+(d-p),c,o,p,a,n,!0)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=n(14),u=function(e){function t(e,n,i,o,c,u,h){var d;return Object(a.a)(this,t),(d=Object(r.a)(this,Object(s.a)(t).call(this,e,n,i,o))).visualModel=c,d.physicalModel=u,d.orientation=h,d.visualModel&&d.visualModel.setObject(Object(l.a)(Object(l.a)(d))),d}return Object(c.a)(t,e),Object(i.a)(t,[{key:"drop",value:function(){this.visualModel&&(this.visualModel.drop(),delete this.visualModel),Object(o.a)(Object(s.a)(t.prototype),"drop",this).call(this)}}]),t}(n(17).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this))).value=e,n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"evaluate",value:function(e){return this.value}}]),t}(n(37).a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e))).keplerianObject=n,i}return Object(o.a)(t,e),Object(i.a)(t,[{key:"dump",value:function(){return{referenceFrame:this.referenceFrame.id,keplerianObject:this.keplerianObject.dump(),visualModel:this.visualModel.config,minEpoch:this.minEpoch,maxEpoch:this.maxEpoch}}},{key:"onUpdate",value:function(e){var t=this;return this.keplerianObject.setUpdateCallback(function(){return e(t)}),this}},{key:"getKeplerianObjectByEpoch",value:function(e,t){return this.validateEpoch(e),this._transformKeplerianObject(this.keplerianObject,t)}},{key:"mu",get:function(){return this.keplerianObject.mu},set:function(e){this.keplerianObject.mu=e}},{key:"sma",get:function(){return this.keplerianObject.sma},set:function(e){this.keplerianObject.sma=e}},{key:"ecc",get:function(){return this.keplerianObject.ecc},set:function(e){this.keplerianObject.ecc=e}},{key:"inc",get:function(){return this.keplerianObject.inc},set:function(e){this.keplerianObject.inc=e}},{key:"raan",get:function(){return this.keplerianObject.raan},set:function(e){this.keplerianObject.raan=e}},{key:"aop",get:function(){return this.keplerianObject.aop},set:function(e){this.keplerianObject.aop=e}},{key:"ta",get:function(){return this.keplerianObject.ta},set:function(e){this.keplerianObject.ta=e}},{key:"epoch",get:function(){return this.keplerianObject.epoch},set:function(e){this.keplerianObject.epoch=e}},{key:"period",get:function(){return this.keplerianObject.period}}]),t}(n(56).a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=n(7),u=n(47),h=n(9),d=n(2),m=n(59),p=n(8),f=n(26),v=n(18),y=n(64),b=n(66),g=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e,n))).showFull=!!n.showFull,i.trailPeriod=n.trailPeriod||!1,i.lastPositionEpoch=!1,i.lastFrameEpoch=!1,i._markers.per=new y.a(i.threeObj,i.config.color),i._markers.apo=new b.a(i.threeObj,i.config.color),i._markers.per.setScale(.5),i._markers.apo.setScale(.5),i}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(e){Object(o.a)(Object(s.a)(t.prototype),"render",this).call(this,e);var n=this.getPositionEpoch(e);if(!1!==n){this.lastPositionEpoch=n,this.lastFrameEpoch=e;var a=this.trajectory.getKeplerianObjectByEpoch(n);a.isElliptic?this.renderEllipse(a,n,e):this.renderHyperbola(a,n,e)}else this.threeObj.visible=!1}},{key:"getEpochByPoint",value:function(e){var t=this.trajectory.getReferenceFrameByEpoch(this.lastFrameEpoch).stateVectorFromBaseReferenceFrameByEpoch(this.lastFrameEpoch,new v.a(e))._position,n=this.trajectory.getKeplerianObjectByEpoch(this.lastPositionEpoch);return n.getOrbitalFrameQuaternion().invert_().rotate_(t),n.getEpochByTrueAnomaly(Math.atan2(t.y,t.x))}},{key:"renderHyperbola",value:function(e,t,n){var a=e.getAsymptoteTa()-.02,i=-a;!1!==this.trajectory.minEpoch&&(i=e.getTrueAnomalyByEpoch(this.trajectory.minEpoch)),!1!==this.trajectory.maxEpoch&&(a=e.getTrueAnomalyByEpoch(this.trajectory.maxEpoch));var r=this.trajectory.pericentricReferenceFrame.getQuaternionByEpoch(t),s=e.getTrueAnomalyByEpoch(t),o=[],c=[],u=i,h=0;u>(i+s)/2&&(u=(i+s)/2);for(var d=(Math.max(a,s)-u)/99,m=0;h<100+m;){var p=e.getOwnCoordsByTrueAnomaly(u);o[h]=(new l.E).fromArray([p[0],p[1]]),c[h]=u>s?0:s==i?1:(u-i)/(s-i),h+=1,(u+=d)-d<=s&&s<u&&(p=e.getOwnCoordsByTrueAnomaly(s),o[h]=(new l.E).fromArray([p[0],p[1]]),c[h]=1,o[h+=1]=(new l.E).fromArray([p[0],p[1]]),c[h]=0,h+=1,m+=2)}this.updateGeometry(o,c,.35),this.threeObj.quaternion.copy(r.toThreejs()),this.setPosition(this.trajectory.getReferenceFrameByEpoch(n).getOriginPositionByEpoch(n)),this._markers.apo.disable(),s>0&&s<Math.PI?this._markers.per.disable():(this._markers.per.enable(),this._markers.per.setPosition(new l.F(e.getPeriapsisRadius(),0,0)))}},{key:"renderEllipse",value:function(e,t,n){var a=this.trajectory.pericentricReferenceFrame.getQuaternionByEpoch(t),i=new m.a(new f.a(this.trajectory.getReferenceFrameByEpoch(t).getOriginStateByEpoch(n)),a),r=h.b.transformPositionByEpoch(n,p.a.camera.lastPosition,i),s=new d.c([r.x,r.y,0]),o=i.transformPositionByEpoch(n,s,h.b),c=Object(d.d)(s.x/s.mag,s.y),u=e.getOwnCoordsByTrueAnomaly(c).sub_(r).mag,v=e.getOwnCoordsByTrueAnomaly(c+Math.PI).sub_(r).mag,y=e.getEccentricAnomalyByTrueAnomaly(c),b=e.getEccentricAnomalyByEpoch(t),g=0,E=1;if(this.trailPeriod||(this._markers.per.enable(),this._markers.per.setPosition(new l.F(e.getPeriapsisRadius()-s.x,-s.y,0)),this._markers.apo.enable(),this._markers.apo.setPosition(new l.F(-e.getApoapsisRadius()-s.x,-s.y,0))),this.trailPeriod){var j=t-this.trailPeriod;!1!==this.trajectory.minEpoch&&this.trajectory.minEpoch>j&&(j=this.trajectory.minEpoch),this._markers.per.disable(),this._markers.apo.disable(),g=1-(b-e.getEccentricAnomalyByEpoch(j)+d.b)%d.b/d.b,E=1}else if(!this.showFull&&!1!==this.trajectory.maxEpoch&&this.trajectory.maxEpoch-t<e.period){E=(e.getEccentricAnomalyByEpoch(this.trajectory.maxEpoch)-b+d.b)%d.b/d.b;var O=e.getMeanAnomalyByEpoch(this.trajectory.maxEpoch),_=e.getMeanAnomalyByEpoch(t);Object(d.j)(0,[_,O])||this._markers.per.disable(),Object(d.j)(Math.PI,[_,O])||this._markers.apo.disable()}var k=this.getEllipsePoints(new l.h(-e.sma*e.ecc-s.x,-s.y,e.sma,e.sma*Math.sqrt(1-e.ecc*e.ecc),b,d.b+b-1e-13,!1,0),100,((y-b)/d.b+1)%1,v/u,g,E);this.updateGeometry(k.coords,k.angs,.35),this.threeObj.quaternion.copy(a.toThreejs()),this.setPosition(o)}},{key:"getEllipsePoints",value:function(e,t,n,a,i,r){var s=.25;a>30&&(s=1/Math.min(a/60+3.5,12),a=30);var o=[],c=[],l=t-3,u=(1-s)/3,h=Math.floor(l/(a+2*Math.sqrt(a)+1)),d=Math.floor(Math.sqrt(a)*h),m=[0,0,0,0,0],p=[s/(l-h-2*d),u/d,u/h,u/d],f=i;m[0]=n-s/2,m[0]<0&&(m[0]+=1),m[1]=m[0]+s,m[1]>1&&(m[1]-=1);for(var v=2;v<=4;++v)m[v]=m[v-1]+u,m[v]>1&&(m[v]-=1);for(;f<r;){f>=i&&(o.push(e.getPoint(f)),c.push((f-i)/(r-i)));for(var y=0;y<4&&!(m[y+1]>m[y]&&m[y]<=f&&f<m[y+1]||m[y+1]<m[y]&&(m[y]<=f||f<m[y+1]));)++y;f+=p[y]}return o.push(e.getPoint(r)),c.push(r),{coords:o,angs:c}}}]),t}(u.a)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(1),i=n(3),r=n(2),s=n(18),o=n(9),c=n(8),l=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"setId",value:function(e){return this.id=e,this.originId=o.d.getOriginIdByReferenceFrameId(e),this.type=o.d.getTypeByReferenceFrameId(e),this}},{key:"getQuaternionByEpoch",value:function(e){return new r.a}},{key:"getOriginPositionByEpoch",value:function(e){return new r.c(3)}},{key:"getOriginStateByEpoch",value:function(e){return new s.a}},{key:"transformStateVectorByEpoch",value:function(t,n,a){var i=a instanceof e?a:c.a.starSystem.getReferenceFrame(a);return this===i?n:this.id===o.a?i.stateVectorFromBaseReferenceFrameByEpoch(t,n):i.id===o.a?this.stateVectorToBaseReferenceFrameByEpoch(t,n):i.stateVectorFromBaseReferenceFrameByEpoch(t,this.stateVectorToBaseReferenceFrameByEpoch(t,n))}},{key:"transformPositionByEpoch",value:function(e,t,n){return this.transformStateVectorByEpoch(e,new s.a(t),n).position}},{key:"rotateVectorByEpoch",value:function(t,n,a){var i=a instanceof e?a:c.a.starSystem.getReferenceFrame(a);return this===i?n.copy():i.getQuaternionByEpoch(t).invert_().mul_(this.getQuaternionByEpoch(t)).rotate(n)}},{key:"stateVectorFromBaseReferenceFrameByEpoch",value:function(e,t){}},{key:"stateVectorToBaseReferenceFrameByEpoch",value:function(e,t){}},{key:"mu",get:function(){if(void 0===this._mu){var e=c.a.starSystem.getObject(this.originId);this._mu=e.physicalModel?e.physicalModel.mu:null}return this._mu}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=n(63),u=n(67),h=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e)))._vector=n||!1,i.deltaV=n?n.mag:0,i}return Object(c.a)(t,e),Object(i.a)(t,[{key:"_update",value:function(e){this.deltaV=this._vector.mag,this._updateCallback&&this._updateCallback(this,e)}},{key:"set",value:function(e){return Object(o.a)(Object(s.a)(t.prototype),"set",this).call(this,e),this._vector=e.vector,this.deltaV=this._vector.mag,this}},{key:"vector",set:function(e){var t=this.copy();this._vector=e,this._update(t)},get:function(){return this._vector.copy()}},{key:"prograde",set:function(e){var t=this.copy();this._vector[0]=e,this._update(t)},get:function(){return this._vector[0]}},{key:"normal",set:function(e){var t=this.copy();this._vector[1]=e,this._update(t)},get:function(){return this._vector[1]}},{key:"radial",set:function(e){var t=this.copy();this._vector[2]=e,this._update(t)},get:function(){return this._vector[2]}}]),t}(l.a);h.VISUAL_CLASS=u.a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),i=n(3),r=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"evaluate",value:function(e){return null}}]),e}()},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=n(43),u=n(36),h=n(2),d=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this))).propagator=e,n.updateHandlers=[],n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"dump",value:function(){var e={components:[],events:[],visualModel:this.visualModel.config,minEpoch:this.minEpoch,maxEpoch:this.maxEpoch},t=!0,n=!1,a=void 0;try{for(var i,r=this.components[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;e.components.push(s.dump())}}catch(p){n=!0,a=p}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}var o=!0,c=!1,l=void 0;try{for(var h,d=this.flightEvents[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){var m=h.value;m instanceof u.a&&e.events.push({epoch:m._epoch,x:m._vector[0],y:m._vector[1],z:m._vector[2]})}}catch(p){c=!0,l=p}finally{try{o||null==d.return||d.return()}finally{if(c)throw l}}return e}},{key:"addComponent",value:function(e){var n=this;0===this.components.length&&(e.isEditable=!0,e.onUpdate(function(e){return n.propagate(e.epoch)})),Object(o.a)(Object(s.a)(t.prototype),"addComponent",this).call(this,e),e.onClick(function(e){n.addFlightEvent(new u.a(e,new h.c([0,0,0])).onUpdate(function(e,t){n.sortFlightEvents(),n.propagate(Math.min(t.epoch,e.epoch))})),n.updateHandlers.map(function(e){return e(n)})})}},{key:"removeFlightEvent",value:function(e){Object(o.a)(Object(s.a)(t.prototype),"removeFlightEvent",this).call(this,e),e instanceof u.a&&this.propagator.propagate(this,e.epoch)}},{key:"propagate",value:function(e){var t=this;this.propagator.propagate(this,e),this.updateHandlers.map(function(e){return e(t)})}},{key:"onUpdate",value:function(e){this.updateHandlers.push(e)}},{key:"removeListener",value:function(e){for(var t in this.updateHandlers)if(this.updateHandlers[t]===e){this.updateHandlers=this.updateHandlers.splice(t,1);break}}}]),t}(l.a)},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var a=n(1),i=n(5),r=n(4),s=n(6),o=n(57),c=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(44).default);c.VISUAL_CLASS=o.default},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var a=n(1),i=n(5),r=n(4),s=n(6),o=n(58),c=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(44).default);c.VISUAL_CLASS=o.default},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=n(48),u=n(61),h=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(r.a)(this,Object(s.a)(t).call(this))).components=[],e.lastUsedTrajectory=null,e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"select",value:function(){this.isSelected=!0,this.selectedVisualModel?(this.visualModel.hide(),this.selectedVisualModel.show(),this.selectedVisualModel.select()):this.visualModel&&this.visualModel.select(),this.components.map(function(e){return e.select()})}},{key:"deselect",value:function(){Object(o.a)(Object(s.a)(t.prototype),"deselect",this).call(this),this.components.map(function(e){return e.deselect()})}},{key:"drop",value:function(){Object(o.a)(Object(s.a)(t.prototype),"drop",this).call(this),this.components.map(function(e){return e.drop()})}},{key:"setObject",value:function(e){Object(o.a)(Object(s.a)(t.prototype),"setObject",this).call(this,e),this.components.map(function(t){return t.setObject(e)})}},{key:"getReferenceFrameByEpoch",value:function(e){return this.getComponentByEpoch(e).getReferenceFrameByEpoch(e)}},{key:"getStateInOwnFrameByEpoch",value:function(e){return this.getComponentByEpoch(e).getStateInOwnFrameByEpoch(e)}},{key:"getKeplerianObjectByEpoch",value:function(e){return this.getComponentByEpoch(e).getKeplerianObjectByEpoch(e)}},{key:"getStateByEpoch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.getComponentByEpoch(e).getStateByEpoch(e,t,n)}},{key:"getComponentByEpoch",value:function(e,t){if(!t&&this.lastUsedTrajectory&&(!1===this.lastUsedTrajectory.minEpoch||this.lastUsedTrajectory.minEpoch<=e)&&(!1===this.lastUsedTrajectory.maxEpoch||this.lastUsedTrajectory.maxEpoch>=e))return this.lastUsedTrajectory;var n=!0,a=!1,i=void 0;try{for(var r,s=this.components[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;if(o.isValidAtEpoch(e))return this.lastUsedTrajectory=o,o}}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}throw new u.a(this.object,this,e,this.minEpoch,this.maxEpoch)}},{key:"addComponent",value:function(e){this.components.push(e),e.setParent(this),e.setObject(this.object),this.isSelected&&e.select(),(!1===this.minEpoch||!1!==e.minEpoch&&this.minEpoch>e.minEpoch)&&(this.minEpoch=e.minEpoch),(!1===this.maxEpoch||!1!==e.maxEpoch&&this.maxEpoch<e.maxEpoch)&&(this.maxEpoch=e.maxEpoch)}},{key:"clearAfterEpoch",value:function(e){for(;this.components[this.components.length-1].minEpoch>=e;)this.components[this.components.length-1].drop(),this.components.pop();var t=!0,n=!1,a=void 0;try{for(var i,r=this.components[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;(!1===s.maxEpoch||s.maxEpoch>e)&&s.clearAfterEpoch(e)}}catch(o){n=!0,a=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}this.lastUsedTrajectory=null}}]),t}(l.a)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=function(e){function t(e,n,i){var o;return Object(a.a)(this,t),(o=Object(r.a)(this,Object(s.a)(t).call(this,e))).oldSoi=n||!1,o.newSoi=i||!1,o}return Object(c.a)(t,e),Object(i.a)(t,[{key:"set",value:function(e){return Object(o.a)(Object(s.a)(t.prototype),"set",this).call(this,e),this.oldSoi=e.oldSoi,this.newSoi=e.newSoi,this}}]),t}(n(63).a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1),i=n(5),r=n(4),s=n(6),o=n(68),c=n(21),l=n(9),u=function(e){function t(e,n,s){var o;return Object(a.a)(this,t),(o=Object(i.a)(this,Object(r.a)(t).call(this,s)))._flightEvent=n,o._trajectory=e,o.setPositionOfEpoch(new c.a(function(e){return!(e>o._flightEvent.epoch)&&o._trajectory.getPositionByEpoch(o._flightEvent.epoch,l.b,e)})),o}return Object(s.a)(t,e),t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=n(7),u=n(19),h=n(62),d=n(8),m=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this))).trajectory=e,i.color=n.color,i.config=n,i._isSelected=!1,i.initFlightEvents(),i._markers={},i._defaultMarkerScale=.5,i._selectedMarkerScale=1,i._minEpoch=void 0!==n.minEpoch?n.minEpoch:e.minEpoch||!1,i._maxEpoch=void 0!==n.maxEpoch?n.maxEpoch:e.maxEpoch||!1,i.constructor.NO_THREE_OBJ?Object(r.a)(i):(i.setThreeObj(new h.a(new l.i,new l.k({vertexColors:l.G}))),i.point=new l.n(new l.A(1,8,8),new l.o({color:i.color})),i.scene.add(i.point),i.pointSize=4,i.threeObj.userData={selectionObject:function(){return i.trajectory.object}},d.a.selection.addSelectableObject(i.threeObj),i)}return Object(c.a)(t,e),Object(i.a)(t,[{key:"getEpochByPoint",value:function(e){return null}},{key:"onClick",value:function(e){var t=this;this.threeObj.userData.onClick=function(n){return e(t.getEpochByPoint(d.a.getSimCoords(n.point)))}}},{key:"initFlightEvents",value:function(){this.flightEvents=[];var e=!0,t=!1,n=void 0;try{for(var a,i=this.trajectory.flightEvents[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;this.addFlightEvent(r)}}catch(s){t=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"addFlightEvent",value:function(e){var t=e.getVisualClass();if(t){var n=new t(this.trajectory,e,this.color);this.trajectory.isSelected||n.setScale(.5),e.visualModel=n,this.flightEvents.push({event:e,model:n})}}},{key:"removeFlightEvent",value:function(e){for(var t in this.flightEvents)if(this.flightEvents[t].event===e){this.flightEvents[t].model.drop(),this.flightEvents.splice(t,1);break}}},{key:"updateGeometry",value:function(e,t,n){var a=new l.f(this.color);this.threeObj.geometry.dispose(),this.threeObj.geometry=(new l.i).setFromPoints(e);for(var i=0;i<t.length;i++){var r=(new l.f).copy(a),s=n+(1-n)*t[i];this.threeObj.geometry.colors.push(r.multiplyScalar(s))}}},{key:"getPositionEpoch",value:function(e){return!(!1!==this.minEpoch&&e<this.minEpoch||!1!==this.maxEpoch&&e>this.maxEpoch)&&(!1!==this.trajectory.minEpoch&&e<this.trajectory.minEpoch?this.trajectory.minEpoch:!1!==this.trajectory.maxEpoch&&e>this.trajectory.maxEpoch?this.trajectory.maxEpoch:e)}},{key:"render",value:function(e){if(this.trajectory.isValidAtEpoch(e)&&!this._isHidden){this.point.position.copy(d.a.getVisualCoords(this.trajectory.getPositionByEpoch(e)));var t=this.pointSize*this.point.position.length()*this.pixelAngleSize,n=this.trajectory.getKeplerianObjectByEpoch(e);if(n.isElliptic&&n.sma<t)return this._updateMarkerScales(0),void(this.point.visible=!1);n.isElliptic&&t>n.sma/5?(this._updateMarkerScales(n.sma/5/t),t=n.sma/5):this._updateMarkerScales(),this.point.visible=!0,this.point.scale.x=t,this.point.scale.y=t,this.point.scale.z=t}else this.point.visible=!1}},{key:"select",value:function(){this._isSelected=!0,this.setColor(this.config.selectedColor||16777215),this._updateScales()}},{key:"deselect",value:function(){this._isSelected=!1,this.setColor(this.config.color),this._updateScales()}},{key:"hide",value:function(){Object(o.a)(Object(s.a)(t.prototype),"hide",this).call(this),this.point.visible=!1}},{key:"_updateScales",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.flightEvents[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){a.value.model.setScale(this._isSelected?1:.5)}}catch(r){t=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this._updateMarkerScales()}},{key:"_updateMarkerScales",value:function(e){for(var t in void 0===e&&(e=1),this._markers)e<.1?this._markers[t].hide():(this._markers[t].show(),this._markers[t].setScale((this._isSelected?this._selectedMarkerScale:this._defaultMarkerScale)*e))}},{key:"setColor",value:function(e){this.color=e,this.point&&(this.point.material.color.set(this.color),this.point.material.needsUpdate=!0);var t=!0,n=!1,a=void 0;try{for(var i,r=this.flightEvents[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){i.value.model.setColor(e)}}catch(o){n=!0,a=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}for(var s in this._markers)this._markers[s].setColor(e)}},{key:"drop",value:function(){for(var e in this.threeObj&&d.a.selection.removeSelectableObject(this.threeObj),this._markers)this._markers[e].drop();var n=!0,a=!1,i=void 0;try{for(var r,c=this.flightEvents[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){r.value.model.drop()}}catch(l){a=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}delete this.flightEvents,this.point&&(this.scene.remove(this.point),this.point.geometry&&this.point.geometry.dispose(),this.point.material&&this.point.material.dispose(),delete this.point),Object(o.a)(Object(s.a)(t.prototype),"drop",this).call(this)}},{key:"minEpoch",get:function(){return"copy"===this._minEpoch?this.trajectory.minEpoch:this._minEpoch}},{key:"maxEpoch",get:function(){return"copy"===this._maxEpoch?this.trajectory.maxEpoch:this._maxEpoch}}]),t}(u.a)},function(e,t,n){"use strict";var a=n(1),i=n(3),r=n(18),s=n(9),o=n(24),c=n(61),l=n(21),u=n(49),h=n(2),d=n(5),m=n(4),p=n(12),f=n(6),v=n(7),y=n(26),b=n(19),g=function(e){function t(){return Object(a.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"raycast",value:function(e,t){this.visible=!0;var n=this.constant/e.ray.direction.dot(this.normal);if(!(n<0)){var a=e.ray.direction.clone().multiplyScalar(n);t.push({distance:a.length(),point:a,index:0,face:null,faceIndex:null,object:this})}}}]),t}(v.s),E=n(62),j=function(e){function t(e,n,i,r,s,o){var c;return Object(a.a)(this,t),(c=Object(d.a)(this,Object(m.a)(t).call(this,e,n,i,r,s,o))).remove(c.line),c.line=new E.a(c.line.geometry,c.line.material),c.add(c.line),c}return Object(f.a)(t,e),t}(v.b),O=n(8),_=function(e){function t(e,n,i,r,s,o,c,l){var u;return Object(a.a)(this,t),(u=Object(d.a)(this,Object(m.a)(t).call(this)))._referenceFrame=e,u._position=n,u._orientation=i,u._value=r,u.color=s,u.type=c,u.arcSize=o,u.editingCallback=l,u.isEditMode=!!l,u.bounds=[0,h.b],u.customPriority=0,u.orientationUpdated=!1,u.valueUpdated=!1,u.sizeNeedsUpdate=!1,u.init(),u}return Object(f.a)(t,e),Object(i.a)(t,[{key:"setBounds",value:function(e,t){this.bounds=[e,t]}},{key:"getReferenceFrame",value:function(e){return this._referenceFrame.evaluate(e)}},{key:"getPosition",value:function(e){return this._position.evaluate(e)}},{key:"getOrientation",value:function(e){return this._orientation.evaluate(e)}},{key:"getValue",value:function(e){return this._value.evaluate(e)}},{key:"init",value:function(){if(this.onWheelListener=this.onMouseWheel.bind(this),document.addEventListener("wheel",this.onWheelListener),this.isEditMode&&(this.mouseDownListener=this.onMouseDown.bind(this),O.a.addEventListener("mousedown",this.mouseDownListener,2),!(this._value instanceof y.a)))throw Error("Editable angle requires Constant instance as a value");this.sizeNeedsUpdate=!0,this.type===t.TYPE_ARC?this.createArcObject():this.createSectorObject(),this.valueUpdated=!0,this.orientationUpdated=!0}},{key:"onMouseWheel",value:function(){this.sizeNeedsUpdate=!0}},{key:"onMouseDown",value:function(e){if(!(this.type===t.TYPE_ARC?O.a.raycaster.intersectObjects([this.threeAngle.line])[0]:O.a.raycaster.intersectObjects([this.threeAngle.children[0].line,this.threeAngle.children[0].cone])[0])||0!=e.button)return!0;this.mouseUpListener=this.onMouseUp.bind(this),document.addEventListener("mouseup",this.mouseUpListener),this.mouseMoveListener=this.onMouseMove.bind(this),O.a.addEventListener("mousemove",this.mouseMoveListener,2+this.customPriority/100),this.mouseMoved=!1}},{key:"onMouseUp",value:function(e){if(document.removeEventListener("mouseup",this.mouseUpListener),O.a.removeEventListener("mousemove",this.mouseMoveListener),!this.mouseMoved){var t=prompt("Enter angle value in degrees",Object(h.m)(this._value.value));if(null!==t&&""!==t&&!isNaN(Number(t))){var n=Object(h.g)(Number(t));if(n<this.bounds[0]||n>this.bounds[1])n=(this.bounds[0]-n+h.b)%h.b<=(n-this.bounds[1]+h.b)%h.b?this.bounds[0]:this.bounds[1];n!==this._value.value&&(this._value.value=n,this.valueUpdated=!0,this.editingCallback&&this.editingCallback(this._value.value))}}}},{key:"onMouseMove",value:function(){this.mouseMoved=!0;var e=this.getVirtualPlane(),t=O.a.raycaster.intersectObjects([e])[0];if(t){var n=t.point.clone().sub(this.threeObj.position).normalize(),a=new v.F(1,0,0);a.applyQuaternion(this.threeObj.quaternion);var i=this._value.value,r=Math.acos(a.dot(n)/a.length()/n.length());if(a.cross(n),(r=a.dot(e.normal)>0?r:h.b-r)<this.bounds[0]||r>this.bounds[1])r=(this.bounds[0]-r+h.b)%h.b<=(r-this.bounds[1]+h.b)%h.b?this.bounds[0]:this.bounds[1];r!==i&&(this._value.value=r,this.valueUpdated=!0,this.editingCallback&&this.editingCallback(this._value.value))}}},{key:"getVirtualPlane",value:function(){var e=new v.F(0,0,1);e.applyQuaternion(this.threeObj.quaternion);var t=Math.acos(e.dot(this.threeObj.position)/this.threeObj.position.length()/e.length()),n=this.threeObj.position.length()*Math.cos(t);return this.virtualPlane?(this.virtualPlane.normal.copy(e),this.virtualPlane.constant=n):this.virtualPlane=new g(e,n),this.virtualPlane}},{key:"createArcObject",value:function(){var e=new v.k({color:this.color}),t=new v.q;this.threeArc=new v.j(new v.i,e),this.threeMainAxis=new v.j(new v.i,e),this.threeAngle=new v.j(new v.i,e),this.threeMainAxis.geometry.vertices.push(new v.F(0,0,0),new v.F(1,0,0)),this.threeAngle.geometry.vertices.push(new v.F(0,0,0),new v.F(1,0,0)),t.add(this.threeArc),t.add(this.threeMainAxis),t.add(this.threeAngle),t.scale.set(this.size,this.size,this.size),this.setThreeObj(t)}},{key:"updateArcObject",value:function(e){e<0&&(e-=2*Math.PI*Math.floor(e/2/Math.PI)),this.threeArc.geometry.dispose(),this.threeArc.geometry=new v.i,this.threeArc.geometry.setFromPoints(new v.h(0,0,1/3,1/3,0,e,!1,0).getPoints(Math.ceil(30*e)))}},{key:"createSectorObject",value:function(){var e=new v.o({color:this.color,opacity:.175,transparent:!0,side:v.g}),t=new v.q;this.threeArc=new v.n(new v.i,e),this.threeMainAxis=new j(new v.F(1,0,0),new v.F(0,0,0),1,this.color),this.threeAngle=new v.q,this.threeAngle.add(new j(new v.F(1,0,0),new v.F(0,0,0),1,this.isEditMode?12776514:this.color)),t.add(this.threeArc),t.add(this.threeMainAxis),t.add(this.threeAngle),t.scale.set(this.size,this.size,this.size),this.setThreeObj(t)}},{key:"updateSectorObject",value:function(e){e<0&&(e-=2*Math.PI*Math.floor(e/2/Math.PI)),this.threeArc.geometry.dispose(),this.threeArc.geometry=new v.e(1,Math.ceil(30*e),0,e)}},{key:"drop",value:function(){Object(p.a)(Object(m.a)(t.prototype),"drop",this).call(this),delete this.threeMainAxis,delete this.threeAngle,delete this.threeArc,document.removeEventListener("wheel",this.onWheelListener),this.mouseDownListener&&O.a.removeEventListener("mousedown",this.mouseDownListener)}},{key:"render",value:function(e){var n=this.getReferenceFrame(e),a=n.transformPositionByEpoch(e,this.getPosition(e),s.a);if(this.setPosition(a),this.valueUpdated||!(this._value instanceof y.a)){var i=this.getValue(e);this.type===t.TYPE_ARC?this.updateArcObject(i):this.updateSectorObject(i),this.threeAngle.rotation.z=i,this.valueUpdated=!1}!this.orientationUpdated&&this._orientation instanceof y.a||(this.threeObj.quaternion.copy(n.getQuaternionByEpoch(e).mul_(this.getOrientation(e)).toThreejs()),this.orientationUpdated=!1),this.sizeNeedsUpdate&&(this.size=this.threeObj.position.length()/6*this.arcSize,this.threeObj.scale.set(this.size,this.size,this.size),this.sizeNeedsUpdate=!1)}}]),t}(b.a);_.TYPE_ARC="arc",_.TYPE_SECTOR="sector";var k=function(e){function t(e,n,i,r,s,o,c){var l;return Object(a.a)(this,t),(l=Object(d.a)(this,Object(m.a)(t).call(this)))._referenceFrame=e,l._value=n,l.color=i,l.size=r,l.editingCallback=s,l.minBound=o,l.maxBound=c,l.isEditMode=!!s,l.lastEpoch=0,l.init(),l}return Object(f.a)(t,e),Object(i.a)(t,[{key:"getReferenceFrame",value:function(e){return this._referenceFrame.evaluate(e)}},{key:"init",value:function(){this.setThreeObj(new v.n(new v.A(1,8,8),new v.o({color:this.color}))),this.isEditMode&&(this.mouseDownListener=this.onMouseDown.bind(this),document.addEventListener("mousedown",this.mouseDownListener))}},{key:"drop",value:function(){Object(p.a)(Object(m.a)(t.prototype),"drop",this).call(this),this.mouseDownListener&&document.removeEventListener("mousedown",this.mouseDownListener)}},{key:"onMouseDown",value:function(e){0==e.button&&(O.a.raycaster.intersectObjects([this.threeObj])[0]&&0==e.button&&(this.mouseUpListener=this.onMouseUp.bind(this),document.addEventListener("mouseup",this.mouseUpListener),this.mouseMoveListener=this.onMouseMove.bind(this),O.a.addEventListener("mousemove",this.mouseMoveListener,3)))}},{key:"onMouseUp",value:function(e){document.removeEventListener("mouseup",this.mouseUpListener),O.a.removeEventListener("mousemove",this.mouseMoveListener)}},{key:"onMouseMove",value:function(){this.updateValue(this.lastEpoch)}},{key:"updateValue",value:function(e){var t=this.getVirtualPlane(e),n=O.a.raycaster.intersectObjects([t])[0];if(n){var a=this.minBound(e),i=this.maxBound(e);this._value=s.b.transformPositionByEpoch(e,O.a.getSimCoords(n.point),this.getReferenceFrame(e));for(var r=[0,1,2],o=0;o<r.length;o++){var c=r[o];!1!==a[c]&&this._value[c]<a[c]?this._value[c]=a[c]:!1!==i[c]&&this._value[c]>i[c]&&(this._value[c]=i[c])}this.editingCallback&&this.editingCallback(this._value)}}},{key:"getVirtualPlane",value:function(e){var t=(new v.F).fromArray(this.getReferenceFrame(e).getQuaternionByEpoch(e).rotate_(new h.c([0,0,1]))),n=O.a.getVisualCoords(this.getReferenceFrame(e).getOriginPositionByEpoch(e)),a=Math.acos(t.dot(n)/n.length()/t.length()),i=n.length()*Math.cos(a);return this.virtualPlane?(this.virtualPlane.normal.copy(t),this.virtualPlane.constant=i):this.virtualPlane=new g(t,i),this.virtualPlane}},{key:"render",value:function(e){this.lastEpoch=e,this.setPosition(this.getReferenceFrame(e).transformPositionByEpoch(e,this._value,s.a));var t=this.size*this.threeObj.position.length()*this.pixelAngleSize;this.threeObj.scale.x=t,this.threeObj.scale.y=t,this.threeObj.scale.z=t}}]),t}(b.a),w=function(){function e(t){Object(a.a)(this,e),this.isEditMode=t.isEditable,this.trajectory=t,this.colorRaan=8388564,this.colorAop=10053324,this.colorInc=11534336,this.colorTa=16519104,O.a.settings.ui.showAnglesOfSelectedOrbit&&this.init()}return Object(i.a)(e,[{key:"init",value:function(){var e=this,t=new l.a(function(t){return e.trajectory.getReferenceFrameByEpoch(t)}),n=new y.a(new h.c(3));this.angleRaan=new _(t,n,new y.a(new h.a),this.isEditMode?new y.a(this.trajectory.raan):new l.a(function(t){return e.trajectory.getKeplerianObjectByEpoch(t).raan}),this.colorRaan,1.5,this.isEditMode?_.TYPE_SECTOR:_.TYPE_ARC,this.isEditMode?function(t){e.trajectory.raan=t}:null),this.angleRaan.customPriority=4,this.angleInc=new _(t,n,new l.a(function(t){var n=e.trajectory.getKeplerianObjectByEpoch(t);return new h.a(new h.c([0,0,1]),n.raan+Math.PI/2).mul_(new h.a(new h.c([1,0,0]),Math.PI/2))}),this.isEditMode?new y.a(this.trajectory.inc):new l.a(function(t){return e.trajectory.getKeplerianObjectByEpoch(t).inc}),this.colorInc,2,this.isEditMode?_.TYPE_SECTOR:_.TYPE_ARC,this.isEditMode?function(t){e.trajectory.inc=t}:null),this.angleInc.setBounds(0,Math.PI),this.angleInc.customPriority=3,this.angleAop=new _(t,n,new l.a(function(t){var n=e.trajectory.getKeplerianObjectByEpoch(t);return new h.a(new h.c([0,0,1]),n.raan).mul_(new h.a(new h.c([1,0,0]),n.inc))}),this.isEditMode?new y.a(this.trajectory.aop):new l.a(function(t){return e.trajectory.getKeplerianObjectByEpoch(t).aop}),this.colorAop,2.5,this.isEditMode?_.TYPE_SECTOR:_.TYPE_ARC,this.isEditMode?function(t){e.trajectory.aop=t}:null),this.angleAop.customPriority=2,this.angleTa=new _(t,n,new l.a(function(t){var n=e.trajectory.getKeplerianObjectByEpoch(t);return new h.a(new h.c([0,0,1]),n.raan).mul_(new h.a(new h.c([1,0,0]),n.inc)).mul_(new h.a(new h.c([0,0,1]),n.aop))}),new l.a(function(t){return e.trajectory.getKeplerianObjectByEpoch(t).getTrueAnomalyByEpoch(t)}),this.colorTa,3,_.TYPE_ARC),this.isEditMode&&(this.pointApoapsis=new k(new y.a(this.trajectory.pericentricReferenceFrame),new h.c([-this.trajectory.sma*(1+this.trajectory.ecc),0,0]),"red",8,function(t){var n=e.trajectory.sma*(1-e.trajectory.ecc),a=(-t.x+n)/2;e.trajectory.sma=a,e.trajectory.ecc=1-n/a},function(){return[!1,0,0]},function(){return[-e.trajectory.sma*(1-e.trajectory.ecc),0,0]}),this.pointPeriapsis=new k(new y.a(this.trajectory.pericentricReferenceFrame),new h.c([this.trajectory.sma*(1-this.trajectory.ecc),0,0]),"blue",8,function(t){var n=e.trajectory.sma*(1+e.trajectory.ecc),a=(t.x+n)/2;e.trajectory.sma=a,e.trajectory.ecc=n/a-1},function(){return[0,0,0]},function(){return[e.trajectory.sma*(1+e.trajectory.ecc),0,0]}),this.angleTaEditing=new _(t,n,new l.a(function(t){return new h.a(new h.c([0,0,1]),e.trajectory.raan).mul_(new h.a(new h.c([1,0,0]),e.trajectory.inc)).mul_(new h.a(new h.c([0,0,1]),e.trajectory.aop))}),new y.a(this.trajectory.ta),this.colorTa,3,_.TYPE_SECTOR,function(t){e.trajectory.ta=t}),this.angleTaEditing.customPriority=1)}},{key:"remove",value:function(){this.angleRaan&&this.angleRaan.drop(),this.angleAop&&this.angleAop.drop(),this.angleInc&&this.angleInc.drop(),this.angleTa&&this.angleTa.drop(),this.angleTaEditing&&this.angleTaEditing.drop(),this.pointApoapsis&&this.pointApoapsis.drop(),this.pointPeriapsis&&this.pointPeriapsis.drop()}}]),e}(),M=n(33),S=n(10),T=n(41),P=n(42);n.d(t,"a",function(){return A});var A=function(){function e(){var t=this;Object(a.a)(this,e),this.minEpoch=!1,this.maxEpoch=!1,this.cachedEpoch=null,this.cachedState=null,this.visualModel=null,this.selectedVisualModel=null,this.object=null,this.parent=null,this.referenceFrame=null,this.isEditable=!1,this.isSelected=!1,this.clickHandler=null,this.flightEvents=[],this.showOrbitAnglesListener=this._onShowOrbitAnglesChange.bind(this),this.orbitalReferenceFrame=new u.a(new l.a(function(e){return t.getStateByEpoch(e)}),new l.a(function(e){var n=t.getReferenceFrameByEpoch(e).getQuaternionByEpoch(e),a=t.getStateInOwnFrameByEpoch(e);return n.mul_(h.a.twoAxis(a._velocity,null,a._position))})),this.pericentricReferenceFrame=new u.a(new l.a(function(e){return t.getReferenceFrameByEpoch(e).getOriginStateByEpoch(e)}),new l.a(function(e){var n=t.getReferenceFrameByEpoch(e).getQuaternionByEpoch(e),a=t.getKeplerianObjectByEpoch(e);return n.mul_(a.getOrbitalFrameQuaternion())}))}return Object(i.a)(e,[{key:"onClick",value:function(e){this.clickHandler=e,this.visualModel&&this.visualModel.onClick(e)}},{key:"onUpdate",value:function(e){return null}},{key:"addFlightEvent",value:function(e){if(e instanceof T.default||e instanceof P.default){var t=!0,n=!1,a=void 0;try{for(var i,r=this.flightEvents[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;if(s.constructor===e.constructor)return void s.set(e)}}catch(l){n=!0,a=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}var o=!1;for(var c in this.flightEvents)if(this.flightEvents[c].epoch>e.epoch){this.flightEvents.splice(c,0,e),o=!0;break}o||this.flightEvents.push(e),this.visualModel&&this.visualModel.addFlightEvent(e)}},{key:"removeFlightEvent",value:function(e){var t=this.flightEvents.indexOf(e);-1!==t&&this.flightEvents.splice(t,1),this.visualModel&&this.visualModel.removeFlightEvent(e)}},{key:"sortFlightEvents",value:function(){this.flightEvents.sort(function(e,t){return e.epoch<t.epoch?-1:e.epoch>t.epoch?1:0})}},{key:"clearAfterEpoch",value:function(e){var t=[],n=!0,a=!1,i=void 0;try{for(var r,s=this.flightEvents[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;o.epoch<=e?t.push(o):this.visualModel&&this.visualModel.removeFlightEvent(o)}}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}this.flightEvents=t}},{key:"setReferenceFrame",value:function(e){this.referenceFrame=O.a.starSystem.getReferenceFrame(e)}},{key:"getReferenceFrameByEpoch",value:function(e){return this.referenceFrame}},{key:"_transformKeplerianObject",value:function(e,t,n){if(void 0===t)return e;var a=t instanceof M.a?t:O.a.starSystem.getReferenceFrame(t);return void 0===n&&(n=e.epoch),o.a.createFromState(this.referenceFrame.transformStateVectorByEpoch(n,e.getStateByEpoch(n),a),a.mu,n)}},{key:"getKeplerianObjectByEpoch",value:function(e,t){var n=t instanceof M.a?t:void 0!==t?O.a.starSystem.getReferenceFrame(t):this.getReferenceFrameByEpoch(e);return o.a.createFromState(this.getStateByEpoch(e,n),n.mu,e)}},{key:"setVisualModel",value:function(e){this.visualModel=e,this.clickHandler&&this.visualModel.onClick(this.clickHandler);var t=!0,n=!1,a=void 0;try{for(var i,r=this.flightEvents[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;this.visualModel.addFlightEvent(s)}}catch(o){n=!0,a=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"setSelectedVisualModel",value:function(e){this.selectedVisualModel=e,this.isSelected?this.visualModel.hide():e.hide(),this.clickHandler&&e.onClick(this.clickHandler);var t=!0,n=!1,a=void 0;try{for(var i,r=this.flightEvents[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;e.addFlightEvent(s)}}catch(o){n=!0,a=o}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}}},{key:"setParent",value:function(e){this.parent=e}},{key:"setObject",value:function(e){this.object=e}},{key:"drop",value:function(){this.isSelected&&this.deselect(),this.visualModel&&this.visualModel.drop(),this.selectedVisualModel&&this.selectedVisualModel.drop()}},{key:"select",value:function(){this.isSelected=!0,this.selectedVisualModel?(this.visualModel.hide(),this.selectedVisualModel.show(),this.selectedVisualModel.select()):this.visualModel&&this.visualModel.select(),this.keplerianEditor=new w(this),S.a.addListener(S.a.SHOW_ORBIT_ANGLES_CHANGED,this.showOrbitAnglesListener)}},{key:"deselect",value:function(){this.isSelected=!1,this.selectedVisualModel?(this.selectedVisualModel.deselect(),this.selectedVisualModel.hide(),this.visualModel.show()):this.visualModel&&this.visualModel.deselect(),this.keplerianEditor&&(this.keplerianEditor.remove(),delete this.keplerianEditor,S.a.removeListener(S.a.SHOW_ORBIT_ANGLES_CHANGED,this.showOrbitAnglesListener))}},{key:"_onShowOrbitAnglesChange",value:function(e){e.detail.value?this.keplerianEditor.init():this.keplerianEditor.remove()}},{key:"isValidAtEpoch",value:function(e){return(!1===this.minEpoch||e>=this.minEpoch)&&(!1===this.maxEpoch||e<=this.maxEpoch)}},{key:"validateEpoch",value:function(e){if(!this.isValidAtEpoch(e))throw new c.a(this.object,this,e,this.minEpoch,this.maxEpoch)}},{key:"getStateInOwnFrameByEpoch",value:function(e){return this.validateEpoch(e),new r.a}},{key:"getStateByEpoch",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===this.referenceFrame?null:(void 0===t&&(t=s.a),t===s.a&&e===this.cachedEpoch?n=this.cachedState:(n=this.getStateInOwnFrameByEpoch(e),t===s.a&&e===O.a.currentEpoch&&(this.cachedState=n,this.cachedEpoch=e)),null===n?null:this.referenceFrame.transformStateVectorByEpoch(null===a?e:a,n,t))}},{key:"getPositionByEpoch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.getStateByEpoch(e,t,n).position}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e))).quaternionOfEpoch=n,i}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getQuaternionByEpoch",value:function(e){return this.quaternionOfEpoch.evaluate(e)}}]),t}(n(60).a)},function(e,t,n){"use strict";var a=n(38),i=n.n(a),r=n(92),s=n(52),o=n(54),c=n(1),l=n(3),u=function(){function e(t){Object(c.a)(this,e),this._storage=t}return Object(l.a)(e,[{key:"canWatch",value:function(e){return!this._getWatchedWizards().some(function(t){return t===e})}},{key:"markAsWatched",value:function(e){if(this.canWatch(e)){var t=this._getWatchedWizards();t.push(e),this._saveStatuses(t)}}},{key:"_getWatchedWizards",value:function(){var t=this._storage.getItem(e.KEY);return t?JSON.parse(t):[]}},{key:"_saveStatuses",value:function(t){this._storage.setItem(e.KEY,JSON.stringify(t))}}]),e}();u.KEY="urbain-watched-wizards";var h=u,d=n(0),m=n.n(d),p=n(31);n(111);function f(e){var t=document.createElement("div");document.body.appendChild(t);return new Promise(function(n){Object(p.render)(m.a.createElement("div",{className:"language-selector-wrapper"},m.a.createElement("div",{className:"language-selector"},e.map(function(e){var a=e.id,i=e.description,r=e.buttonLabel;return m.a.createElement("div",{key:a,className:"language-selector__row"},m.a.createElement("span",{className:"language-selector__content"},i),m.a.createElement("button",{className:"language-selector__button",onClick:function(){t&&(Object(p.unmountComponentAtNode)(t),t.parentNode.removeChild(t),t=null),n(a)}},r))}))),t)})}var v=n(34),y=function(){function e(t,n){Object(c.a)(this,e),this._goalPrefix=t,this._durationPrefix=n,this._stepStartTimes={},this._metrika=window.yaCounter47040543}return Object(l.a)(e,[{key:"handleStep",value:function(e){if(this._metrika&&void 0===this._stepStartTimes[e]){var t=this._goalPrefix+e;if(this._stepStartTimes[e]=+new Date,0!==e){var n=this._durationPrefix+(e-1);this._metrika.reachGoal(t,Object(v.a)({},n,this._stepStartTimes[e]-this._stepStartTimes[e-1]))}else this._metrika.reachGoal(t)}}}]),e}();n.d(t,"a",function(){return g}),n.d(t,"b",function(){return o});var b=!1;function g(){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(i.a.mark(function e(){var t,a,s,o,c,l,u,d,m,p,v,g=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},a=t.wizardId,s=t.ignoreWatchStatusCheck,o=void 0!==s&&s,c=t.watchStatusService,l=void 0===c?new h(window.localStorage):c,u=t.stepHandlerService,d=void 0===u?new y("tutorial_","duration_tut_"):u,!b&&(l.canWatch(a)||o)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n(113)("./".concat(a,"/index"));case 5:return m=e.sent,p=m.default,b=!0,d.handleStep(0),e.next=11,f(p.langs);case 11:v=e.sent,Promise.all([n(114)("./".concat(a,"/").concat(v)),Promise.all([n.e(14),n.e(9)]).then(n.bind(null,291)),n.e(10).then(n.t.bind(null,292,7))]).then(function(e){var t=Object(r.a)(e,2),n=t[0].default;(0,t[1].createIntroJs)(n,{onStep:function(){d.handleStep(this._currentStep+1)},onComplete:function(){d.handleStep(this._currentStep+2),l.markAsWatched(a),b=!1}}).start()}).catch(function(e){console.error(e.message),b=!1});case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},,,function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var a=n(1),i=n(3),r=n(9),s=n(25),o=n(10),c=0,l=function(){function e(t){Object(a.a)(this,e),this.id=t,this.name=null,this.stars=null,this.mainObject=null,this.referenceFrames={},this.objects={},this.created=0}return Object(i.a)(e,[{key:"unload",value:function(){Object.entries(this.objects).map(function(e){return e[1].drop()}),this.stars&&this.stars.drop()}},{key:"addStars",value:function(e){return this.stars=e,this}},{key:"addReferenceFrame",value:function(e){this.referenceFrames[e.id]=e}},{key:"getReferenceFrame",value:function(e){return void 0===this.referenceFrames[e]&&(this.referenceFrames[e]=r.d.createById(e)),this.referenceFrames[e]}},{key:"addObject",value:function(e,t){this.objects[e]=t,o.a.dispatch(o.a.OBJECT_ADDED,{object:t})}},{key:"getObject",value:function(e){return void 0===this.objects[e]?null:this.objects[e]}},{key:"deleteObject",value:function(e){var t=this;return new Promise(function(n){t.objects[e].drop(),delete t.objects[e],n()})}},{key:"isBody",value:function(e){return void 0===this.objects[e]?null:this.objects[e]instanceof s.a}},{key:"getObjectNames",value:function(){for(var e={},t=Object.values(this.objects),n=0;n<t.length;n++){var a=t[n];e[a.id]=a.name}return e}},{key:"getBodies",value:function(){for(var e=[],t=Object.values(this.objects),n=0;n<t.length;n++){var a=t[n];a instanceof s.a&&e.push(a)}return e}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"GETTING_STARTED_WIZARD",function(){return a}),n.d(t,"getRus",function(){return i}),n.d(t,"getEng",function(){return r});var a="getting-started-wizard";function i(e){return"".concat(e,"-ru")}function r(e){return"".concat(e,"-eng")}},,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this))).setReferenceFrame(e),n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getStateInOwnFrameByEpoch",value:function(e){return this.getKeplerianObjectByEpoch(e).getStateByEpoch(e)}}]),t}(n(48).a)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var a=n(1),i=n(5),r=n(4),s=n(6),o=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(46).a);o._textureName="soi_out.png"},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var a=n(1),i=n(5),r=n(4),s=n(6),o=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(46).a);o._textureName="soi_in.png"},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=n(60),l=n(2),u=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,e))).quaternion=n,i}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getQuaternionByEpoch",value:function(e){return l.a.copy(this.quaternion)}}]),t}(c.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=n(33),l=n(18),u=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this))).stateOfEpoch=e,n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"getOriginPositionByEpoch",value:function(e){return this.stateOfEpoch.evaluate(e).position}},{key:"getOriginStateByEpoch",value:function(e){return this.stateOfEpoch.evaluate(e)}},{key:"stateVectorFromBaseReferenceFrameByEpoch",value:function(e,t){var n=this.stateOfEpoch.evaluate(e),a=this.getQuaternionByEpoch(e).invert_();return new l.a(a.rotate(t.position.sub_(n.position)),a.rotate(t.velocity.sub_(n.velocity)))}},{key:"stateVectorToBaseReferenceFrameByEpoch",value:function(e,t){var n=this.stateOfEpoch.evaluate(e),a=this.getQuaternionByEpoch(e);return new l.a(a.rotate(t.position).add_(n.position),a.rotate(t.velocity).add_(n.velocity))}}]),t}(c.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(1),i=function e(t,n,i,r,s){Object(a.a)(this,e),this.object=t,this.trajectory=n,this.epoch=i,this.minEpoch=r,this.maxEpoch=s}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(6),c=n(7),l=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"raycast",value:function(e,t){for(var n,a=this.geometry.isBufferGeometry,i=a?this.geometry.attributes.position.count:this.geometry.vertices.length,r=(new c.x).copy(e.ray).applyMatrix4((new c.m).getInverse(this.matrixWorld)),s=0;s<i-1;s++){var o=void 0,l=void 0;if(a){var u=3*s,h=(s+1)%i*3,d=this.geometry.attributes.position.array;o=new c.F(d[u],d[u+1],d[u+2]),l=new c.F(d[h],d[h+1],d[h+2])}else o=(new c.F).copy(this.geometry.vertices[s]),l=(new c.F).copy(this.geometry.vertices[(s+1)%i]);var m=(new c.F).subVectors(o,l);if(0!==m.length()){var p=(new c.F).crossVectors(m,r.direction),f=(new c.F).crossVectors(r.direction,p),v=(new c.F).subVectors(r.origin,o).dot(f);v/=f.clone().dot(m);var y=(new c.F).addVectors(o,m.multiplyScalar(v));(new c.F).subVectors(o,y).dot((new c.F).subVectors(y,l))<0&&(y=y.distanceTo(o)<y.distanceTo(l)?o:l);var b=(new c.F).crossVectors((new c.F).subVectors(y,r.origin),r.direction).length();(!n||n.distance>b)&&(n={distance:b,point:y,index:s,face:null,faceIndex:null,object:this})}}n&&n.distance/r.origin.distanceTo(n.point)<e.pixelPrecision*e.pixelAngleSize&&(n.point.applyMatrix4(this.matrixWorld),t.push(n))}}]),t}(c.j)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),i=n(3),r=function(){function e(t){Object(a.a)(this,e),this._epoch=t||!1,this._updateCallback=!1,this._visualModel=null}return Object(i.a)(e,[{key:"onUpdate",value:function(e){return this._updateCallback=e,this}},{key:"set",value:function(e){return this._epoch=e._epoch,this}},{key:"copy",value:function(){return(new this.constructor).set(this)}},{key:"getVisualClass",value:function(){return this.constructor.VISUAL_CLASS}},{key:"epoch",set:function(e){var t=this.copy();this._epoch=e,this._updateCallback&&this._updateCallback(this,t)},get:function(){return this._epoch}},{key:"visualModel",set:function(e){this._visualModel=e},get:function(){return this._visualModel}}]),e}();r.VISUAL_CLASS=null},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),i=n(5),r=n(4),s=n(6),o=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(65).a);o._textureName="pe.png",o._alignVertical="top",o._alignHorizontal="center"},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(1),i=n(3),r=n(5),s=n(4),o=n(12),c=n(6),l=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(r.a)(this,Object(s.a)(t).call(this,n)))._parent=e,i.threeObj&&i._parent.add(i.threeObj),i._isEnabled=!1,i.hide(),i}return Object(c.a)(t,e),Object(i.a)(t,[{key:"setThreeObj",value:function(e){this.threeObj=e,this._parent&&this._parent.add(this.threeObj),!this._isHidden&&this._isEnabled||(this.threeObj.visible=!1)}},{key:"setPosition",value:function(e){this.threeObj&&this.threeObj.position.copy(e)}},{key:"enable",value:function(){this._isEnabled=!0,this._isHidden||(this.threeObj.visible=!0)}},{key:"disable",value:function(){this._isEnabled=!1,this.threeObj.visible=!1}},{key:"show",value:function(){Object(o.a)(Object(s.a)(t.prototype),"show",this).call(this),this._isEnabled||(this.threeObj.visible=!1)}}]),t}(n(68).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),i=n(5),r=n(4),s=n(6),o=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(65).a);o._textureName="ap.png",o._alignVertical="bottom",o._alignHorizontal="center"},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(1),i=n(5),r=n(4),s=n(6),o=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(n(46).a);o._textureName="burn.png"},function(e,t,n){"use strict";var a=n(1),i=n(5),r=n(4),s=n(3),o=n(6),c=n(12),l=n(7),u=n(19),h=n(8),d=function(e){function t(e,n,s,o,c,l){var u;return Object(a.a)(this,t),(u=Object(i.a)(this,Object(r.a)(t).call(this))).positionOfEpoch=e,u.verticalAlign=o||"center",u.horizontalAlign=c||"center",u.scale=l||1,u.color=s||16777215,u.loadTexture(n),u}return Object(o.a)(t,e),Object(s.a)(t,[{key:"loadTexture",value:function(e){var t=this;e&&h.a.textureLoader.load(e,function(e){t.setTexture(e)})}},{key:"setTexture",value:function(e){this._dropped||(this.setThreeObj(new l.B(new l.C({map:e,sizeAttenuation:!1,color:this.color}))),this.setScale(this.scale),this.updateCenter())}},{key:"updateCenter",value:function(){this.threeObj&&this.threeObj.center.set("right"===this.horizontalAlign?0:"left"===this.horizontalAlign?1:.5,"top"===this.verticalAlign?0:"bottom"===this.verticalAlign?1:.5)}},{key:"setScale",value:function(e){this.scale=e,this.threeObj.scale.set(this.threeObj.material.map.image.width/800*this.scale,this.threeObj.material.map.image.height/800*this.scale,1)}},{key:"setColor",value:function(e){this.color=e,this.threeObj.material.color.set(this.color),this.threeObj.material.needsUpdate=!0}},{key:"setAlign",value:function(e,t){this.verticalAlign=e,this.horizontalAlign=t,this.updateCenter()}},{key:"setPositionOfEpoch",value:function(e){this.positionOfEpoch=e}},{key:"render",value:function(e){this.positionOfEpoch&&this.setPosition(this.positionOfEpoch.evaluate(e))}},{key:"drop",value:function(){Object(c.a)(Object(r.a)(t.prototype),"drop",this).call(this),this._dropped=!0}}]),t}(u.a);n.d(t,"a",function(){return m});var m=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,null,null,e))).setAlign(n.constructor._alignVertical,n.constructor._alignHorizontal),n.constructor._texture?n.setTexture(n.constructor._texture):n.loadTexture("images/"+n.constructor._textureName),n}return Object(o.a)(t,e),Object(s.a)(t,null,[{key:"preloadTexture",value:function(){var e=this;h.a.textureLoader.load("images/"+this._textureName,function(t){e._texture=t})}}]),t}(d);m._texture=null,m._textureName=null,m._alignVertical="center",m._alignHorizontal="center"},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1),i=n(3),r=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"getQuaternionByEpoch",value:function(e){}}]),e}()},,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1),i=n(3),r=n(20),s=n.n(r),o=n(9),c=n(25),l=n(5),u=n(4),h=n(6),d=n(72),m=n(2),p=function(e){function t(e){var n;Object(a.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this));var i=new m.c(e.vector);return n.axisQuaternion=m.a.transfer(new m.c([0,0,1]),i),n.angularSpeed=i.mag,n.initialAngle=e.angle||0,n.initialEpoch=e.epoch||0,n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getQuaternionByEpoch",value:function(e){return this.axisQuaternion.mul(new m.a([0,0,1],this.initialAngle+(e-this.initialEpoch)*this.angularSpeed))}}]),t}(d.a),f=function e(t){Object(a.a)(this,e),this.mu=t.mu,this.radius=t.radius,this.eqRadius=t.eqRadius,this.j2=t.j2||0},v=n(17),y=n(56),b=n(24),g=n(18),E=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).keplerianObjects=[],n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"addState",value:function(e){this.keplerianObjects.push(e)}},{key:"getKeplerianObjectByEpoch",value:function(e,t){this.validateEpoch(e);var n=Math.ceil((e-this.keplerianObjects[0].epoch)/(this.keplerianObjects[this.keplerianObjects.length-1].epoch-this.keplerianObjects[0].epoch)*(this.keplerianObjects.length-1));n<0&&(n=0),n>this.keplerianObjects.length-1&&(n=this.keplerianObjects.length-1);for(var a=this.keplerianObjects[n].epoch>e?-1:1;n<this.keplerianObjects.length&&n>=0;){if(this.keplerianObjects[n].epoch==e)return this.keplerianObjects[n];if(this.keplerianObjects[n].epoch>e&&(0===n||this.keplerianObjects[n-1].epoch<e))break;n+=a}return n!==this.keplerianObjects.length&&0!==n||(n-=a),this._transformKeplerianObject(this.approximateKeplerianObject(this.keplerianObjects[n-1],this.keplerianObjects[n],e),t)}},{key:"approximateKeplerianObject",value:function(e,t,n){var a=(n-e.epoch)/(t.epoch-e.epoch);if(.95<e.ecc&&e.ecc<1.05||.95<t.ecc&&t.ecc<1.05||e.isElliptic!==t.isElliptic){var i=e.getStateByEpoch(n),r=t.getStateByEpoch(n);return b.a.createFromState(new g.a(i.position.mul_(1-a).add_(r.position.mul_(a)),i.velocity.mul_(1-a).add_(r.velocity.mul_(a))),Object(m.f)(e.mu,t.mu,a),n)}var s=e.isElliptic?Object(m.e)(e.getMeanAnomalyByEpoch(n),t.getMeanAnomalyByEpoch(n),a):Object(m.f)(e.getMeanAnomalyByEpoch(n),t.getMeanAnomalyByEpoch(n),a);return new b.a(Object(m.f)(e.ecc,t.ecc,a),Object(m.f)(e.sma,t.sma,a),Object(m.e)(e.aop,t.aop,a),Object(m.e)(e.inc,t.inc,a),Object(m.e)(e.raan,t.raan,a),s,n,Object(m.f)(e.mu,t.mu,a),!1)}}]),t}(y.a),j=n(12),O=function(e){function t(e,n,i){var r;return Object(a.a)(this,t),(r=Object(l.a)(this,Object(u.a)(t).call(this,e))).r=n,r.j2=i,r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"approximateKeplerianObject",value:function(e,n,a){var i=e.copy(),r=n.copy();return i.raan+=i.getNodalPrecessionByEpoch(this.r,this.j2,a),r.raan+=r.getNodalPrecessionByEpoch(this.r,this.j2,a),Object(j.a)(Object(u.a)(t.prototype),"approximateKeplerianObject",this).call(this,i,r,a)}}]),t}(E),_=n(28),k=function(e){function t(e,n,i,r){var s;return Object(a.a)(this,t),(s=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).r=i,s.j2=r,s}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getKeplerianObjectByEpoch",value:function(e,t){return this.validateEpoch(e),this._transformKeplerianObject(this.keplerianObject.addPrecession(this.r,this.j2,e),t)}}],[{key:"createFromState",value:function(e,n,a,i,r,s,o){return new t(e,b.a.createFromState(n,a,s),i,r,o)}}]),t}(_.a),w=n(43),M=n(47),S=n(8),T=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).referenceFrame=S.a.starSystem.getReferenceFrame(n.referenceFrame),i.showAhead=n.showAhead,i.showBehind=n.showBehind,i.trailPeriod=n.trailPeriod,i.minCos=Math.cos(Object(m.g)(n.maxAngle||2)),i.minStep=n.minStep||180,i.threeObj.position.set(0,0,0),i.initVertices(),i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"select",value:function(){Object(j.a)(Object(u.a)(t.prototype),"select",this).call(this),this.showAhead=!0,this.showBehind=!0}},{key:"deselect",value:function(){Object(j.a)(Object(u.a)(t.prototype),"deselect",this).call(this),this.showAhead=this.config.showAhead,this.showBehind=this.config.showBehind}},{key:"render",value:function(e){Object(j.a)(Object(u.a)(t.prototype),"render",this).call(this,e);var n=this.getPositionEpoch(e);if(!1!==n){for(var a=this.showBehind?.4:0,i=this.referenceFrame.getOriginPositionByEpoch(e),r=[],s=[],o=0;o<this.positions.length;++o)if(this.epochs[o]<n-this.trailPeriod?(this.showBehind&&(r.push(this.positions[o]),s.push(0)),this.epochs[o+1]>n-this.trailPeriod&&(r.push(this.trajectory.getPositionByEpoch(n-this.trailPeriod,this.referenceFrame)),s.push(0))):this.epochs[o]<n?(r.push(this.positions[o]),s.push(1-(n-this.epochs[o])/this.trailPeriod)):this.epochs[o]>n&&this.showAhead&&(r.push(this.positions[o]),s.push(0)),this.epochs[o]<n&&this.epochs[o+1]>=n){var c=this.trajectory.getPositionByEpoch(n,this.referenceFrame);r.push(c),r.push(c),s.push(1),s.push(0)}this.updateGeometry(r,s,a),this.threeObj.quaternion.copy(this.referenceFrame.getQuaternionByEpoch(e).toThreejs()),this.setPosition(i)}else this.threeObj.visible=!1}},{key:"findPointByEpoch",value:function(e){var t=0,n=this.epochs.length-1,a=Math.floor((t+n)/2);do{if(this.epochs[a]<e)t=a;else{if(!(this.epochs[a]>e))return a;n=a}a=Math.floor((t+n)/2)}while(a!=t);return e-this.epochs[a]>this.epochs[a+1]-e?a+1:a}},{key:"initVertices",value:function(){var e=this.trajectory,t=this.minStep,n=e.minEpoch,a=e.getStateByEpoch(n,this.referenceFrame),i=a.velocity.unit_();this.positions=[a.position],this.epochs=[n];for(var r=1;n<e.maxEpoch;){for(var s=void 0,o=void 0,c=null,l=20;;){var u=n+t>e.maxEpoch?e.maxEpoch:n+t;t=u-n;var h=e.getStateByEpoch(u,this.referenceFrame),d=h._position.sub(a._position),m=d.mag,p=d.dot(i)/m;if(u!=e.maxEpoch){var f=u+t>e.maxEpoch?e.maxEpoch:u+t,v=e.getStateByEpoch(f,this.referenceFrame)._position.sub(h._position);p=Math.min(p,d.dot(v)/m/v.mag)}if(p<this.minCos){if(!0===c)break;t/=2,c=!1}else{if(s=h,o=u,m,!1===c||u===e.maxEpoch)break;t*=2,c=!0}if(0===--l||Math.abs(t)<this.minStep){t=this.minStep*Math.sign(t),void 0===s&&(s=h,o=u,m);break}}this.epochs[r]=o,this.positions[r]=s.position,i=(a=s).velocity.unit_(),n=o,r++}}}]),t}(M.a),P=n(30),A=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this))).setReferenceFrame(e),i.pos=n,i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getStateInOwnFrameByEpoch",value:function(e){return this.validateEpoch(e),new g.a(this.pos)}}]),t}(n(48).a),C=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"create",value:function(e){var t,n,a,i=e.type;if("keplerian"===i)t=this.createKeplerianBasic(e);else if("keplerian_precessing"===i)t=this.createKeplerianPrecessing(e);else if("keplerian_array"===i)t=this.createKeplerianArray(e);else if("keplerian_precessing_array"===i)t=this.createKeplerianPrecessingArray(e);else if("composite"===i)t=this.createComposite(e);else if("static"===i)t=this.createStatic(e);else{t=new(S.a.getClass(i))(e.data)}return void 0!==e.periodStart&&(t.minEpoch=e.periodStart),void 0!==e.periodEnd&&(t.maxEpoch=e.periodEnd),e.rendering&&(e.visual=e.rendering),void 0!==e.visual&&(void 0!==e.visual.regular?(n=this.createVisualModel(t,e.visual.regular),a=this.createVisualModel(t,e.visual.selected)):n=this.createVisualModel(t,e.visual)),n&&t.setVisualModel(n),a&&t.setSelectedVisualModel(a),t}},{key:"createVisualModel",value:function(e,t){return t.keplerianModel?new P.a(e,t):t.pointArrayModel?new T(e,t):new("keplerian"===t.model?P.a:"pointArray"===t.model?T:S.a.getClass(t.model))(e,t.config)}},{key:"createComposite",value:function(e){var t=new w.a,n=!0,a=!1,i=void 0;try{for(var r,s=e.data[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;t.addComponent(this.create(o))}}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}},{key:"createKeplerianArray",value:function(e){var t=new E(e.data.referenceFrame),n=!0,a=!1,i=void 0;try{for(var r,s=e.data.elementsArray[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;t.addState(this.createKeplerianObject(o,e.data.mu))}}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}},{key:"createKeplerianPrecessingArray",value:function(e){var t=new O(e.data.referenceFrame,e.data.radius,e.data.j2),n=!0,a=!1,i=void 0;try{for(var r,s=e.data.elementsArray[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;t.addState(this.createKeplerianObject(o,e.data.mu))}}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}},{key:"createKeplerianBasic",value:function(e){return new _.a(e.data.referenceFrame,this.createKeplerianObject(e.data.elements))}},{key:"createKeplerianPrecessing",value:function(e){return new k(e.data.referenceFrame,this.createKeplerianObject(e.data.elements),e.data.radius,e.data.j2)}},{key:"createStatic",value:function(e){return new A(e.data.referenceFrame,new m.c(e.data.position))}},{key:"createKeplerianObject",value:function(e,t){return new b.a(e[0],e[1]/(1-e[0]),e[2],e[3],e[4],e[5],e[6],t||e[7],!1)}}]),e}(),x=n(7),D=n(19),B=function(e){function t(e){var n;Object(a.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this));var i=new x.i,r=!0,s=!1,o=void 0;try{for(var c,h=e[Symbol.iterator]();!(r=(c=h.next()).done);r=!0){var d=c.value;i.vertices.push(new x.F(1e12*Math.cos(Object(m.g)(d[0]))*Math.cos(Object(m.g)(d[1])),1e12*Math.sin(Object(m.g)(d[0]))*Math.cos(Object(m.g)(d[1])),1e12*Math.sin(Object(m.g)(d[1])))),i.colors.push(new x.f(d[2]/50,d[2]/50,d[2]/50))}}catch(p){s=!0,o=p}finally{try{r||null==h.return||h.return()}finally{if(s)throw o}}return n.setThreeObj(new x.u(i,new x.v({vertexColors:x.G,size:2,sizeAttenuation:!1}))),n.threeObj.quaternion.copy(new m.a([-1,0,0],Object(m.g)(23.4)).toThreejs()),n}return Object(h.a)(t,e),t}(D.a),N=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this))).visible=!0,i.parameters=Object.assign({},t.DEFAULT_SETTINGS,n),i.positionOfEpoch=e,i.canvas=document.createElement("canvas"),i.setThreeObj(new x.B(new x.C({map:new x.d(i.canvas)}))),i.threeObj.renderOrder=1,i.setText(i.parameters.text),i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"setText",value:function(e){var t=this.canvas.getContext("2d");t.font=this.parameters.fontSize+"px "+this.parameters.font;var n=t.measureText(e).width,a=this.parameters.fontSize*(1+this.parameters.margin)*2;this.canvas.width=x.l.ceilPowerOfTwo(n),this.canvas.height=x.l.ceilPowerOfTwo(a),t.font=this.parameters.fontSize+"px "+this.parameters.font,t.fillStyle=this.parameters.color,t.textAlign="center",t.textBaseline="bottom",t.fillText(e,this.canvas.width/2,this.parameters.fontSize+(this.canvas.height-a)/2),this.threeObj.material.map.needsUpdate=!0}},{key:"render",value:function(e){if(this.visible){this.setPosition(this.positionOfEpoch.evaluate(e));var t=this.threeObj.position.length(),n=this.calculateScaleCoeff(t,this.parameters.scaling)/2;this.threeObj.scale.x=this.canvas.width*n,this.threeObj.scale.y=this.canvas.height*n,this.threeObj.visible=1<Math.max(this.threeObj.scale.x,this.threeObj.scale.y)/(t*this.pixelAngleSize)/2}else this.threeObj.visible=!1}},{key:"calculateScaleCoeff",value:function(e,n){return"string"===typeof n.callback?t.scalingFunctions[n.callback](e,n.range):n.callback(e,n.range)}}]),t}(D.a);N.DEFAULT_SETTINGS={text:"",font:"Arial",color:"white",fontSize:32,margin:0,scaling:{range:{from:3e4,to:7e5},callback:"range"}},N.scalingFunctions={alwaysVisible:function(e){return e*S.a.raycaster.getPixelAngleSize()},range:function(e,t){return e<t.from?t.from*S.a.raycaster.getPixelAngleSize():e>t.to?t.to*S.a.raycaster.getPixelAngleSize():e*S.a.raycaster.getPixelAngleSize()}};var I=n(21),F=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this))).shape=e,i.color=n.color,i.body=null,i.setThreeObj(i.getThreeObj()),i.threeObj.add(new x.c(2*e.radius)),i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getThreeObj",value:function(){return new x.n(this.shape.getThreeGeometry(),this.getMaterial({color:this.color,wireframe:!0}))}},{key:"setObject",value:function(e){var t=this;this.body=e,this.label=new N(new I.a(function(n){return e.getPositionByEpoch(n).add_(S.a.camera.getTopDirection(n).mul_(t.shape.getMaxDimension()/2))}),{text:this.body.name,margin:.3,scaling:this.body.type===v.a.TYPE_STAR||this.body.type===v.a.TYPE_PLANET?{callback:"alwaysVisible"}:this.body.type===v.a.TYPE_PLANETOID||this.body.type===v.a.TYPE_SATELLITE?{callback:"range",range:{from:5*this.shape.getMaxDimension(),to:1e3*this.shape.getMaxDimension()}}:N.DEFAULT_SETTINGS.scaling}),this.threeObj.userData={selectionObject:e},S.a.selection.addSelectableObject(this.threeObj)}},{key:"getMaterial",value:function(e){return new x.p(e)}},{key:"drop",value:function(){this.label&&this.label.drop(),S.a.selection.removeSelectableObject(this.threeObj),Object(j.a)(Object(u.a)(t.prototype),"drop",this).call(this)}},{key:"render",value:function(e){this.label&&(this.label.visible=S.a.settings.ui.showBodyLabels),this.setPosition(this.body.getPositionByEpoch(e)),this.threeObj.quaternion.copy(this.body.orientation.getQuaternionByEpoch(e).toThreejs())}}]),t}(D.a),L=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).texturePath=n.texturePath,i.isTextureRequested=!1,i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getMaterial",value:function(e){return e.metalness=0,e.roughness=1,new x.p(e)}},{key:"render",value:function(e){var n=this;Object(j.a)(Object(u.a)(t.prototype),"render",this).call(this,e),!this.isTextureRequested&&this.texturePath&&this.shape.getMaxDimension()/this.threeObj.position.length()>this.pixelAngleSize&&(this.isTextureRequested=!0,S.a.textureLoader.load(D.a.texturePath+this.texturePath,function(e){n.threeObj&&(n.threeObj.material.dispose(),n.threeObj.material=n.getMaterial({map:e}))},void 0,function(e){console.log(e)}))}}]),t}(F),R=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).light=new x.t(n.lightColor,n.lightIntensity,n.lightDistance||null,n.lightDecay||null),i.scene.add(i.light),i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(e){Object(j.a)(Object(u.a)(t.prototype),"render",this).call(this,e),this.light.position.copy(S.a.getVisualCoords(this.body.getPositionByEpoch(e)))}},{key:"getMaterial",value:function(e){return new x.o(e)}},{key:"drop",value:function(){this.scene.remove(this.light),Object(j.a)(Object(u.a)(t.prototype),"drop",this).call(this)}}]),t}(L),q=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).texturePath=n.texturePath,i.ringsRadius=n.ringsRadius,i.ringsColorMapPath=n.ringsColorMapPath,i.ringsAlphaMapPath=n.ringsAlphaMapPath,i.isTextureRequested=!1,i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getThreeObj",value:function(){var e=new x.q;return this.bodyThreeObj=new x.n(this.shape.getThreeGeometry(),this.getMaterial({color:this.color,wireframe:!0})),this.ringsThreeObj=new x.n(new x.e(140220,64),this.getMaterial({color:this.color,wireframe:!0})),e.add(this.bodyThreeObj),e.add(this.ringsThreeObj),e}},{key:"updateRingsMaterial",value:function(){this.ringsColorMap&&this.ringsAlphaMap&&(this.ringsThreeObj.material.dispose(),this.ringsThreeObj.material=this.getMaterial({map:this.ringsColorMap,alphaMap:this.ringsAlphaMap,side:x.g,transparent:!0}))}},{key:"getMaterial",value:function(e){return e.metalness=0,e.roughness=1,new x.p(e)}},{key:"render",value:function(e){var n=this;Object(j.a)(Object(u.a)(t.prototype),"render",this).call(this,e),!this.isTextureRequested&&this.texturePath&&this.shape.getMaxDimension()/this.threeObj.position.length()>this.pixelAngleSize&&(this.isTextureRequested=!0,S.a.textureLoader.load(D.a.texturePath+this.texturePath,function(e){n.bodyThreeObj.material.dispose(),n.bodyThreeObj.material=n.getMaterial({map:e})},void 0,function(e){console.log(e)}),S.a.textureLoader.load(D.a.texturePath+this.ringsColorMapPath,function(e){n.ringsColorMap=e,n.updateRingsMaterial()},void 0,function(e){console.log(e)}),S.a.textureLoader.load(D.a.texturePath+this.ringsAlphaMapPath,function(e){n.ringsAlphaMap=e,n.updateRingsMaterial()},void 0,function(e){console.log(e)}))}}]),t}(F),V=function(e){function t(e,n){var i;return Object(a.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this))).radius=e,i.segments=n,i}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getThreeGeometry",value:function(){return this.threeGeometry||(this.threeGeometry=new x.A(this.radius,2*this.segments,this.segments),this.threeGeometry.rotateX(Math.PI/2)),this.threeGeometry}},{key:"getMaxDimension",value:function(){return 2*this.radius}}]),t}(function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"getThreeGeometry",value:function(){}},{key:"getMaxDimension",value:function(){}}]),e}()),U=n(10),z=n(53);n.d(t,"a",function(){return Y});var Y=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"loadFromConfig",value:function(e,t){e.name=t.name,e.mainObject=t.mainObject,e.addObject(z.a,new v.a(z.a,v.a.TYPE_POINT,"Star system barycenter"));var n=!0,a=!1,i=void 0;try{for(var r,s=t.objects[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var c=r.value;this._loadObject(e,c)}}catch(O){a=!0,i=O}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}U.a.dispatch(U.a.LOADING_BODIES_DONE),e.addReferenceFrame(o.b);var l=!0,u=!1,h=void 0;try{for(var d,m=t.referenceFrames[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var p=d.value;e.addReferenceFrame(o.d.create(p.id,p.type,p.config))}}catch(O){u=!0,h=O}finally{try{l||null==m.return||m.return()}finally{if(u)throw h}}U.a.dispatch(U.a.LOADING_FRAMES_DONE);var f=!0,y=!1,b=void 0;try{for(var g,E=t.objects[Symbol.iterator]();!(f=(g=E.next()).done);f=!0){var j=g.value;e.getObject(j.id).setTrajectory(C.create(j.trajectory))}}catch(O){y=!0,b=O}finally{try{f||null==E.return||E.return()}finally{if(y)throw b}}U.a.dispatch(U.a.LOADING_TRAJECTORIES_DONE),e.addStars(new B(t.stars))}},{key:"loadObjectByUrl",value:function(e,t){var n=this;return Promise.resolve(s.a.getJSON(t,function(t){n._loadObject(e,t),e.getObject(t.id).setTrajectory(C.create(t.trajectory))}))}},{key:"_loadObject",value:function(e,t){var n,a=null,i=null,r=null;if(t.visual){var s=new V(t.visual.config.radius,t.visual.config.texturePath?32:12),o={basic:L,light:R,rings:q}[t.visual.model];void 0!==o&&(a=new o(s,t.visual.config))}(t.physical||t.orientation)&&(t.orientation||(t.orientation={type:"constantAxis",config:{vector:[0,0,1e-11]}}),r=new("constantAxis"===t.orientation.type?p:S.a.getClass(t.orientation.type))(t.orientation.config));t.physical&&(i=new f(t.physical)),n=a||i||r?new c.a(t.id,t.type||v.a.TYPE_UNKNOWN,t.name,t.data,a,i,r):new v.a(t.id,t.type||v.a.TYPE_UNKNOWN,t.name,t.data),e.addObject(t.id,n)}}]),e}()},function(e,t,n){"use strict";var a=n(1);t.a=function e(t){var n;Object(a.a)(this,e),Object.assign(this,{noradId:(n=t).norad_id,objectType:n.object_type,intlDes:n.intl_des,name:n.name,country:n.country,launchDate:n.launch_date,decayDate:n.decay_date,launchSite:n.launch_site,period:n.period,inc:n.inc,apogee:n.apogee,perigee:n.perigee,launchYear:n.launch_year,launchNum:n.launch_num,launchPiece:n.launch_piece,objectName:n.object_name,objectId:n.object_id,objectNumber:n.object_number},{})}},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(190)},function(e,t,n){var a={"./KSP/ModuleKSP":[99,2],"./KSP/ModuleKSP.js":[99,2],"./PatchedConics/FlightEvent/SOIArrival":[42],"./PatchedConics/FlightEvent/SOIArrival.js":[42],"./PatchedConics/FlightEvent/SOIChangeAbstract":[44],"./PatchedConics/FlightEvent/SOIChangeAbstract.js":[44],"./PatchedConics/FlightEvent/SOIDeparture":[41],"./PatchedConics/FlightEvent/SOIDeparture.js":[41],"./PatchedConics/ModulePatchedConics":[100,3],"./PatchedConics/ModulePatchedConics.js":[100,3],"./PatchedConics/PropagatorPatchedConics":[96,4],"./PatchedConics/PropagatorPatchedConics.js":[96,4],"./PatchedConics/visual/FlightEvent/SOIArrival":[58],"./PatchedConics/visual/FlightEvent/SOIArrival.js":[58],"./PatchedConics/visual/FlightEvent/SOIDeparture":[57],"./PatchedConics/visual/FlightEvent/SOIDeparture.js":[57],"./SolarSystem/ModuleSolarSystem":[94,0],"./SolarSystem/ModuleSolarSystem.js":[94,0],"./SolarSystem/Orientation/IAUModel":[95,5],"./SolarSystem/Orientation/IAUModel.js":[95,5],"./SolarSystem/Trajectory/ELP2000":[97,0],"./SolarSystem/Trajectory/ELP2000.js":[97,0],"./SolarSystem/Trajectory/VSOP87":[98,0],"./SolarSystem/Trajectory/VSOP87.js":[98,0]};function i(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(a)},i.id=104,e.exports=i},,,,,,,function(e,t,n){},,function(e,t,n){var a={"./getting-started-wizard/index":[55,1]};function i(e){var t=a[e];return t?n.e(t[1]).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(a)},i.id=113,e.exports=i},function(e,t,n){var a={"./getting-started-wizard":[55,1],"./getting-started-wizard/":[55,1],"./getting-started-wizard/getting-started-wizard-eng":[101,6],"./getting-started-wizard/getting-started-wizard-eng.js":[101,6],"./getting-started-wizard/getting-started-wizard-ru":[102,7],"./getting-started-wizard/getting-started-wizard-ru.js":[102,7],"./getting-started-wizard/index":[55,1],"./getting-started-wizard/index.js":[55,1],"./wizard-ids":[54],"./wizard-ids.js":[54]};function i(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(a)},i.id=114,e.exports=i},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(23),i=n(1),r=n(3),s=n(5),o=n(4),c=n(6),l=n(0),u=n.n(l),h=n(31),d=n.n(h),m=n(32),p=n(40);var f=n(22),v=n(86),y=n.n(v),b=(n(115),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).elementRef=u.a.createRef(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.elementRef.current.appendChild(this.props.stats.dom)}},{key:"componentWillUnmount",value:function(){this.elementRef=null}},{key:"render",value:function(){return u.a.createElement("div",{ref:this.elementRef,className:"statistics-badge"})}}]),t}(l.Component)),g=function(){return u.a.createElement(f.b.Consumer,null,function(e){var t=e.store,n=e.stats;return t.viewSettings.showStatistics?u.a.createElement(b,{stats:n}):null})};var E=n(38),j=n.n(E),O=n(52),_=n(87),k=n.n(_),w=function(){function e(){Object(i.a)(this,e),this._params={}}return Object(r.a)(e,[{key:"addWithValue",value:function(e,t){return this._params["fields[".concat(e,"][value]")]=t,this}},{key:"addWithRelation",value:function(e,t,n){return this.addWithValue(e,n),this._params["fields[".concat(e,"][relation]")]=t,this}},{key:"orderBy",value:function(e){return this._params.order=e,this}},{key:"limit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this._params.limit=e,this}},{key:"build",value:function(){return this._params}}]),e}(),M="Number",S="String",T="Date",P={GreaterThan:">",LessThan:"<",Equal:"="};P.allValues=Object.values(P);var A={GreaterThan:">",LessThan:"<",Equal:"="};A.allValues=Object.values(A);var C={Equal:"=",Like:"like"};C.allValues=Object.values(C);var x={name:"name",noradId:"norad_id",launchDate:"launch_date"};x.allValues=Object.values(x),x.allKeys=Object.keys(x);var D=new Map([[x.noradId,{type:M}],[x.objectType,{type:M}],[x.intlDes,{type:S}],[x.name,{type:S}],[x.country,{type:S}],[x.launchDate,{type:T}],[x.decayDate,{type:T}],[x.launchSite,{type:S}],[x.period,{type:M}],[x.inc,{type:M}],[x.apogee,{type:M}],[x.launchYear,{type:M}],[x.launchNum,{type:M}],[x.launchPiece,{type:S}],[x.objectName,{type:S}],[x.objectId,{type:S}],[x.objectNumber,{type:M}]]),B=function(){function e(t){Object(i.a)(this,e),this._fieldName=t}return Object(r.a)(e,[{key:"fieldName",get:function(){return this._fieldName}},{key:"fieldType",get:function(){return e.AllFields.get(this._fieldName).type}},{key:"relations",get:function(){switch(e.AllFields.get(this._fieldName).type){case M:return P.allValues;case S:return C.allValues;case T:return A.allValues;default:return[]}}}]),e}();B.AllFields=D;var N=n(85),I=function(){function e(t){Object(i.a)(this,e),this._apiUrl=t}return Object(r.a)(e,[{key:"findSatellites",value:function(){var e=Object(O.a)(j.a.mark(function e(t){var n,a,i,r,s,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.noradId,a=t.name,i=t.launchDate,e.prev=1,r=this._createParams({noradId:n,name:a,launchDate:i}),e.next=5,k.a.get(this._apiUrl,{params:r});case 5:return s=e.sent,o=s.data,e.abrupt("return",this._prepareResult(o));case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchSettings",value:function(){var e=Object(O.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(x.allValues.map(function(e){return new B(e)})));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_prepareResult",value:function(e){if(this._isOk(e)){var t=e.result;return{totalRows:t.total_rows,satellites:t.satellites.map(function(e){return new N.a(e)})}}if(this._isError(e))return console.error(e.message),{totalRows:1,satellites:[]};throw new Error("Unknown status code")}},{key:"_createParams",value:function(e){var t=e.noradId,n=e.launchDate,a=e.name,i=new w;return t&&i.addWithRelation(x.noradId,P.Equal,t),n&&i.addWithRelation(x.launchDate,P.Equal,n),a&&i.addWithRelation(x.name,C.Like,a),i.limit(100),i.build()}},{key:"_isOk",value:function(e){return"ok"===e.status}},{key:"_isError",value:function(e){return"error"===e.status}}]),e}();var F=n(50),L=n(11),R=n.n(L),q=function(e){var t=e.className;return u.a.createElement("div",{className:t})},V=n(35),U=n(13),z=n.n(U),Y=n(51),H="var(--black)",K="var(--white-text)",Q=24,W={container:function(e){return Object(V.a)({},e,{background:H,color:K,minHeight:Q,height:Q,minWidth:50})},control:function(e){return Object(V.a)({},e,{background:H,borderRadius:0,borderStyle:"none",minHeight:Q,height:Q})},menu:function(e){return Object(V.a)({},e,{borderRadius:0,marginTop:0,marginBottom:0})},menuList:function(e){return Object(V.a)({},e,{background:"var(--dark-gray)"})},option:function(e,t){return Object(V.a)({},e,{backgroundColor:t.isFocused?"var(--gray)":"transparent"})},singleValue:function(e,t){var n=t.isDisabled?.5:1;return Object(V.a)({},e,{color:K,opacity:n,transition:"opacity 300ms"})},dropdownIndicator:function(){return{padding:0,background:'url("/images/chevron-down-solid.svg") 0 0 no-repeat',marginRight:5,height:10,width:10}},indicatorSeparator:function(){return{display:"none"}}},G=function(e){return Y.a.IndicatorsContainer&&u.a.createElement(Y.a.IndicatorsContainer,e)},X=function(e){return Y.a.DropdownIndicator&&u.a.createElement(Y.a.DropdownIndicator,e,u.a.createElement("span",null))},Z=(z.a.shape({label:z.a.string,value:z.a.string}),function(e){var t=e.id,n=e.className,a=e.options,i=e.value,r=e.onSelect,s=void 0===r?function(){}:r;return u.a.createElement(Y.b,{id:t,className:n,classNamePrefix:"select",placeholder:"",styles:W,isSearchable:!1,options:a,defaultValue:i,components:{IndicatorsContainer:G,DropdownIndicator:X},onChange:s})});n(144);function J(e){var t=e.options,n=e.defaultValue,a=e.onSelect;return u.a.createElement("div",{className:"star-system-selector"},u.a.createElement("div",{className:"star-system-selector__label"},"Star system"),u.a.createElement(Z,{className:"star-system-selector__selector",options:t,value:n||t[0],onSelect:a}))}var $=function(){return u.a.createElement(f.b.Consumer,null,function(e){var t=e.store.starSystemSelectorSettings,n=t.options,a=t.defaultValue,i=t.onSelect;return u.a.createElement(J,{options:n,defaultValue:a,onSelect:i})})},ee=(n(146),n(29)),te=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){n.props.onClick(n.props.text)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.selected;return u.a.createElement("li",{className:"drop-down-menu__menu-item",onClick:this.handleClick},u.a.createElement("span",{className:"drop-down-menu__menu-item-icon"},n&&u.a.createElement(ee.a,{icon:"check"})),t)}}]),t}(l.Component),ne=(n(148),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).handleSelect=function(e){var t=n.context,a=t.store,i=t.updateStore;a.topMenu.find(function(e){return e.label===n.props.text}).onSelect(e),i(a)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.text,n=this.context.store.topMenu.find(function(e){return e.label===t}),a=n?n.options:[],i=a.length>0;return u.a.createElement("ul",{className:"drop-down-menu"},u.a.createElement("li",null,u.a.createElement("span",{className:"drop-down-menu__toggler"},t,i&&u.a.createElement(ee.a,{className:"drop-down-menu__caret",icon:"chevron-down"})),i&&u.a.createElement("ul",{className:"drop-down-menu__menu"},a.map(function(t){var n=t.label,a=t.selected,i=t.onClick;return u.a.createElement(te,{key:n,selected:a,text:n,onClick:i||e.handleSelect})}))))}}]),t}(l.Component));ne.contextType=f.b;var ae=ne,ie=function(e){var t=e.text,n=e.href,a=e.className,i=void 0===a?"":a,r=e.target,s=void 0===r?"_self":r;return u.a.createElement("a",{className:"main-menu__link ".concat(i),href:n,target:s},t)};function re(e){var t=e.menuItem,n=e.clickable;return u.a.createElement("div",{className:"main-menu__item"},u.a.createElement("div",{className:R()(n&&"main-menu__clickable-zone")},t.type===f.a.LINK&&u.a.createElement(ie,Object.assign({text:t.label},t)),t.type===f.a.DROPDOWN&&u.a.createElement(ae,Object.assign({text:t.label},t))))}var se=function(){return u.a.createElement("nav",{className:"main-menu"},u.a.createElement(f.b.Consumer,null,function(e){return e.store.topMenu.map(function(e){return u.a.createElement(re,{key:e.label,menuItem:e,clickable:e.isClickable})})}))},oe=(n(150),function(e){var t=e.className;return u.a.createElement("header",{className:R()(t,"header","noselect")},u.a.createElement("div",{className:"header__logo-wrapper"},u.a.createElement(q,{className:"header__logo"})),u.a.createElement("div",{className:"header__top-menu"},u.a.createElement(se,null)),u.a.createElement("div",{className:"header__star-system-selector"},u.a.createElement($,null)))}),ce=(n(152),function(e){var t=e.className,n=(e.right,e.children);return u.a.createElement("aside",{className:R()(t,"side-bar")},n)}),le=n(16);n(156);function ue(e){var t=e.direction,n=R()("arrow-logo","arrow-logo--to-".concat(t));return u.a.createElement("svg",{className:n,role:"img",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.a.createElement("path",{d:"M1.50359 3.64645C1.30833 3.84171 1.30833 4.15829 1.50359 4.35355L4.68557 7.53553C4.88083 7.7308 5.19741 7.7308 5.39268 7.53553C5.58794 7.34027 5.58794 7.02369 5.39268 6.82843L2.56425 4L5.39268 1.17157C5.58794 0.97631 5.58794 0.659728 5.39268 0.464466C5.19741 0.269204 4.88083 0.269203 4.68557 0.464466L1.50359 3.64645ZM1.5 8V0H0.5V8H1.5ZM10 3.5L1.85714 3.5L1.85714 4.5L10 4.5L10 3.5Z",fill:"#8F9193"}))}var he=function(){return u.a.createElement("svg",{role:"img",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.a.createElement("path",{d:"M3 3V1H9V5H7M7 5V7H1V3H7V5Z",stroke:"#8F9193",strokeWidth:"0.5"}))},de=function(e){var t=e.isCollapsed,n=e.onClick,a=(e.isToRight,e.className),i=void 0===a?"":a,r=e.collapseDirection,s=void 0===r?"left":r;return u.a.createElement(le.a,{className:i,onClick:n,small:!0},t?u.a.createElement(he,null):u.a.createElement(ue,{direction:s}))},me=function(e){var t=e.className,n=e.leftAligned,a=void 0!==n&&n,i=e.centered,r=void 0!==i&&i,s=e.children;return u.a.createElement("div",{className:R()("panel__field",{"panel__field--left-aligned":a,"panel__field--centered":r},t)},s)},pe=function(e){var t=e.id,n=e.className,a=e.tag,i=void 0===a?"span":a,r=e.normal,s=void 0===r||r,o=e.middle,c=void 0!==o&&o,l=e.small,h=void 0!==l&&l,d=e.children;return u.a.createElement(i,{id:t,className:R()("panel__field-label",{"panel__field-label--normal":s,"panel__field-label--middle":c,"panel__field-label--small":h},n)},d)},fe=function(e){var t=e.id,n=e.className,a=e.fullSize,i=void 0!==a&&a,r=e.children;return u.a.createElement("span",{id:t,className:R()("panel__field-control",{"panel__field-control--full-size":i},n)},r)},ve=function(e){var t=e.id,n=e.className,a=e.children;return u.a.createElement(le.a,{className:R()("panel__button",n),id:t},a)},ye=function(e){var t=e.className,n=e.children;return u.a.createElement("span",{className:R()("panel__field-set",t)},n)},be=function(e){var t=e.id,n=e.className,a=e.children;return u.a.createElement("span",{id:t,className:R()("panel__dimension",n)},a)},ge=(n(158),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={isCollapsed:n.props.collapsedByDefault},n.handleToggle=function(){n.setState(function(e){return{isCollapsed:!e.isCollapsed}})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,a=e.caption,i=e.hideCollapseButton,r=e.children,s=e.titleIcon,o=e.hidden,c=e.collapseDirection,l=this.state.isCollapsed,h=R()("panel","noselect",{"panel--hidden":o,"panel--collapsed":l},n);return u.a.createElement("div",{id:t,className:h},u.a.createElement("div",{className:"panel__header"},u.a.createElement("div",{className:"panel__caption"},s&&u.a.createElement("span",{className:"panel__caption-icon"},s),u.a.createElement("span",{className:"panel__caption-text"},a)),!i&&u.a.createElement(de,{className:"panel__collapse-button",onClick:this.handleToggle,isCollapsed:l,collapseDirection:c})),u.a.createElement("div",{style:{display:l?"none":"block"},className:"panel__content"},r))}}]),t}(l.Component));ge.defaultProps={caption:"",hideCollapseButton:!1,className:"",id:"",collapsedByDefault:!1,hidden:!1,collapseDirection:"left"};n(160);var Ee=function(e){var t=e.className;return u.a.createElement(ge,{id:"cameraPanel",className:"camera-panel ".concat(t),caption:"Camera",titleIcon:u.a.createElement(ee.a,{icon:"expand"}),collapseDirection:"right"},u.a.createElement(me,{className:"camera-panel__field"},u.a.createElement(pe,null,"Target"),u.a.createElement(fe,null,u.a.createElement("select",{className:"camera-panel__field-control",id:"targetSelect"}))),u.a.createElement(me,{className:"camera-panel__field"},u.a.createElement(pe,null,"Frame type"),u.a.createElement(fe,null,u.a.createElement("select",{className:"camera-panel__field-control",id:"rfTypeSelect"}))))};n(162);var je=function(e){var t=e.className;return u.a.createElement("canvas",{className:"time-line ".concat(t),id:"timeLineCanvas"})},Oe=(n(164),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={isTimeRunning:!0},n.handleClick=function(){var e=a.c.time;e&&e.togglePause()},document.addEventListener(a.a.TIME_PAUSED,function(){n.setState({isTimeRunning:!1})}),document.addEventListener(a.a.TIME_UNPAUSED,function(){n.setState({isTimeRunning:!0})}),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.isTimeRunning;return u.a.createElement("div",{role:"button",className:R()("pause-button","noselect",{"pause-button--paused":!e},this.props.className),onClick:this.handleClick},u.a.createElement("div",null,u.a.createElement(ee.a,{className:"pause-button__icon",icon:e?"pause":"play"})),u.a.createElement("div",null,e?"Pause":"Resume"))}}]),t}(l.Component)),_e=function(e){var t=e.className;return u.a.createElement("svg",{className:t,role:"img",width:"4",height:"9",viewBox:"0 0 4 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.a.createElement("path",{d:"M3.71197 2.33602L3.58397 3.42402H2.35197L1.96797 6.14402C1.92531 6.38936 1.92531 6.57069 1.96797 6.68802C2.01064 6.80536 2.11731 6.86402 2.28797 6.86402C2.46931 6.86402 2.62397 6.84269 2.75197 6.80002C2.87997 6.74669 2.96531 6.71469 3.00797 6.70402V7.76002C2.96531 7.77069 2.90131 7.79736 2.81597 7.84002C2.73064 7.88269 2.63464 7.92536 2.52797 7.96802C2.26131 8.08536 1.96264 8.14402 1.63197 8.14402C1.11997 8.14402 0.773306 8.01069 0.591973 7.74402C0.410639 7.46669 0.362639 7.00269 0.447973 6.35202L0.879973 3.42402H0.271973L0.415973 2.33602H1.02397L1.21597 0.976023L2.73597 0.736023L2.49597 2.33602H3.71197Z",fill:"#A1A1A3"}))};n(166);var ke=function(e){var t=e.className;return u.a.createElement(ge,{className:"time-settings-panel ".concat(t),id:"timePanel",caption:"Time",titleIcon:u.a.createElement(_e,{className:"time-settings-panel__logo"})},u.a.createElement(me,null,u.a.createElement(pe,{middle:!0},"Current"),u.a.createElement(fe,null,u.a.createElement("time",{id:"currentDateValue"},"01.01.2000 12:00:00")),u.a.createElement(ve,{id:"useCurrentTime"},"Now")),u.a.createElement(me,null,u.a.createElement(pe,{middle:!0},"Rate"),u.a.createElement(fe,{id:"timeScaleValue"}),u.a.createElement(ve,{id:"setRealTimeScale"},"Real")),u.a.createElement(me,{centered:!0},u.a.createElement(fe,{fullSize:!0},u.a.createElement("input",{id:"timeScaleSlider",type:"range",className:"time-settings-panel__scale-slider",min:"-1",max:"1",step:"0.001",defaultValue:"0.001",style:{width:"100%"}}))))};n(168);var we=function(e){var t=e.className;return u.a.createElement("div",{className:R()(t,"bottom-panel")},u.a.createElement(ke,{className:"bottom-panel__time-settings-panel"}),u.a.createElement(Oe,{className:"bottom-panel__pause-button"}),u.a.createElement("div",{className:"bottom-panel__time-line-container"},u.a.createElement(je,{className:"bottom-panel__time-line"})),u.a.createElement(Ee,{className:"bottom-panel__camera-panel"}),u.a.createElement(g,null))},Me=function(e){var t=e.className;return u.a.createElement(f.b.Consumer,null,function(e){var n=e.store;return u.a.createElement(ge,{className:t,id:"creationPanel",caption:"Orbit creation",hidden:!n.viewSettings.showOrbitCreationPanel},u.a.createElement(me,null,u.a.createElement(pe,null,"Create orbit"),u.a.createElement(ve,{id:"createOrbit"},"Create")),u.a.createElement(me,null,u.a.createElement(pe,null,"Import"),u.a.createElement("input",{type:"text",id:"dump",style:{width:"150px"}}),u.a.createElement(ve,{id:"importOrbit"},"Load")))})},Se=(n(170),function(e){var t=e.className;return u.a.createElement(f.b.Consumer,null,function(e){var n=e.store;return u.a.createElement(ge,{className:R()(t,"transfer-calculation-panel"),id:"lambertPanel",caption:"Transfer calculation",hidden:!n.viewSettings.showTransferCalculationPanel},u.a.createElement(ye,null,u.a.createElement(me,null,u.a.createElement(pe,null,"Origin"),u.a.createElement(fe,null,u.a.createElement("select",{className:"transfer-calculation-panel__select",id:"originSelect"}))),u.a.createElement(me,null,u.a.createElement(pe,null,"Target"),u.a.createElement(fe,null,u.a.createElement("select",{className:"transfer-calculation-panel__select",id:"targetSelect"}))),u.a.createElement(me,null,u.a.createElement(pe,null,"Transfer type"),u.a.createElement(fe,null,"Ballistic")),u.a.createElement(me,null,u.a.createElement(pe,null,"Departure"),u.a.createElement(fe,null,u.a.createElement("time",{id:"departureDateValue"},"01.01.2000 12:00:00")),u.a.createElement(ve,{id:"useCurrentTime"},"Now")),u.a.createElement(me,null,u.a.createElement(pe,null,"Transfer time"),u.a.createElement(fe,{id:"transferTimeValue"})),u.a.createElement(me,null,u.a.createElement(fe,{fullSize:!0},u.a.createElement("input",{id:"transferTimeSlider",type:"range",min:"0",max:"1",step:"0.001",defaultValue:"0.5",style:{width:"100%"}})))),u.a.createElement(ye,{className:"transfer-calculation-panel__delta-v-calc ","data-panel-name":"lambert"},u.a.createElement(me,{className:"panel__field-header"},"Delta-V"),u.a.createElement(me,null,u.a.createElement(pe,null,"Ejection"),u.a.createElement(fe,{id:"deltaVEjection"},"0"),u.a.createElement(be,null,"km/s")),u.a.createElement(me,null,u.a.createElement(pe,null,"Insertion"),u.a.createElement(fe,{id:"deltaVInsertion"},"0"),u.a.createElement(be,null,"km/s")),u.a.createElement(me,null,u.a.createElement(pe,null,"Total"),u.a.createElement(fe,{id:"deltaVTotal"},"0"),u.a.createElement(be,null,"km/s"))))})});n(172);function Te(e){var t=e.className,n=void 0===t?"":t;return u.a.createElement("div",{className:R()(n,"keplerian-view")},u.a.createElement("div",{className:"keplerian-view__column"},u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"Ecc"),u.a.createElement(fe,{id:"elements-ecc"}),u.a.createElement(be,null)),u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"SMA"),u.a.createElement(fe,{id:"elements-sma"}),u.a.createElement(be,null,"km")),u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"Inc"),u.a.createElement(fe,{id:"elements-inc"}),u.a.createElement(be,null,"deg.")),u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"AoP"),u.a.createElement(fe,{id:"elements-aop"}),u.a.createElement(be,null,"deg."))),u.a.createElement("div",{className:"keplerian-view__column"},u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"RAAN"),u.a.createElement(fe,{id:"elements-raan"}),u.a.createElement(be,null,"deg.")),u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"TA"),u.a.createElement(fe,{id:"elements-ta"}),u.a.createElement(be,null,"deg.")),u.a.createElement("div",{className:"keplerian-view__field"},u.a.createElement(pe,{className:"keplerian-view__field-label"},"Period"),u.a.createElement(fe,{id:"elements-period"}),u.a.createElement(be,null,"days"))))}n(174);var Pe=function(e){var t=e.className,n=e.label,a=void 0===n?"x":n,i=e.valueClassName,r=void 0===i?"vec-x":i,s=e.dimension,o=void 0===s?"km":s;return u.a.createElement("div",{className:R()(t,"vector-component")},u.a.createElement(pe,{className:"vector-component__label"},a),u.a.createElement(fe,{className:r}),u.a.createElement(be,null,o))};n(176);var Ae=function(e){var t=e.className,n=e.onClick,a=e.expanded,i=void 0!==a&&a;return u.a.createElement(le.a,{className:R()(t,"expand-button",{"expand-button--expanded":i}),onClick:n},u.a.createElement(ee.a,{className:"expand-button__icon",icon:"chevron-down"}))},Ce=(n(178),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={isExpanded:n.props.isExpanded},n.handleToggle=function(){n.setState(function(e){return{isExpanded:!e.isExpanded}})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.isExpanded,t=this.props,n=t.className,a=t.vectorMagnitudeLabel,i=t.dimension;return u.a.createElement(me,{className:R()(n,"cartesian-vector-view")},u.a.createElement("div",{className:"cartesian-vector-view__header"},u.a.createElement(Pe,{label:a,valueClassName:"vec-magnitude",dimension:i}),u.a.createElement(Ae,{className:"cartesian-vector-view__expand-button",expanded:e,onClick:this.handleToggle})),u.a.createElement("div",{className:R()("cartesian-vector-view__vector-components",{hidden:!e})},u.a.createElement(Pe,{label:"x",valueClassName:"vec-x",dimension:i}),u.a.createElement(Pe,{label:"y",valueClassName:"vec-y",dimension:i}),u.a.createElement(Pe,{label:"z",valueClassName:"vec-z",dimension:i})))}}]),t}(l.Component));Ce.defaultProps={isExpanded:!1};var xe=Ce,De=(n(180),function(){return u.a.createElement(ge,{id:"metricsPanel",className:"metrics-panel",caption:"Metrics",titleIcon:u.a.createElement(ee.a,{icon:"bars"}),collapseDirection:"right"},u.a.createElement("div",{className:"metrics-panel__content"},u.a.createElement(ye,null,u.a.createElement(me,null,u.a.createElement(pe,null,"Object"),u.a.createElement(fe,{id:"metricsOf"})),u.a.createElement(me,null,u.a.createElement(pe,null,"Relative to"),u.a.createElement(fe,{id:"relativeTo"}))),u.a.createElement(ye,null,u.a.createElement(me,{leftAligned:!0},u.a.createElement(pe,{tag:"label"},u.a.createElement("input",{className:"metrics-panel__angles-checker",type:"checkbox",id:"showAnglesOfSelectedOrbit",defaultChecked:!0}),"Show angles"),u.a.createElement("button",{className:"metrics-panel__unload-object-button",type:"button",id:"unloadObject"},"Unload object"))),u.a.createElement(ye,null,u.a.createElement(me,{className:"panel__field-header"},"Main"),u.a.createElement(me,null,u.a.createElement(pe,null,"Orbit"),u.a.createElement(fe,{id:"elements-orbit-alt"}),u.a.createElement(be,null,"km")),u.a.createElement(me,null,u.a.createElement(pe,null,"Avg height"),u.a.createElement(fe,{id:"elements-orbit-avg"}),u.a.createElement(be,null,"km")),u.a.createElement(me,null,u.a.createElement(pe,null,"Altitude"),u.a.createElement(fe,{id:"elements-alt"}),u.a.createElement(be,null,"km")),u.a.createElement(me,null,u.a.createElement(pe,null,"Speed"),u.a.createElement(fe,{id:"elements-speed"}),u.a.createElement(be,null,"m/s")),u.a.createElement(me,null,u.a.createElement(pe,null,"Precession"),u.a.createElement(fe,{id:"elements-precession"}),u.a.createElement(be,null,"deg/day")),u.a.createElement(me,{id:"row-node-time",style:{display:"none"}},u.a.createElement(pe,null,"Node local time"),u.a.createElement(fe,{id:"elements-node-time"}),u.a.createElement(be,null))),u.a.createElement(ye,null,u.a.createElement(me,{className:"panel__field-header"},"Keplerian"),u.a.createElement(Te,{className:"panel__field"})),u.a.createElement(ye,null,u.a.createElement(me,{className:"panel__field-header"},"Cartesian"),u.a.createElement(xe,{className:"metrics-panel__cartesian-position-vector js-metrics-panel-cartesian-position-vector",vectorMagnitudeLabel:"Position",dimension:"km"}),u.a.createElement(xe,{className:"metrics-panel__cartesian-velocity-vector js-metrics-panel-cartesian-velocity-vector",vectorMagnitudeLabel:"Velocity",dimension:"km/s"}))))}),Be=(n(182),function(e){var t=e.className;return u.a.createElement(ge,{id:"maneuverPanel",className:"maneuver-panel ".concat(t),caption:"Maneuver",collapseDirection:"left"},u.a.createElement("div",{className:"maneuver-panel__content"},u.a.createElement(ye,null,u.a.createElement(me,{centered:!0},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"prev-burn"},"Prev burn"),u.a.createElement(pe,{id:"burn-name"}),u.a.createElement("button",{className:"maneuver-panel__remove-button",type:"button",id:"remove-burn"},"remove"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"next-burn"},"Next burn"))),u.a.createElement(ye,null,u.a.createElement(me,{className:"panel__field-header"},"Increment"),u.a.createElement(me,{centered:!0},u.a.createElement(pe,{small:!0,id:"increment"}),u.a.createElement(fe,{className:"maneuver-panel__buttons"},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"incr001"},"0.01"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"incr01"},"0.1"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"incr1"},"1"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"incr10"},"10"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"incr100"},"100"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"incr1000"},"1000")))),u.a.createElement(ye,null,u.a.createElement(me,{className:"panel__field-header"},"Time"),u.a.createElement(me,null,u.a.createElement(pe,null,"Date"),u.a.createElement(fe,{id:"burn-date"}),u.a.createElement("span",{className:"maneuver-panel__buttons"},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"period-minus"},"-P"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"period-plus"},"+P"))),u.a.createElement(me,{centered:!0},u.a.createElement(pe,null,"Epoch"),u.a.createElement(fe,{id:"burn-epoch"}),u.a.createElement("span",{className:"maneuver-panel__buttons"},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"epoch-minus"},"-"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"epoch-plus"},"+")))),u.a.createElement(ye,null,u.a.createElement(me,{className:"panel__field-header"},"Impulse"),u.a.createElement(me,{centered:!0},u.a.createElement(pe,null,"Prograde"),u.a.createElement(fe,{id:"burn-prograde"}),u.a.createElement(be,null,"m/s"),u.a.createElement("span",{className:"maneuver-panel__buttons"},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"prograde-zero"},"0"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"prograde-minus"},"-"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"prograde-plus"},"+"))),u.a.createElement(me,{centered:!0},u.a.createElement(pe,null,"Normal"),u.a.createElement(fe,{id:"burn-normal"}),u.a.createElement(be,null,"m/s"),u.a.createElement("span",{className:"maneuver-panel__buttons"},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"normal-zero"},"0"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"normal-minus"},"-"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"normal-plus"},"+"))),u.a.createElement(me,{centered:!0},u.a.createElement(pe,null,"Radial"),u.a.createElement(fe,{id:"burn-radial"}),u.a.createElement(be,null,"m/s"),u.a.createElement("span",{className:"maneuver-panel__buttons"},u.a.createElement(le.a,{className:"maneuver-panel__button",id:"radial-zero"},"0"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"radial-minus"},"-"),u.a.createElement(le.a,{className:"maneuver-panel__button",id:"radial-plus"},"+"))),u.a.createElement(me,null,u.a.createElement(pe,null,"Total"),u.a.createElement(fe,{id:"burn-total"}),u.a.createElement(be,null,"m/s")))))}),Ne=function(){return u.a.createElement(f.b.Consumer,null,function(e){return e.store,u.a.createElement(ge,{id:"dynamicTrajectoryPanel",caption:"Dynamic trajectory",collapseDirection:"right"},u.a.createElement(me,null,u.a.createElement(pe,null,"Export trajectory"),u.a.createElement(ve,{id:"dump"},"dump")))})},Ie=(n(184),u.a.lazy(function(){return Promise.all([n.e(13),n.e(11)]).then(n.bind(null,293))})),Fe=function(e){var t=e.className;return u.a.createElement(f.b.Consumer,null,function(e){var n=e.store;return u.a.createElement("main",{className:R()(t,"main-view")},u.a.createElement("div",{id:"viewport-id",className:"main-view__viewport-entry"}),u.a.createElement(ce,{className:"main-view__left-side-bar"},u.a.createElement(Me,{className:"main-view__creation-panel"}),u.a.createElement(Be,{className:"main-view__maneuver-panel"}),u.a.createElement(Se,{className:"main-view__transfer-calculation-panel"})),u.a.createElement(ce,{className:"main-view__right-side-bar",right:!0},u.a.createElement(De,null),u.a.createElement(Ne,null)),n.viewSettings.satelliteSearchPanel.isVisible?u.a.createElement(l.Suspense,{fallback:u.a.createElement("div",null)},u.a.createElement(Ie,{className:"main-view__satellite-search-panel"})):null,u.a.createElement(we,{className:"main-view__bottom-panel"}))})},Le=(n(186),n(188),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){Object(F.a)({wizardId:F.b.GETTING_STARTED_WIZARD})}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(oe,{className:"app-layout__header"}),u.a.createElement(Fe,{className:"app-layout__main"}),!1)}}]),t}(u.a.Component));m.b.add(p.d),m.b.add(p.f),m.b.add(p.e),m.b.add(p.c),m.b.add(p.b),m.b.add(p.a);var Re=function(){var e=new y.a;return e.dom.classList.add("stats-badge"),e}(),qe={satelliteFinder:new I("/api")},Ve=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(r)))).state={store:n.props.store},n._handleUpdateStore=function(e){n.setState({store:e})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.store;return u.a.createElement(f.b.Provider,{value:{store:e,stats:Re,updateStore:this._handleUpdateStore,webApiServices:qe}},u.a.createElement(Le,null))}}]),t}(u.a.Component);var Ue,ze=function(e){return a.c.getModule("SolarSystem").loadTLE(a.c.starSystem,e)},Ye=function(){return a.c.loadModule("KSP")},He=new(function(){function e(t){Object(i.a)(this,e),this._store=new f.c(t,ze)}return Object(r.a)(e,[{key:"init",value:function(e){Object(a.b)(e)}},{key:"getInitialState",value:function(){return this._store}},{key:"getApi",value:function(){return{loadTLE:ze,loadKSP:Ye}}}]),e}())(a.c),Ke=He.getInitialState();window.api=He.getApi(),Ue=Ke,d.a.render(u.a.createElement(Ve,{store:Ue}),document.getElementById("root")),He.init(Re)}],[[103,15,12]]]);
//# sourceMappingURL=main.fef6c0ba.chunk.js.map